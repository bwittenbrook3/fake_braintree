!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),(e.braintree||(e.braintree={})).dropin=t()}}(function(){var define,module,exports;return function t(e,n,r){function i(a,s){if(!n[a]){if(!e[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[a]={exports:{}};e[a][0].call(c.exports,function(t){var n=e[a][1][t];return i(n?n:t)},c,c.exports,t,e,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(t,e){"use strict";var n=t("backbone"),r=t("fastclick");t("json2-browser"),t("es5-shim/es5-shim"),t("es5-shim/es5-sham"),t("./template-helpers"),n.$=window.$,r(document.body),e.exports={InlineFrame:t("./inline-frame/inline-frame"),ModalFrame:t("./modal-frame/modal-frame")}},{"./inline-frame/inline-frame":158,"./modal-frame/modal-frame":163,"./template-helpers":173,backbone:2,"es5-shim/es5-sham":136,"es5-shim/es5-shim":137,fastclick:138,"json2-browser":148}],2:[function(t,e,n){!function(e,r){if("function"==typeof define&&define.amd)define(["underscore","jquery","exports"],function(t,n,i){e.Backbone=r(e,i,t,n)});else if("undefined"!=typeof n){var i=t("underscore");r(e,n,i)}else e.Backbone=r(e,{},e._,e.jQuery||e.Zepto||e.ender||e.$)}(this,function(t,e,n,r){{var i=t.Backbone,o=[],a=(o.push,o.slice);o.splice}e.VERSION="1.1.2",e.$=r,e.noConflict=function(){return t.Backbone=i,this},e.emulateHTTP=!1,e.emulateJSON=!1;var s=e.Events={on:function(t,e,n){if(!l(this,"on",t,[e,n])||!e)return this;this._events||(this._events={});var r=this._events[t]||(this._events[t]=[]);return r.push({callback:e,context:n,ctx:n||this}),this},once:function(t,e,r){if(!l(this,"once",t,[e,r])||!e)return this;var i=this,o=n.once(function(){i.off(t,o),e.apply(this,arguments)});return o._callback=e,this.on(t,o,r)},off:function(t,e,r){var i,o,a,s,u,c,p,h;if(!this._events||!l(this,"off",t,[e,r]))return this;if(!t&&!e&&!r)return this._events=void 0,this;for(s=t?[t]:n.keys(this._events),u=0,c=s.length;c>u;u++)if(t=s[u],a=this._events[t]){if(this._events[t]=i=[],e||r)for(p=0,h=a.length;h>p;p++)o=a[p],(e&&e!==o.callback&&e!==o.callback._callback||r&&r!==o.context)&&i.push(o);i.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=a.call(arguments,1);if(!l(this,"trigger",t,e))return this;var n=this._events[t],r=this._events.all;return n&&c(n,e),r&&c(r,arguments),this},stopListening:function(t,e,r){var i=this._listeningTo;if(!i)return this;var o=!e&&!r;r||"object"!=typeof e||(r=this),t&&((i={})[t._listenId]=t);for(var a in i)t=i[a],t.off(e,r,this),(o||n.isEmpty(t._events))&&delete this._listeningTo[a];return this}},u=/\s+/,l=function(t,e,n,r){if(!n)return!0;if("object"==typeof n){for(var i in n)t[e].apply(t,[i,n[i]].concat(r));return!1}if(u.test(n)){for(var o=n.split(u),a=0,s=o.length;s>a;a++)t[e].apply(t,[o[a]].concat(r));return!1}return!0},c=function(t,e){var n,r=-1,i=t.length,o=e[0],a=e[1],s=e[2];switch(e.length){case 0:for(;++r<i;)(n=t[r]).callback.call(n.ctx);return;case 1:for(;++r<i;)(n=t[r]).callback.call(n.ctx,o);return;case 2:for(;++r<i;)(n=t[r]).callback.call(n.ctx,o,a);return;case 3:for(;++r<i;)(n=t[r]).callback.call(n.ctx,o,a,s);return;default:for(;++r<i;)(n=t[r]).callback.apply(n.ctx,e);return}},p={listenTo:"on",listenToOnce:"once"};n.each(p,function(t,e){s[e]=function(e,r,i){var o=this._listeningTo||(this._listeningTo={}),a=e._listenId||(e._listenId=n.uniqueId("l"));return o[a]=e,i||"object"!=typeof r||(i=this),e[t](r,i,this),this}}),s.bind=s.on,s.unbind=s.off,n.extend(e,s);var h=e.Model=function(t,e){var r=t||{};e||(e={}),this.cid=n.uniqueId("c"),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(r=this.parse(r,e)||{}),r=n.defaults({},r,n.result(this,"defaults")),this.set(r,e),this.changed={},this.initialize.apply(this,arguments)};n.extend(h.prototype,s,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return n.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return n.escape(this.get(t))},has:function(t){return null!=this.get(t)},set:function(t,e,r){var i,o,a,s,u,l,c,p;if(null==t)return this;if("object"==typeof t?(o=t,r=e):(o={})[t]=e,r||(r={}),!this._validate(o,r))return!1;a=r.unset,u=r.silent,s=[],l=this._changing,this._changing=!0,l||(this._previousAttributes=n.clone(this.attributes),this.changed={}),p=this.attributes,c=this._previousAttributes,this.idAttribute in o&&(this.id=o[this.idAttribute]);for(i in o)e=o[i],n.isEqual(p[i],e)||s.push(i),n.isEqual(c[i],e)?delete this.changed[i]:this.changed[i]=e,a?delete p[i]:p[i]=e;if(!u){s.length&&(this._pending=r);for(var h=0,d=s.length;d>h;h++)this.trigger("change:"+s[h],this,p[s[h]],r)}if(l)return this;if(!u)for(;this._pending;)r=this._pending,this._pending=!1,this.trigger("change",this,r);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,n.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var r in this.attributes)e[r]=void 0;return this.set(e,n.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!n.isEmpty(this.changed):n.has(this.changed,t)},changedAttributes:function(t){if(!t)return this.hasChanged()?n.clone(this.changed):!1;var e,r=!1,i=this._changing?this._previousAttributes:this.attributes;for(var o in t)n.isEqual(i[o],e=t[o])||((r||(r={}))[o]=e);return r},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(t){t=t?n.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=this,r=t.success;return t.success=function(n){return e.set(e.parse(n,t),t)?(r&&r(e,n,t),void e.trigger("sync",e,n,t)):!1},U(this,t),this.sync("read",this,t)},save:function(t,e,r){var i,o,a,s=this.attributes;if(null==t||"object"==typeof t?(i=t,r=e):(i={})[t]=e,r=n.extend({validate:!0},r),i&&!r.wait){if(!this.set(i,r))return!1}else if(!this._validate(i,r))return!1;i&&r.wait&&(this.attributes=n.extend({},s,i)),void 0===r.parse&&(r.parse=!0);var u=this,l=r.success;return r.success=function(t){u.attributes=s;var e=u.parse(t,r);return r.wait&&(e=n.extend(i||{},e)),n.isObject(e)&&!u.set(e,r)?!1:(l&&l(u,t,r),void u.trigger("sync",u,t,r))},U(this,r),o=this.isNew()?"create":r.patch?"patch":"update","patch"===o&&(r.attrs=i),a=this.sync(o,this,r),i&&r.wait&&(this.attributes=s),a},destroy:function(t){t=t?n.clone(t):{};var e=this,r=t.success,i=function(){e.trigger("destroy",e,e.collection,t)};if(t.success=function(n){(t.wait||e.isNew())&&i(),r&&r(e,n,t),e.isNew()||e.trigger("sync",e,n,t)},this.isNew())return t.success(),!1;U(this,t);var o=this.sync("delete",this,t);return t.wait||i(),o},url:function(){var t=n.result(this,"urlRoot")||n.result(this.collection,"url")||F();return this.isNew()?t:t.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(t){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},n.extend(t||{},{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=n.extend({},this.attributes,t);var r=this.validationError=this.validate(t,e)||null;return r?(this.trigger("invalid",this,r,n.extend(e,{validationError:r})),!1):!0}});var d=["keys","values","pairs","invert","pick","omit"];n.each(d,function(t){h.prototype[t]=function(){var e=a.call(arguments);return e.unshift(this.attributes),n[t].apply(n,e)}});var f=e.Collection=function(t,e){e||(e={}),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,n.extend({silent:!0},e))},m={add:!0,remove:!0,merge:!0},v={add:!0,remove:!1};n.extend(f.prototype,s,{model:h,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return e.sync.apply(this,arguments)},add:function(t,e){return this.set(t,n.extend({merge:!1},e,v))},remove:function(t,e){var r=!n.isArray(t);t=r?[t]:n.clone(t),e||(e={});var i,o,a,s;for(i=0,o=t.length;o>i;i++)s=t[i]=this.get(t[i]),s&&(delete this._byId[s.id],delete this._byId[s.cid],a=this.indexOf(s),this.models.splice(a,1),this.length--,e.silent||(e.index=a,s.trigger("remove",s,this,e)),this._removeReference(s,e));return r?t[0]:t},set:function(t,e){e=n.defaults({},e,m),e.parse&&(t=this.parse(t,e));var r=!n.isArray(t);t=r?t?[t]:[]:n.clone(t);var i,o,a,s,u,l,c,p=e.at,d=this.model,f=this.comparator&&null==p&&e.sort!==!1,v=n.isString(this.comparator)?this.comparator:null,y=[],g=[],b={},w=e.add,_=e.merge,C=e.remove,x=!f&&w&&C?[]:!1;for(i=0,o=t.length;o>i;i++){if(u=t[i]||{},a=u instanceof h?s=u:u[d.prototype.idAttribute||"id"],l=this.get(a))C&&(b[l.cid]=!0),_&&(u=u===s?s.attributes:u,e.parse&&(u=l.parse(u,e)),l.set(u,e),f&&!c&&l.hasChanged(v)&&(c=!0)),t[i]=l;else if(w){if(s=t[i]=this._prepareModel(u,e),!s)continue;y.push(s),this._addReference(s,e)}s=l||s,!x||!s.isNew()&&b[s.id]||x.push(s),b[s.id]=!0}if(C){for(i=0,o=this.length;o>i;++i)b[(s=this.models[i]).cid]||g.push(s);g.length&&this.remove(g,e)}if(y.length||x&&x.length)if(f&&(c=!0),this.length+=y.length,null!=p)for(i=0,o=y.length;o>i;i++)this.models.splice(p+i,0,y[i]);else{x&&(this.models.length=0);var E=x||y;for(i=0,o=E.length;o>i;i++)this.models.push(E[i])}if(c&&this.sort({silent:!0}),!e.silent){for(i=0,o=y.length;o>i;i++)(s=y[i]).trigger("add",s,this,e);(c||x&&x.length)&&this.trigger("sort",this,e)}return r?t[0]:t},reset:function(t,e){e||(e={});for(var r=0,i=this.models.length;i>r;r++)this._removeReference(this.models[r],e);return e.previousModels=this.models,this._reset(),t=this.add(t,n.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,n.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t),e},unshift:function(t,e){return this.add(t,n.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t),e},slice:function(){return a.apply(this.models,arguments)},get:function(t){return null==t?void 0:this._byId[t]||this._byId[t.id]||this._byId[t.cid]},at:function(t){return this.models[t]},where:function(t,e){return n.isEmpty(t)?e?void 0:[]:this[e?"find":"filter"](function(e){for(var n in t)if(t[n]!==e.get(n))return!1;return!0})},findWhere:function(t){return this.where(t,!0)},sort:function(t){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return t||(t={}),n.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(n.bind(this.comparator,this)),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return n.invoke(this.models,"get",t)},fetch:function(t){t=t?n.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=t.success,r=this;return t.success=function(n){var i=t.reset?"reset":"set";r[i](n,t),e&&e(r,n,t),r.trigger("sync",r,n,t)},U(this,t),this.sync("read",this,t)},create:function(t,e){if(e=e?n.clone(e):{},!(t=this._prepareModel(t,e)))return!1;e.wait||this.add(t,e);var r=this,i=e.success;return e.success=function(t,n){e.wait&&r.add(t,e),i&&i(t,n,e)},t.save(null,e),t},parse:function(t){return t},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(t instanceof h)return t;e=e?n.clone(e):{},e.collection=this;var r=new this.model(t,e);return r.validationError?(this.trigger("invalid",this,r.validationError,e),!1):r},_addReference:function(t){this._byId[t.cid]=t,null!=t.id&&(this._byId[t.id]=t),t.collection||(t.collection=this),t.on("all",this._onModelEvent,this)},_removeReference:function(t){this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,n,r){("add"!==t&&"remove"!==t||n===this)&&("destroy"===t&&this.remove(e,r),e&&t==="change:"+e.idAttribute&&(delete this._byId[e.previous(e.idAttribute)],null!=e.id&&(this._byId[e.id]=e)),this.trigger.apply(this,arguments))}});var y=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];n.each(y,function(t){f.prototype[t]=function(){var e=a.call(arguments);return e.unshift(this.models),n[t].apply(n,e)}});var g=["groupBy","countBy","sortBy","indexBy"];n.each(g,function(t){f.prototype[t]=function(e,r){var i=n.isFunction(e)?e:function(t){return t.get(e)};return n[t](this.models,i,r)}});var b=e.View=function(t){this.cid=n.uniqueId("view"),t||(t={}),n.extend(this,n.pick(t,_)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},w=/^(\S+)\s*(.*)$/,_=["model","collection","el","id","attributes","className","tagName","events"];n.extend(b.prototype,s,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(t,n){return this.$el&&this.undelegateEvents(),this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0],n!==!1&&this.delegateEvents(),this},delegateEvents:function(t){if(!t&&!(t=n.result(this,"events")))return this;this.undelegateEvents();for(var e in t){var r=t[e];if(n.isFunction(r)||(r=this[t[e]]),r){var i=e.match(w),o=i[1],a=i[2];r=n.bind(r,this),o+=".delegateEvents"+this.cid,""===a?this.$el.on(o,r):this.$el.on(o,a,r)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(n.result(this,"el"),!1);else{var t=n.extend({},n.result(this,"attributes"));this.id&&(t.id=n.result(this,"id")),this.className&&(t["class"]=n.result(this,"className"));var r=e.$("<"+n.result(this,"tagName")+">").attr(t);this.setElement(r,!1)}}}),e.sync=function(t,r,i){var o=x[t];n.defaults(i||(i={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var a={type:o,dataType:"json"};if(i.url||(a.url=n.result(r,"url")||F()),null!=i.data||!r||"create"!==t&&"update"!==t&&"patch"!==t||(a.contentType="application/json",a.data=JSON.stringify(i.attrs||r.toJSON(i))),i.emulateJSON&&(a.contentType="application/x-www-form-urlencoded",a.data=a.data?{model:a.data}:{}),i.emulateHTTP&&("PUT"===o||"DELETE"===o||"PATCH"===o)){a.type="POST",i.emulateJSON&&(a.data._method=o);var s=i.beforeSend;i.beforeSend=function(t){return t.setRequestHeader("X-HTTP-Method-Override",o),s?s.apply(this,arguments):void 0}}"GET"===a.type||i.emulateJSON||(a.processData=!1),"PATCH"===a.type&&C&&(a.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var u=i.xhr=e.ajax(n.extend(a,i));return r.trigger("request",r,u,i),u};var C=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),x={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var E=e.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},k=/\((.*?)\)/g,P=/(\(\?)?:\w+/g,S=/\*\w+/g,A=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(E.prototype,s,{initialize:function(){},route:function(t,r,i){n.isRegExp(t)||(t=this._routeToRegExp(t)),n.isFunction(r)&&(i=r,r=""),i||(i=this[r]);var o=this;return e.history.route(t,function(n){var a=o._extractParameters(t,n);o.execute(i,a),o.trigger.apply(o,["route:"+r].concat(a)),o.trigger("route",r,a),e.history.trigger("route",o,r,a)}),this},execute:function(t,e){t&&t.apply(this,e)},navigate:function(t,n){return e.history.navigate(t,n),this},_bindRoutes:function(){if(this.routes){this.routes=n.result(this,"routes");for(var t,e=n.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(A,"\\$&").replace(k,"(?:$1)?").replace(P,function(t,e){return e?t:"([^/?]+)"}).replace(S,"([^?]*?)"),new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(t,e){var r=t.exec(e).slice(1);return n.map(r,function(t,e){return e===r.length-1?t||null:t?decodeURIComponent(t):null})}});var O=e.History=function(){this.handlers=[],n.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},T=/^[#\/]|\s+$/g,I=/^\/+|\/+$/g,M=/msie [\w.]+/,N=/\/$/,j=/#.*$/;O.started=!1,n.extend(O.prototype,s,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getFragment:function(t,e){if(null==t)if(this._hasPushState||!this._wantsHashChange||e){t=decodeURI(this.location.pathname+this.location.search);var n=this.root.replace(N,"");t.indexOf(n)||(t=t.slice(n.length))}else t=this.getHash();return t.replace(T,"")},start:function(t){if(O.started)throw new Error("Backbone.history has already been started");O.started=!0,this.options=n.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var r=this.getFragment(),i=document.documentMode,o=M.exec(navigator.userAgent.toLowerCase())&&(!i||7>=i);if(this.root=("/"+this.root+"/").replace(I,"/"),o&&this._wantsHashChange){var a=e.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=a.hide().appendTo("body")[0].contentWindow,this.navigate(r)}this._hasPushState?e.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!o?e.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=r;var s=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&s.hash&&(this.fragment=this.getHash().replace(T,""),this.history.replaceState({},document.title,this.root+this.fragment))}return this.options.silent?void 0:this.loadUrl()},stop:function(){e.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),O.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(){var t=this.getFragment();return t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe))),t===this.fragment?!1:(this.iframe&&this.navigate(t),void this.loadUrl())},loadUrl:function(t){return t=this.fragment=this.getFragment(t),n.any(this.handlers,function(e){return e.route.test(t)?(e.callback(t),!0):void 0})},navigate:function(t,e){if(!O.started)return!1;e&&e!==!0||(e={trigger:!!e});var n=this.root+(t=this.getFragment(t||""));if(t=t.replace(j,""),this.fragment!==t){if(this.fragment=t,""===t&&"/"!==n&&(n=n.slice(0,-1)),this._hasPushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getFragment(this.getHash(this.iframe))&&(e.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,t,e.replace))}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,n){if(n){var r=t.href.replace(/(javascript:|#).*$/,"");t.replace(r+"#"+e)}else t.hash="#"+e}}),e.history=new O;var R=function(t,e){var r,i=this;r=t&&n.has(t,"constructor")?t.constructor:function(){return i.apply(this,arguments)},n.extend(r,i,e);var o=function(){this.constructor=r};return o.prototype=i.prototype,r.prototype=new o,t&&n.extend(r.prototype,t),r.__super__=i.prototype,r};h.extend=f.extend=E.extend=b.extend=O.extend=R;var F=function(){throw new Error('A "url" property or function must be specified')},U=function(t,e){var n=e.error;e.error=function(r){n&&n(t,r,e),t.trigger("error",t,r,e)}};return e})},{underscore:3}],3:[function(t,e,n){(function(){function t(t){function e(e,n,r,i,o,a){for(;o>=0&&a>o;o+=t){var s=i?i[o]:o;r=n(r,e[s],s,e)}return r}return function(n,r,i,o){r=w(r,o,4);var a=!k(n)&&b.keys(n),s=(a||n).length,u=t>0?0:s-1;return arguments.length<3&&(i=n[a?a[u]:u],u+=t),e(n,r,i,a,u,s)}}function r(t){return function(e,n,r){n=_(n,r);for(var i=null!=e&&e.length,o=t>0?0:i-1;o>=0&&i>o;o+=t)if(n(e[o],o,e))return o;return-1}}function i(t,e){var n=T.length,r=t.constructor,i=b.isFunction(r)&&r.prototype||u,o="constructor";for(b.has(t,o)&&!b.contains(e,o)&&e.push(o);n--;)o=T[n],o in t&&t[o]!==i[o]&&!b.contains(e,o)&&e.push(o)}var o=this,a=o._,s=Array.prototype,u=Object.prototype,l=Function.prototype,c=s.push,p=s.slice,h=u.toString,d=u.hasOwnProperty,f=Array.isArray,m=Object.keys,v=l.bind,y=Object.create,g=function(){},b=function(t){return t instanceof b?t:this instanceof b?void(this._wrapped=t):new b(t)};"undefined"!=typeof n?("undefined"!=typeof e&&e.exports&&(n=e.exports=b),n._=b):o._=b,b.VERSION="1.8.2";var w=function(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)};case 4:return function(n,r,i,o){return t.call(e,n,r,i,o)}}return function(){return t.apply(e,arguments)}},_=function(t,e,n){return null==t?b.identity:b.isFunction(t)?w(t,e,n):b.isObject(t)?b.matcher(t):b.property(t)};b.iteratee=function(t,e){return _(t,e,1/0)};var C=function(t,e){return function(n){var r=arguments.length;if(2>r||null==n)return n;for(var i=1;r>i;i++)for(var o=arguments[i],a=t(o),s=a.length,u=0;s>u;u++){var l=a[u];e&&void 0!==n[l]||(n[l]=o[l])}return n}},x=function(t){if(!b.isObject(t))return{};if(y)return y(t);g.prototype=t;var e=new g;return g.prototype=null,e},E=Math.pow(2,53)-1,k=function(t){var e=t&&t.length;return"number"==typeof e&&e>=0&&E>=e};b.each=b.forEach=function(t,e,n){e=w(e,n);var r,i;if(k(t))for(r=0,i=t.length;i>r;r++)e(t[r],r,t);else{var o=b.keys(t);for(r=0,i=o.length;i>r;r++)e(t[o[r]],o[r],t)}return t},b.map=b.collect=function(t,e,n){e=_(e,n);for(var r=!k(t)&&b.keys(t),i=(r||t).length,o=Array(i),a=0;i>a;a++){var s=r?r[a]:a;o[a]=e(t[s],s,t)}return o},b.reduce=b.foldl=b.inject=t(1),b.reduceRight=b.foldr=t(-1),b.find=b.detect=function(t,e,n){var r;return r=k(t)?b.findIndex(t,e,n):b.findKey(t,e,n),void 0!==r&&-1!==r?t[r]:void 0},b.filter=b.select=function(t,e,n){var r=[];return e=_(e,n),b.each(t,function(t,n,i){e(t,n,i)&&r.push(t)}),r},b.reject=function(t,e,n){return b.filter(t,b.negate(_(e)),n)},b.every=b.all=function(t,e,n){e=_(e,n);for(var r=!k(t)&&b.keys(t),i=(r||t).length,o=0;i>o;o++){var a=r?r[o]:o;if(!e(t[a],a,t))return!1}return!0},b.some=b.any=function(t,e,n){e=_(e,n);for(var r=!k(t)&&b.keys(t),i=(r||t).length,o=0;i>o;o++){var a=r?r[o]:o;if(e(t[a],a,t))return!0}return!1},b.contains=b.includes=b.include=function(t,e,n){return k(t)||(t=b.values(t)),b.indexOf(t,e,"number"==typeof n&&n)>=0},b.invoke=function(t,e){var n=p.call(arguments,2),r=b.isFunction(e);return b.map(t,function(t){var i=r?e:t[e];return null==i?i:i.apply(t,n)})},b.pluck=function(t,e){return b.map(t,b.property(e))},b.where=function(t,e){return b.filter(t,b.matcher(e))},b.findWhere=function(t,e){return b.find(t,b.matcher(e))},b.max=function(t,e,n){var r,i,o=-1/0,a=-1/0;if(null==e&&null!=t){t=k(t)?t:b.values(t);for(var s=0,u=t.length;u>s;s++)r=t[s],r>o&&(o=r)}else e=_(e,n),b.each(t,function(t,n,r){i=e(t,n,r),(i>a||i===-1/0&&o===-1/0)&&(o=t,a=i)});return o},b.min=function(t,e,n){var r,i,o=1/0,a=1/0;if(null==e&&null!=t){t=k(t)?t:b.values(t);for(var s=0,u=t.length;u>s;s++)r=t[s],o>r&&(o=r)}else e=_(e,n),b.each(t,function(t,n,r){i=e(t,n,r),(a>i||1/0===i&&1/0===o)&&(o=t,a=i)});return o},b.shuffle=function(t){for(var e,n=k(t)?t:b.values(t),r=n.length,i=Array(r),o=0;r>o;o++)e=b.random(0,o),e!==o&&(i[o]=i[e]),i[e]=n[o];return i},b.sample=function(t,e,n){return null==e||n?(k(t)||(t=b.values(t)),t[b.random(t.length-1)]):b.shuffle(t).slice(0,Math.max(0,e))},b.sortBy=function(t,e,n){return e=_(e,n),b.pluck(b.map(t,function(t,n,r){return{value:t,index:n,criteria:e(t,n,r)}}).sort(function(t,e){var n=t.criteria,r=e.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(r>n||void 0===r)return-1}return t.index-e.index}),"value")};var P=function(t){return function(e,n,r){var i={};return n=_(n,r),b.each(e,function(r,o){var a=n(r,o,e);t(i,r,a)}),i}};b.groupBy=P(function(t,e,n){b.has(t,n)?t[n].push(e):t[n]=[e]}),b.indexBy=P(function(t,e,n){t[n]=e}),b.countBy=P(function(t,e,n){b.has(t,n)?t[n]++:t[n]=1}),b.toArray=function(t){return t?b.isArray(t)?p.call(t):k(t)?b.map(t,b.identity):b.values(t):[]},b.size=function(t){return null==t?0:k(t)?t.length:b.keys(t).length},b.partition=function(t,e,n){e=_(e,n);var r=[],i=[];return b.each(t,function(t,n,o){(e(t,n,o)?r:i).push(t)}),[r,i]},b.first=b.head=b.take=function(t,e,n){return null==t?void 0:null==e||n?t[0]:b.initial(t,t.length-e)},b.initial=function(t,e,n){return p.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))},b.last=function(t,e,n){return null==t?void 0:null==e||n?t[t.length-1]:b.rest(t,Math.max(0,t.length-e))},b.rest=b.tail=b.drop=function(t,e,n){return p.call(t,null==e||n?1:e)},b.compact=function(t){return b.filter(t,b.identity)};var S=function(t,e,n,r){for(var i=[],o=0,a=r||0,s=t&&t.length;s>a;a++){var u=t[a];if(k(u)&&(b.isArray(u)||b.isArguments(u))){e||(u=S(u,e,n));var l=0,c=u.length;for(i.length+=c;c>l;)i[o++]=u[l++]}else n||(i[o++]=u)}return i};b.flatten=function(t,e){return S(t,e,!1)},b.without=function(t){return b.difference(t,p.call(arguments,1))},b.uniq=b.unique=function(t,e,n,r){if(null==t)return[];b.isBoolean(e)||(r=n,n=e,e=!1),null!=n&&(n=_(n,r));for(var i=[],o=[],a=0,s=t.length;s>a;a++){var u=t[a],l=n?n(u,a,t):u;e?(a&&o===l||i.push(u),o=l):n?b.contains(o,l)||(o.push(l),i.push(u)):b.contains(i,u)||i.push(u)}return i},b.union=function(){return b.uniq(S(arguments,!0,!0))},b.intersection=function(t){if(null==t)return[];for(var e=[],n=arguments.length,r=0,i=t.length;i>r;r++){var o=t[r];if(!b.contains(e,o)){for(var a=1;n>a&&b.contains(arguments[a],o);a++);a===n&&e.push(o)}}return e},b.difference=function(t){var e=S(arguments,!0,!0,1);return b.filter(t,function(t){return!b.contains(e,t)})},b.zip=function(){return b.unzip(arguments)},b.unzip=function(t){for(var e=t&&b.max(t,"length").length||0,n=Array(e),r=0;e>r;r++)n[r]=b.pluck(t,r);return n},b.object=function(t,e){for(var n={},r=0,i=t&&t.length;i>r;r++)e?n[t[r]]=e[r]:n[t[r][0]]=t[r][1];return n},b.indexOf=function(t,e,n){var r=0,i=t&&t.length;if("number"==typeof n)r=0>n?Math.max(0,i+n):n;else if(n&&i)return r=b.sortedIndex(t,e),t[r]===e?r:-1;if(e!==e)return b.findIndex(p.call(t,r),b.isNaN);for(;i>r;r++)if(t[r]===e)return r;return-1},b.lastIndexOf=function(t,e,n){var r=t?t.length:0;if("number"==typeof n&&(r=0>n?r+n+1:Math.min(r,n+1)),e!==e)return b.findLastIndex(p.call(t,0,r),b.isNaN);for(;--r>=0;)if(t[r]===e)return r;return-1},b.findIndex=r(1),b.findLastIndex=r(-1),b.sortedIndex=function(t,e,n,r){n=_(n,r,1);for(var i=n(e),o=0,a=t.length;a>o;){var s=Math.floor((o+a)/2);n(t[s])<i?o=s+1:a=s}return o},b.range=function(t,e,n){arguments.length<=1&&(e=t||0,t=0),n=n||1;for(var r=Math.max(Math.ceil((e-t)/n),0),i=Array(r),o=0;r>o;o++,t+=n)i[o]=t;return i};var A=function(t,e,n,r,i){if(!(r instanceof e))return t.apply(n,i);var o=x(t.prototype),a=t.apply(o,i);return b.isObject(a)?a:o};b.bind=function(t,e){if(v&&t.bind===v)return v.apply(t,p.call(arguments,1));if(!b.isFunction(t))throw new TypeError("Bind must be called on a function");var n=p.call(arguments,2),r=function(){return A(t,r,e,this,n.concat(p.call(arguments)))};return r},b.partial=function(t){var e=p.call(arguments,1),n=function(){for(var r=0,i=e.length,o=Array(i),a=0;i>a;a++)o[a]=e[a]===b?arguments[r++]:e[a];for(;r<arguments.length;)o.push(arguments[r++]);return A(t,n,this,this,o)};return n},b.bindAll=function(t){var e,n,r=arguments.length;if(1>=r)throw new Error("bindAll must be passed function names");for(e=1;r>e;e++)n=arguments[e],t[n]=b.bind(t[n],t);return t},b.memoize=function(t,e){var n=function(r){var i=n.cache,o=""+(e?e.apply(this,arguments):r);return b.has(i,o)||(i[o]=t.apply(this,arguments)),i[o]};return n.cache={},n},b.delay=function(t,e){var n=p.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},b.defer=b.partial(b.delay,b,1),b.throttle=function(t,e,n){var r,i,o,a=null,s=0;n||(n={});var u=function(){s=n.leading===!1?0:b.now(),a=null,o=t.apply(r,i),a||(r=i=null)};return function(){var l=b.now();s||n.leading!==!1||(s=l);var c=e-(l-s);return r=this,i=arguments,0>=c||c>e?(a&&(clearTimeout(a),a=null),s=l,o=t.apply(r,i),a||(r=i=null)):a||n.trailing===!1||(a=setTimeout(u,c)),o}},b.debounce=function(t,e,n){var r,i,o,a,s,u=function(){var l=b.now()-a;e>l&&l>=0?r=setTimeout(u,e-l):(r=null,n||(s=t.apply(o,i),r||(o=i=null)))};return function(){o=this,i=arguments,a=b.now();var l=n&&!r;return r||(r=setTimeout(u,e)),l&&(s=t.apply(o,i),o=i=null),s}},b.wrap=function(t,e){return b.partial(e,t)},b.negate=function(t){return function(){return!t.apply(this,arguments)}},b.compose=function(){var t=arguments,e=t.length-1;return function(){for(var n=e,r=t[e].apply(this,arguments);n--;)r=t[n].call(this,r);return r}},b.after=function(t,e){return function(){return--t<1?e.apply(this,arguments):void 0}},b.before=function(t,e){var n;return function(){return--t>0&&(n=e.apply(this,arguments)),1>=t&&(e=null),n}},b.once=b.partial(b.before,2);var O=!{toString:null}.propertyIsEnumerable("toString"),T=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];b.keys=function(t){if(!b.isObject(t))return[];if(m)return m(t);var e=[];for(var n in t)b.has(t,n)&&e.push(n);return O&&i(t,e),e},b.allKeys=function(t){if(!b.isObject(t))return[];var e=[];for(var n in t)e.push(n);return O&&i(t,e),e},b.values=function(t){for(var e=b.keys(t),n=e.length,r=Array(n),i=0;n>i;i++)r[i]=t[e[i]];return r},b.mapObject=function(t,e,n){e=_(e,n);for(var r,i=b.keys(t),o=i.length,a={},s=0;o>s;s++)r=i[s],a[r]=e(t[r],r,t);return a},b.pairs=function(t){for(var e=b.keys(t),n=e.length,r=Array(n),i=0;n>i;i++)r[i]=[e[i],t[e[i]]];return r},b.invert=function(t){for(var e={},n=b.keys(t),r=0,i=n.length;i>r;r++)e[t[n[r]]]=n[r];return e},b.functions=b.methods=function(t){var e=[];for(var n in t)b.isFunction(t[n])&&e.push(n);return e.sort()},b.extend=C(b.allKeys),b.extendOwn=b.assign=C(b.keys),b.findKey=function(t,e,n){e=_(e,n);for(var r,i=b.keys(t),o=0,a=i.length;a>o;o++)if(r=i[o],e(t[r],r,t))return r},b.pick=function(t,e,n){var r,i,o={},a=t;if(null==a)return o;b.isFunction(e)?(i=b.allKeys(a),r=w(e,n)):(i=S(arguments,!1,!1,1),r=function(t,e,n){return e in n},a=Object(a));for(var s=0,u=i.length;u>s;s++){var l=i[s],c=a[l];r(c,l,a)&&(o[l]=c)}return o},b.omit=function(t,e,n){if(b.isFunction(e))e=b.negate(e);else{var r=b.map(S(arguments,!1,!1,1),String);e=function(t,e){return!b.contains(r,e)}}return b.pick(t,e,n)},b.defaults=C(b.allKeys,!0),b.clone=function(t){return b.isObject(t)?b.isArray(t)?t.slice():b.extend({},t):t},b.tap=function(t,e){return e(t),t},b.isMatch=function(t,e){var n=b.keys(e),r=n.length;if(null==t)return!r;for(var i=Object(t),o=0;r>o;o++){var a=n[o];if(e[a]!==i[a]||!(a in i))return!1}return!0};var I=function(t,e,n,r){if(t===e)return 0!==t||1/t===1/e;if(null==t||null==e)return t===e;t instanceof b&&(t=t._wrapped),e instanceof b&&(e=e._wrapped);var i=h.call(t);if(i!==h.call(e))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+t==""+e;
case"[object Number]":return+t!==+t?+e!==+e:0===+t?1/+t===1/e:+t===+e;case"[object Date]":case"[object Boolean]":return+t===+e}var o="[object Array]"===i;if(!o){if("object"!=typeof t||"object"!=typeof e)return!1;var a=t.constructor,s=e.constructor;if(a!==s&&!(b.isFunction(a)&&a instanceof a&&b.isFunction(s)&&s instanceof s)&&"constructor"in t&&"constructor"in e)return!1}n=n||[],r=r||[];for(var u=n.length;u--;)if(n[u]===t)return r[u]===e;if(n.push(t),r.push(e),o){if(u=t.length,u!==e.length)return!1;for(;u--;)if(!I(t[u],e[u],n,r))return!1}else{var l,c=b.keys(t);if(u=c.length,b.keys(e).length!==u)return!1;for(;u--;)if(l=c[u],!b.has(e,l)||!I(t[l],e[l],n,r))return!1}return n.pop(),r.pop(),!0};b.isEqual=function(t,e){return I(t,e)},b.isEmpty=function(t){return null==t?!0:k(t)&&(b.isArray(t)||b.isString(t)||b.isArguments(t))?0===t.length:0===b.keys(t).length},b.isElement=function(t){return!(!t||1!==t.nodeType)},b.isArray=f||function(t){return"[object Array]"===h.call(t)},b.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},b.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(t){b["is"+t]=function(e){return h.call(e)==="[object "+t+"]"}}),b.isArguments(arguments)||(b.isArguments=function(t){return b.has(t,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(b.isFunction=function(t){return"function"==typeof t||!1}),b.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},b.isNaN=function(t){return b.isNumber(t)&&t!==+t},b.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"===h.call(t)},b.isNull=function(t){return null===t},b.isUndefined=function(t){return void 0===t},b.has=function(t,e){return null!=t&&d.call(t,e)},b.noConflict=function(){return o._=a,this},b.identity=function(t){return t},b.constant=function(t){return function(){return t}},b.noop=function(){},b.property=function(t){return function(e){return null==e?void 0:e[t]}},b.propertyOf=function(t){return null==t?function(){}:function(e){return t[e]}},b.matcher=b.matches=function(t){return t=b.extendOwn({},t),function(e){return b.isMatch(e,t)}},b.times=function(t,e,n){var r=Array(Math.max(0,t));e=w(e,n,1);for(var i=0;t>i;i++)r[i]=e(i);return r},b.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},b.now=Date.now||function(){return(new Date).getTime()};var M={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},N=b.invert(M),j=function(t){var e=function(e){return t[e]},n="(?:"+b.keys(t).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(t){return t=null==t?"":""+t,r.test(t)?t.replace(i,e):t}};b.escape=j(M),b.unescape=j(N),b.result=function(t,e,n){var r=null==t?void 0:t[e];return void 0===r&&(r=n),b.isFunction(r)?r.call(t):r};var R=0;b.uniqueId=function(t){var e=++R+"";return t?t+e:e},b.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var F=/(.)^/,U={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},D=/\\|'|\r|\n|\u2028|\u2029/g,L=function(t){return"\\"+U[t]};b.template=function(t,e,n){!e&&n&&(e=n),e=b.defaults({},e,b.templateSettings);var r=RegExp([(e.escape||F).source,(e.interpolate||F).source,(e.evaluate||F).source].join("|")+"|$","g"),i=0,o="__p+='";t.replace(r,function(e,n,r,a,s){return o+=t.slice(i,s).replace(D,L),i=s+e.length,n?o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?o+="'+\n((__t=("+r+"))==null?'':__t)+\n'":a&&(o+="';\n"+a+"\n__p+='"),e}),o+="';\n",e.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{var a=new Function(e.variable||"obj","_",o)}catch(s){throw s.source=o,s}var u=function(t){return a.call(this,t,b)},l=e.variable||"obj";return u.source="function("+l+"){\n"+o+"}",u},b.chain=function(t){var e=b(t);return e._chain=!0,e};var V=function(t,e){return t._chain?b(e).chain():e};b.mixin=function(t){b.each(b.functions(t),function(e){var n=b[e]=t[e];b.prototype[e]=function(){var t=[this._wrapped];return c.apply(t,arguments),V(this,n.apply(b,t))}})},b.mixin(b),b.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=s[t];b.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!==t&&"splice"!==t||0!==n.length||delete n[0],V(this,n)}}),b.each(["concat","join","slice"],function(t){var e=s[t];b.prototype[t]=function(){return V(this,e.apply(this._wrapped,arguments))}}),b.prototype.value=function(){return this._wrapped},b.prototype.valueOf=b.prototype.toJSON=b.prototype.value,b.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return b})}).call(this)},{}],4:[function(t,e){(function(n){"use strict";function r(t){var e=t.sdkVersion;return e||(e=n.braintree&&n.braintree.VERSION?"braintree/web/"+n.braintree.VERSION:""),e}function i(t){var e,i;this.attrs={},t.hasOwnProperty("sharedCustomerIdentifier")&&(this.attrs.sharedCustomerIdentifier=t.sharedCustomerIdentifier),e=s(t.clientToken),this.driver=t.driver||u,this.analyticsUrl=e.analytics?e.analytics.url:void 0,this.clientApiUrl=e.clientApiUrl,this.customerId=t.customerId,this.challenges=e.challenges,this.integration=t.integration||"",this.sdkVersion=r(e),this.merchantAppId=e.merchantAppId||n.location.host,i=a.create(this,{container:t.container,clientToken:e}),this.verify3DS=o.bind(i.verify,i),this.attrs.authorizationFingerprint=e.authorizationFingerprint,this.attrs.sharedCustomerIdentifierType=t.sharedCustomerIdentifierType,e.merchantAccountId&&(this.attrs.merchantAccountId=e.merchantAccountId),this.requestTimeout=t.hasOwnProperty("timeout")?t.timeout:6e4}var o=t("braintree-utilities"),a=t("braintree-3ds"),s=t("./parse-client-token"),u=t("./request-driver"),l=t("./util"),c=t("./sepa-mandate"),p=t("./europe-bank-account"),h=t("./credit-card"),d=t("./coinbase-account"),f=t("./paypal-account"),m=t("./normalize-api-fields").normalizeCreditCardFields;i.prototype.getCreditCards=function(t){this.driver.get(l.joinUrlFragments([this.clientApiUrl,"v1","payment_methods"]),this.attrs,function(t){var e=0,n=t.paymentMethods.length,r=[];for(e;n>e;e++)r.push(new h(t.paymentMethods[e]));return r},t,this.requestTimeout)},i.prototype.tokenizeCoinbase=function(t,e){t.options={validate:!1},this.addCoinbase(t,function(t,n){t?e(t,null):n&&n.nonce?e(t,n):e("Unable to tokenize coinbase account.",null)})},i.prototype.tokenizePayPalAccount=function(t,e){t.options={validate:!1},this.addPayPalAccount(t,function(t,n){t?e(t,null):n&&n.nonce?e(null,n):e("Unable to tokenize paypal account.",null)})},i.prototype.tokenizeCard=function(t,e){t.options={validate:!1},this.addCreditCard(t,function(t,n){n&&n.nonce?e(t,n.nonce,{type:n.type,details:n.details}):e("Unable to tokenize card.",null)})},i.prototype.lookup3DS=function(t,e){var n=l.joinUrlFragments([this.clientApiUrl,"v1/payment_methods",t.nonce,"three_d_secure/lookup"]),r=l.mergeOptions(this.attrs,{amount:t.amount});this.driver.post(n,r,function(t){return t},e,this.requestTimeout)},i.prototype.createSEPAMandate=function(t,e){var n=l.mergeOptions(this.attrs,{sepaMandate:t});this.driver.post(l.joinUrlFragments([this.clientApiUrl,"v1","sepa_mandates.json"]),n,function(t){return{sepaMandate:new c(t.europeBankAccounts[0].sepaMandates[0]),sepaBankAccount:new p(t.europeBankAccounts[0])}},e,this.requestTimeout)},i.prototype.addCoinbase=function(t,e){var n;delete t.share,n=l.mergeOptions(this.attrs,{coinbaseAccount:t,_meta:{integration:this.integration||"custom",source:"coinbase"}}),this.driver.post(l.joinUrlFragments([this.clientApiUrl,"v1","payment_methods/coinbase_accounts"]),n,function(t){return new d(t.coinbaseAccounts[0])},e,this.requestTimeout)},i.prototype.addPayPalAccount=function(t,e){var n;delete t.share,n=l.mergeOptions(this.attrs,{paypalAccount:t,_meta:{integration:this.integration||"paypal",source:"paypal"}}),this.driver.post(l.joinUrlFragments([this.clientApiUrl,"v1","payment_methods","paypal_accounts"]),n,function(t){return new f(t.paypalAccounts[0])},e,this.requestTimeout)},i.prototype.addCreditCard=function(t,e){var n,r,i=t.share;delete t.share,r=m(t),n=l.mergeOptions(this.attrs,{share:i,creditCard:r,_meta:{integration:this.integration||"custom",source:"form"}}),this.driver.post(l.joinUrlFragments([this.clientApiUrl,"v1","payment_methods/credit_cards"]),n,function(t){return new h(t.creditCards[0])},e,this.requestTimeout)},i.prototype.unlockCreditCard=function(t,e,n){var r=l.mergeOptions(this.attrs,{challengeResponses:e});this.driver.put(l.joinUrlFragments([this.clientApiUrl,"v1","payment_methods/",t.nonce]),r,function(t){return new h(t.paymentMethods[0])},n,this.requestTimeout)},i.prototype.sendAnalyticsEvents=function(t,e){var r,i,o=this.analyticsUrl,a=[];if(t=l.isArray(t)?t:[t],!o)return void(e&&e.apply(null,[null,{}]));for(i in t)t.hasOwnProperty(i)&&a.push({kind:t[i]});r=l.mergeOptions(this.attrs,{braintree_library_version:this.sdkVersion,analytics:a,_meta:{merchantAppId:this.merchantAppId,platform:"web",platformVersion:n.navigator.userAgent,integrationType:this.integration,sdkVersion:this.sdkVersion}}),this.driver.post(o,r,function(t){return t},e,this.requestTimeout)},e.exports=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./coinbase-account":5,"./credit-card":6,"./europe-bank-account":7,"./normalize-api-fields":11,"./parse-client-token":12,"./paypal-account":13,"./request-driver":15,"./sepa-mandate":16,"./util":17,"braintree-3ds":26,"braintree-utilities":35}],5:[function(t,e){"use strict";function n(t){var e,n;for(e=0;e<r.length;e++)n=r[e],this[n]=t[n]}var r=["nonce","type","description","details"];e.exports=n},{}],6:[function(t,e){"use strict";function n(t){var e,n;for(e=0;e<r.length;e++)n=r[e],this[n]=t[n]}var r=["billingAddress","branding","createdAt","createdAtMerchant","createdAtMerchantName","details","isLocked","lastUsedAt","lastUsedAtMerchant","lastUsedAtMerchantName","lastUsedByCurrentMerchant","nonce","securityQuestions","type"];e.exports=n},{}],7:[function(t,e){"use strict";function n(t){var e,n=["bic","maskedIBAN","nonce","accountHolderName"],r=0;for(r=0;r<n.length;r++)e=n[r],this[e]=t[e]}e.exports=n},{}],8:[function(t,e){"use strict";function n(t,e,n){var a=r(t),s={authorizationFingerprint:a.authorizationFingerprint};i.post(a.configUrl,s,function(t){return o.mergeOptions(a,t)},e,n)}var r=t("./parse-client-token"),i=t("./request-driver"),o=t("./util");e.exports=n},{"./parse-client-token":12,"./request-driver":15,"./util":17}],9:[function(t,e){"use strict";function n(t,e){return t.status>=400?[t,null]:[null,e(t)]}function r(){}function i(t,e,i,o,a,s){var u;a=a||r,null==s&&(s=6e4),u=o(t,e,function(t,e){l[e]&&(clearTimeout(l[e]),a.apply(null,n(t,function(t){return i(t)})))}),"number"==typeof s?l[u]=setTimeout(function(){l[u]=null,a.apply(null,[{errors:"Unknown error"},null])},s):a.apply(null,[{errors:"Timeout must be a number"},null])}function o(t,e,n,r,o){e._method="POST",i(t,e,n,u.get,r,o)}function a(t,e,n,r,o){i(t,e,n,u.get,r,o)}function s(t,e,n,r,o){e._method="PUT",i(t,e,n,u.get,r,o)}var u=t("./jsonp"),l=[];e.exports={get:a,post:o,put:s}},{"./jsonp":10}],10:[function(t,e){(function(n){"use strict";function r(t,e){var n=document.createElement("script"),r=!1;n.src=t,n.async=!0;var i=e||c.error;"function"==typeof i&&(n.onerror=function(e){i({url:t,event:e})}),n.onload=n.onreadystatechange=function(){r||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(r=!0,n.onload=n.onreadystatechange=null,n&&n.parentNode&&n.parentNode.removeChild(n))},s||(s=document.getElementsByTagName("head")[0]),s.appendChild(n)}function i(t,e){var n,r,o,a=[];for(var o in t)t.hasOwnProperty(o)&&(r=t[o],n=e?u.isArray(t)?e+"[]":e+"["+o+"]":o,a.push("object"==typeof r?i(r,n):encodeURIComponent(n)+"="+encodeURIComponent(r)));return a.join("&")}function o(t,e,n,o){var a=-1===(t||"").indexOf("?")?"?":"&";o=o||c.callbackName||"callback";var s=o+"_json"+u.generateUUID();return a+=i(e),l[s]=function(t){n(t,s);try{delete l[s]}catch(e){}l[s]=null},r(t+a+"&"+o+"="+s),s}function a(t){c=t}var s,u=t("./util"),l=n,c={};e.exports={get:o,init:a,stringify:i}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./util":17}],11:[function(t,e){"use strict";function n(t){var e,n={billingAddress:t.billingAddress||{}};for(e in t)if(t.hasOwnProperty(e))switch(e.replace(/_/,"").toLowerCase()){case"postalcode":case"countryname":case"countrycodenumeric":case"countrycodealpha2":case"countrycodealpha3":case"region":case"extendedaddress":case"locality":case"firstname":case"lastname":case"company":case"streetaddress":n.billingAddress[e]=t[e];break;default:n[e]=t[e]}return n}e.exports={normalizeCreditCardFields:n}},{}],12:[function(t,e){"use strict";function n(t){var e;if(!t)throw new Error("Braintree API Client Misconfigured: clientToken required.");if("object"==typeof t&&null!==t)e=t;else{try{t=window.atob(t)}catch(n){}try{e=JSON.parse(t)}catch(i){throw new Error("Braintree API Client Misconfigured: clientToken is invalid.")}}if(!e.hasOwnProperty("clientApiUrl")||!r.isWhitelistedDomain(e.clientApiUrl))throw new Error("Braintree API Client Misconfigured: clientToken is invalid.");return e}var r=t("braintree-utilities");t("./polyfill"),e.exports=n},{"./polyfill":14,"braintree-utilities":35}],13:[function(t,e){"use strict";function n(t){var e,n;for(e=0;e<r.length;e++)n=r[e],this[n]=t[n]}var r=["nonce","type","description","details"];e.exports=n},{}],14:[function(){(function(t){"use strict";t.atob=t.atob||function(t){var e=new RegExp("^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=|[A-Za-z0-9+/]{4})([=]{1,2})?$"),n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",r="";if(!e.test(t))throw new Error("Braintree API Client Misconfigured: clientToken is invalid.");var i=0;do{var o=n.indexOf(t.charAt(i++)),a=n.indexOf(t.charAt(i++)),s=n.indexOf(t.charAt(i++)),u=n.indexOf(t.charAt(i++)),l=(63&o)<<2|a>>4&3,c=(15&a)<<4|s>>2&15,p=(3&s)<<6|63&u;r+=String.fromCharCode(l)+(c?String.fromCharCode(c):"")+(p?String.fromCharCode(p):"")}while(i<t.length);return r}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],15:[function(t,e){"use strict";var n=t("./jsonp-driver");e.exports=n},{"./jsonp-driver":9}],16:[function(t,e){"use strict";function n(t){var e,n=0,r=["accountHolderName","bic","longFormURL","mandateReferenceNumber","maskedIBAN","shortForm"];for(n=0;n<r.length;n++)e=r[n],this[e]=t[e]}e.exports=n},{}],17:[function(t,e){"use strict";function n(t){var e,n,r=[];for(n=0;n<t.length;n++)e=t[n],"/"===e.charAt(e.length-1)&&(e=e.substring(0,e.length-1)),"/"===e.charAt(0)&&(e=e.substring(1)),r.push(e);return r.join("/")}function r(t){return t&&"object"==typeof t&&"number"==typeof t.length&&"[object Array]"===Object.prototype.toString.call(t)||!1}function i(){return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=Math.floor(16*Math.random()),n="x"===t?e:3&e|8;return n.toString(16)})}function o(t,e){var n,r={};for(n in t)t.hasOwnProperty(n)&&(r[n]=t[n]);for(n in e)e.hasOwnProperty(n)&&(r[n]=e[n]);return r}e.exports={joinUrlFragments:n,isArray:r,generateUUID:i,mergeOptions:o}},{}],18:[function(t,e){"use strict";function n(t){return new r(t)}var r=t("./lib/client"),i=t("./lib/jsonp"),o=t("./lib/jsonp-driver"),a=t("./lib/util"),s=t("./lib/parse-client-token"),u=t("./lib/get-configuration");e.exports={Client:r,configure:n,util:a,JSONP:i,JSONPDriver:o,parseClientToken:s,getConfiguration:u}},{"./lib/client":4,"./lib/get-configuration":8,"./lib/jsonp":10,"./lib/jsonp-driver":9,"./lib/parse-client-token":12,"./lib/util":17}],19:[function(t,e){"use strict";function n(t,e){if(e=e||"["+t+"] is not a valid DOM Element",t&&t.nodeType&&1===t.nodeType)return t;if(t&&window.jQuery&&(t instanceof jQuery||"jquery"in Object(t))&&0!==t.length)return t[0];if("string"==typeof t&&document.getElementById(t))return document.getElementById(t);throw new Error(e)}e.exports={normalizeElement:n}},{}],20:[function(t,e){"use strict";function n(t,e,n,r){t.addEventListener?t.addEventListener(e,n,r):t.attachEvent&&t.attachEvent("on"+e,n)}function r(t,e,n,r){t.removeEventListener?t.removeEventListener(e,n,r):t.detachEvent&&t.detachEvent("on"+e,n)}e.exports={addEventListener:n,removeEventListener:r}},{}],21:[function(t,e){"use strict";function n(t){return"[object Function]"===i.call(t)}function r(t,e){return function(){t.apply(e,arguments)}}var i=Object.prototype.toString;e.exports={bind:r,isFunction:n}},{}],22:[function(t,e){"use strict";function n(){return"https:"===window.location.protocol}function r(t){switch(t){case null:case void 0:return"";case!0:return"1";case!1:return"0";default:return encodeURIComponent(t)}}function i(t,e){var n,o,a=[];for(o in t)if(t.hasOwnProperty(o)){var s=t[o];n=e?e+"["+o+"]":o,"object"==typeof s?a.push(i(s,n)):void 0!==s&&null!==s&&a.push(r(n)+"="+r(s))}return a.join("&")}function o(t){for(var e={},n=t.split("&"),r=0;r<n.length;r++){var i=n[r].split("="),o=i[0],a=decodeURIComponent(i[1]);e[o]=a}return e}function a(t){var e=t.split("?");return 2!==e.length?{}:o(e[1])}e.exports={isBrowserHttps:n,makeQueryString:i,decodeQueryString:o,getParams:a}},{}],23:[function(t,e){var n=t("./lib/dom"),r=t("./lib/url"),i=t("./lib/fn"),o=t("./lib/events");e.exports={normalizeElement:n.normalizeElement,isBrowserHttps:r.isBrowserHttps,makeQueryString:r.makeQueryString,decodeQueryString:r.decodeQueryString,getParams:r.getParams,removeEventListener:o.removeEventListener,addEventListener:o.addEventListener,bind:i.bind,isFunction:i.isFunction}},{"./lib/dom":19,"./lib/events":20,"./lib/fn":21,"./lib/url":22}],24:[function(t,e){"use strict";function n(t,e){var n=window.getComputedStyle?getComputedStyle(t):t.currentStyle;return n[e]}function r(){return{html:{height:o.style.height||"",overflow:n(o,"overflow"),position:n(o,"position")},body:{height:a.style.height||"",overflow:n(a,"overflow")}}}function i(t,e){this.assetsUrl=t,this.container=e||document.body,this.iframe=null,o=document.documentElement,a=document.body,this.merchantPageDefaultStyles=r()}var o,a,s=t("braintree-utilities"),u=t("../shared/receiver"),l="1.2.0";i.prototype.get=function(t,e){var n=this,r=this.constructAuthorizationURL(t);this.container&&s.isFunction(this.container)?this.container(r+"&no_style=1"):this.insertIframe(r),new u(function(t){s.isFunction(n.container)||n.removeIframe(),e(t)})},i.prototype.removeIframe=function(){this.container&&this.container.nodeType&&1===this.container.nodeType?this.container.removeChild(this.iframe):this.container&&window.jQuery&&this.container instanceof jQuery?$(this.iframe,this.container).remove():"string"==typeof this.container&&document.getElementById(this.container).removeChild(this.iframe),this.unlockMerchantWindowSize()},i.prototype.insertIframe=function(t){var e=document.createElement("iframe");if(e.src=t,this.applyStyles(e),this.lockMerchantWindowSize(),this.container&&this.container.nodeType&&1===this.container.nodeType)this.container.appendChild(e);else if(this.container&&window.jQuery&&this.container instanceof jQuery&&0!==this.container.length)this.container.append(e);else{if("string"!=typeof this.container||!document.getElementById(this.container))throw new Error("Unable to find valid container for iframe.");document.getElementById(this.container).appendChild(e)}this.iframe=e},i.prototype.applyStyles=function(t){t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.height="100%",t.style.width="100%",t.setAttribute("frameborder","0"),t.setAttribute("allowTransparency","true"),t.style.border="0",t.style.zIndex="99999"},i.prototype.lockMerchantWindowSize=function(){o.style.overflow="hidden",a.style.overflow="hidden",a.style.height="100%"},i.prototype.unlockMerchantWindowSize=function(){var t=this.merchantPageDefaultStyles;a.style.height=t.body.height,a.style.overflow=t.body.overflow,o.style.overflow=t.html.overflow},i.prototype.constructAuthorizationURL=function(t){var e,n=window.location.href;return n.indexOf("#")>-1&&(n=n.split("#")[0]),e=s.makeQueryString({acsUrl:t.acsUrl,pareq:t.pareq,termUrl:t.termUrl+"&three_d_secure_version="+l,md:t.md,parentUrl:n}),this.assetsUrl+"/3ds/"+l+"/html/style_frame?"+e},e.exports=i},{"../shared/receiver":28,"braintree-utilities":23}],25:[function(t,e){"use strict";function n(){}function r(t,e){e=e||{},this.clientToken=e.clientToken,this.container=e.container,this.api=t,this.nonce=null,this._boundHandleUserClose=i.bind(this._handleUserClose,this)}var i=t("braintree-utilities"),o=t("./authorization_service");r.prototype.verify=function(t,e){if(!i.isFunction(e))throw this.api.sendAnalyticsEvents("3ds.web.no_callback"),new Error("No suitable callback argument was given");i.isFunction(t.onUserClose)&&(this._onUserClose=t.onUserClose);var n={nonce:"",amount:t.amount},r=t.creditCard;if("string"==typeof r)n.nonce=r,this.api.sendAnalyticsEvents("3ds.web.verify.nonce"),this.startVerification(n,e);else{var o=this,a=function(t,r){return t?e(t):(n.nonce=r,void o.startVerification(n,e))};this.api.sendAnalyticsEvents("3ds.web.verify.credit_card"),this.api.tokenizeCard(r,a)}},r.prototype.startVerification=function(t,e){this.api.lookup3DS(t,i.bind(this.handleLookupResponse(e),this))},r.prototype.handleLookupResponse=function(t){var e=this;return function(n,r){var a;n?t(n.error):r.lookup&&r.lookup.acsUrl&&r.lookup.acsUrl.length>0?(e.nonce=r.paymentMethod.nonce,a=new o(this.clientToken.assetsUrl,this.container),a.get(r.lookup,i.bind(this.handleAuthenticationResponse(t),this)),this._detachListeners(),this._attachListeners()):(e.nonce=r.paymentMethod.nonce,t(null,{nonce:e.nonce,verificationDetails:r.threeDSecureInfo}))}},r.prototype.handleAuthenticationResponse=function(t){return function(e){var n,r=i.decodeQueryString(e);r.user_closed||(n=JSON.parse(r.auth_response),n.success?t(null,{nonce:n.paymentMethod.nonce,verificationDetails:n.threeDSecureInfo}):n.threeDSecureInfo&&n.threeDSecureInfo.liabilityShiftPossible?t(null,{nonce:this.nonce,verificationDetails:n.threeDSecureInfo}):t(n.error))}},r.prototype._attachListeners=function(){i.addEventListener(window,"message",this._boundHandleUserClose)},r.prototype._detachListeners=function(){i.removeEventListener(window,"message",this._boundHandleUserClose)},r.prototype._handleUserClose=function(t){"user_closed=true"===t.data&&this._onUserClose()},r.prototype._onUserClose=n,e.exports=r},{"./authorization_service":24,"braintree-utilities":23}],26:[function(t,e){"use strict";var n=t("./client");t("./vendor/json2"),e.exports={create:function(t,e){var r=new n(t,e);return r}}},{"./client":25,"./vendor/json2":27}],27:[function(require,module,exports){"object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(t){return 10>t?"0"+t:t}function quote(t){return escapable.lastIndex=0,escapable.test(t)?'"'+t.replace(escapable,function(t){var e=meta[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function str(t,e){var n,r,i,o,a,s=gap,u=e[t];switch(u&&"object"==typeof u&&"function"==typeof u.toJSON&&(u=u.toJSON(t)),"function"==typeof rep&&(u=rep.call(e,t,u)),typeof u){case"string":return quote(u);case"number":return isFinite(u)?String(u):"null";case"boolean":case"null":return String(u);case"object":if(!u)return"null";if(gap+=indent,a=[],"[object Array]"===Object.prototype.toString.apply(u)){for(o=u.length,n=0;o>n;n+=1)a[n]=str(n,u)||"null";return i=0===a.length?"[]":gap?"[\n"+gap+a.join(",\n"+gap)+"\n"+s+"]":"["+a.join(",")+"]",gap=s,i}if(rep&&"object"==typeof rep)for(o=rep.length,n=0;o>n;n+=1)"string"==typeof rep[n]&&(r=rep[n],i=str(r,u),i&&a.push(quote(r)+(gap?": ":":")+i));else for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(i=str(r,u),i&&a.push(quote(r)+(gap?": ":":")+i));return i=0===a.length?"{}":gap?"{\n"+gap+a.join(",\n"+gap)+"\n"+s+"}":"{"+a.join(",")+"}",gap=s,i}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(t,e,n){var r;if(gap="",indent="","number"==typeof n)for(r=0;n>r;r+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=e,e&&"function"!=typeof e&&("object"!=typeof e||"number"!=typeof e.length))throw new Error("JSON.stringify");return str("",{"":t})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(t,e){var n,r,i=t[e];if(i&&"object"==typeof i)for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r=walk(i,n),void 0!==r?i[n]=r:delete i[n]);return reviver.call(t,e,i)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}()},{}],28:[function(t,e){"use strict";function n(t){this.postMessageReceiver(t),this.hashChangeReceiver(t)}var r=t("braintree-utilities");n.prototype.postMessageReceiver=function(t){var e=this;this.wrappedCallback=function(n){var r=n.data;(/^(auth_response=)/.test(r)||"user_closed=true"===r)&&(t(r),e.stopListening())},r.addEventListener(window,"message",this.wrappedCallback)},n.prototype.hashChangeReceiver=function(t){var e,n=window.location.hash,r=this;this.poll=setInterval(function(){e=window.location.hash,e.length>0&&e!==n&&(r.stopListening(),e=e.substring(1,e.length),t(e),window.location.hash=n.length>0?n:"")},10)},n.prototype.stopListening=function(){clearTimeout(this.poll),r.removeEventListener(window,"message",this.wrappedCallback)},e.exports=n},{"braintree-utilities":23}],29:[function(t,e){"use strict";var n,r=Array.prototype.indexOf;n=r?function(t,e){return t.indexOf(e)}:function(t,e){for(var n=0,r=t.length;r>n;n++)if(t[n]===e)return n;return-1},e.exports={indexOf:n}},{}],30:[function(t,e,n){arguments[4][19][0].apply(n,arguments)},{dup:19}],31:[function(t,e,n){arguments[4][20][0].apply(n,arguments)},{dup:20}],32:[function(t,e,n){arguments[4][21][0].apply(n,arguments)},{dup:21}],33:[function(t,e){"use strict";function n(t){var e,n,r,i,o=[{min:0,max:180,chars:7},{min:181,max:620,chars:14},{min:621,max:960,chars:22}];for(i=o.length,t=t||window.innerWidth,n=0;i>n;n++)r=o[n],t>=r.min&&t<=r.max&&(e=r.chars);return e||60}function r(t,e){var n,r;return-1===t.indexOf("@")?t:(t=t.split("@"),n=t[0],r=t[1],n.length>e&&(n=n.slice(0,e)+"..."),r.length>e&&(r="..."+r.slice(-e)),n+"@"+r)}e.exports={truncateEmail:r,getMaxCharLength:n}},{}],34:[function(t,e){"use strict";function n(){return"https:"===window.location.protocol}function r(t){switch(t){case null:case void 0:return"";case!0:return"1";case!1:return"0";default:return encodeURIComponent(t)}}function i(t,e){var n,o,a=[];for(o in t)if(t.hasOwnProperty(o)){var s=t[o];n=e?e+"["+o+"]":o,"object"==typeof s?a.push(i(s,n)):void 0!==s&&null!==s&&a.push(r(n)+"="+r(s))}return a.join("&")}function o(t){for(var e={},n=t.split("&"),r=0;r<n.length;r++){var i=n[r].split("="),o=i[0],a=decodeURIComponent(i[1]);e[o]=a}return e}function a(t){var e=t.split("?");return 2!==e.length?{}:o(e[1])}function s(t){if(t=t.toLowerCase(),!/^http/.test(t))return!1;l.href=t;var e=l.hostname.split("."),n=e.slice(-2).join(".");return-1===u.indexOf(c,n)?!1:!0}var u=t("./array"),l=document.createElement("a"),c=["paypal.com","braintreepayments.com","braintreegateway.com","localhost"];e.exports={isBrowserHttps:n,makeQueryString:i,decodeQueryString:o,getParams:a,isWhitelistedDomain:s}},{"./array":29}],35:[function(t,e){var n=t("./lib/dom"),r=t("./lib/url"),i=t("./lib/fn"),o=t("./lib/events"),a=t("./lib/string"),s=t("./lib/array");e.exports={string:a,array:s,normalizeElement:n.normalizeElement,isBrowserHttps:r.isBrowserHttps,makeQueryString:r.makeQueryString,decodeQueryString:r.decodeQueryString,getParams:r.getParams,isWhitelistedDomain:r.isWhitelistedDomain,removeEventListener:o.removeEventListener,addEventListener:o.addEventListener,bind:i.bind,isFunction:i.isFunction}},{"./lib/array":29,"./lib/dom":30,"./lib/events":31,"./lib/fn":32,"./lib/string":33,"./lib/url":34}],36:[function(t,e){"use strict";var n=t("framebus");n.events=t("./lib/events"),e.exports=n},{"./lib/events":37,framebus:38}],37:[function(t,e){"use strict";for(var n=["PAYMENT_METHOD_REQUEST","PAYMENT_METHOD_RECEIVED","PAYMENT_METHOD_GENERATED","PAYMENT_METHOD_NOT_GENERATED","PAYMENT_METHOD_CANCELLED","PAYMENT_METHOD_ERROR","CONFIGURATION_REQUEST","ROOT_METADATA_REQUEST","ERROR","WARNING","UI_POPUP_DID_OPEN","UI_POPUP_DID_CLOSE","UI_POPUP_FORCE_CLOSE","ASYNC_DEPENDENCY_INITIALIZING","ASYNC_DEPENDENCY_READY"],r={},i=0;i<n.length;i++){var o=n[i];r[o]=o}e.exports=r},{}],38:[function(t,e,n){"use strict";!function(t,r){"object"==typeof n&&"undefined"!=typeof e?e.exports=r():"function"==typeof define&&define.amd?define([],r):t.framebus=r()}(this,function(){function t(t,e,n){var i;return n=n||"*","string"!=typeof t?!1:"string"!=typeof n?!1:(i=r(t,e,n),i===!1?!1:(l(h.top,i,n),!0))}function e(t,e,n){return n=n||"*",p(t,e,n)?!1:(d[n]=d[n]||{},d[n][t]=d[n][t]||[],d[n][t].push(e),!0)}function n(t,e,n){var r,i;if(n=n||"*",p(t,e,n))return!1;if(i=d[n]&&d[n][t],!i)return!1;for(r=0;r<i.length;r++)if(i[r]===e)return i.splice(r,1),!0;return!1}function r(t,e,n){var r=!1,i={event:t};"function"==typeof e?i.reply=c(e,n):i.data=e;try{r=JSON.stringify(i)}catch(o){throw new Error("Could not stringify event: "+o.message)}return r}function i(t){var e;try{e=JSON.parse(t.data)}catch(n){return!1}return null==e.event?!1:(null!=e.reply&&(e.data=function(n){var i=r(e.reply,n,t.origin);return i===!1?!1:void t.source.postMessage(i,t.origin)}),e)}function o(t){h||(h=t,h.addEventListener?h.addEventListener("message",s,!1):h.attachEvent?h.attachEvent("onmessage",s):null===h.onmessage?h.onmessage=s:h=null)}function a(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0,n="x"===t?e:3&e|8;return n.toString(16)})}function s(t){var e;"string"==typeof t.data&&(e=i(t),e&&(u("*",e.event,e.data,t.origin),u(t.origin,e.event,e.data,t.origin)))}function u(t,e,n,r){var i;if(d[t]&&d[t][e])for(i=0;i<d[t][e].length;i++)d[t][e][i](n,r)}function l(t,e,n){var r;for(t.postMessage(e,n),r=0;r<t.frames.length;r++)l(t.frames[r],e,n)}function c(t,r){function i(e,a){t(e,a),n(o,i,r)}var o=a();return e(o,i,r),o}function p(t,e,n){return"string"!=typeof t?!0:"function"!=typeof e?!0:"string"!=typeof n?!0:!1}var h,d={};return o(window),{publish:t,pub:t,trigger:t,emit:t,subscribe:e,sub:e,on:e,unsubscribe:n,unsub:n,off:n}})},{}],39:[function(t,e){"use strict";function n(t,e){s.emit(s.events.ERROR,{type:e,message:t})}function r(t){t=t||{};var e=t.coinbase;if(null==t.apiClient)n("settings.apiClient is required for coinbase",u);else if(t.configuration.coinbaseEnabled)if(e&&(e.container||e.button))if(e.container&&e.button)n("options.coinbase.container and options.coinbase.button are mutually exclusive",u);else{if(a.isSupportedBrowser())return!0;n("Coinbase is not supported by your browser. Please consider upgrading","UNSUPPORTED_BROWSER")}else n("Either options.coinbase.container or options.coinbase.button is required for Coinbase integrations",u);
else n("Coinbase is not enabled for your merchant account",u);return!1}function i(t){return r(t)?new o(t):void 0}var o=t("./lib/coinbase"),a=t("./lib/detector"),s=t("braintree-bus"),u="CONFIGURATION";e.exports={create:i}},{"./lib/coinbase":42,"./lib/detector":44,"braintree-bus":50}],40:[function(t,e){(function(t){"use strict";function n(e){return e=e||t.navigator.userAgent,/AppleWebKit\//.test(e)&&/Mobile\//.test(e)?e.replace(/.* OS ([0-9_]+) like Mac OS X.*/,"$1").replace(/_/g,"."):null}function r(e){e=e||t.navigator.userAgent;var n=null,r=/MSIE.(\d+)/.exec(e);return/Trident/.test(e)&&(n=11),r&&(n=parseInt(r[1],10)),n}function i(e){return e=e||t.navigator.userAgent,/Android/.test(e)?e.replace(/^.* Android ([0-9\.]+).*$/,"$1"):null}e.exports={ieVersion:r,iOSSafariVersion:n,androidVersion:i}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],41:[function(t,e){"use strict";function n(t,e,n){return t?(r.emit(r.events.ERROR,t.error),void n._sendAnalyticsEvent("generate.nonce.failed")):(r.emit(r.events.PAYMENT_METHOD_GENERATED,e),void n._sendAnalyticsEvent("generate.nonce.succeeded"))}var r=t("braintree-bus");e.exports={tokenize:n}},{"braintree-bus":50}],42:[function(t,e){(function(n){"use strict";function r(t){return{clientId:t.configuration.coinbase.clientId,redirectUrl:t.configuration.coinbase.redirectUrl,scopes:t.configuration.coinbase.scopes||l.SCOPES,meta:{authorizations_merchant_account:t.configuration.coinbase.merchantAccount||""}}}function i(t){var e;this.buttonId=t.coinbase.button||l.BUTTON_ID,this.apiClient=t.apiClient,this.assetsUrl=t.configuration.assetsUrl,this._onOAuthSuccess=o.bind(this._onOAuthSuccess,this),this._handleButtonClick=o.bind(this._handleButtonClick,this),this.popupParams=r(t),this.redirectDoneInterval=null,t.coinbase.container?(e=o.normalizeElement(t.coinbase.container),this._insertFrame(e)):(n.braintreeCoinbasePopupCallback=this._onOAuthSuccess,e=document.body,o.addEventListener(e,"click",this._handleButtonClick),this._sendAnalyticsEvent("initialized"))}var o=t("braintree-utilities"),a=t("./dom/composer"),s=t("./url-composer"),u=t("./callbacks"),l=t("./constants"),c=t("./detector"),p=t("braintree-bus");i.prototype._sendAnalyticsEvent=function(t){var e=this.apiClient.integration+".web.coinbase.";this.apiClient.sendAnalyticsEvents(e+t)},i.prototype._insertFrame=function(t){var e=a.createFrame({src:this.assetsUrl+"/coinbase/"+l.VERSION+"/coinbase-frame.html"});p.emit(p.events.ASYNC_DEPENDENCY_INITIALIZING),t.appendChild(e)},i.prototype._onOAuthSuccess=function(t){return this._clearPollForRedirectDone(),t.code?(p.emit("coinbase:view:navigate","loading"),this._sendAnalyticsEvent("popup.authorized"),void this.apiClient.tokenizeCoinbase({code:t.code,query:s.getQueryString()},o.bind(function(t,e){u.tokenize.apply(null,[t,e,this])},this))):void this._sendAnalyticsEvent("popup.denied")},i.prototype._clearPollForRedirectDone=function(){this.redirectDoneInterval&&(clearInterval(this.redirectDoneInterval),this.redirectDoneInterval=null,p.emit(p.events.UI_POPUP_DID_CLOSE,{source:l.INTEGRATION_NAME}))},i.prototype._pollForRedirectDone=function(t){this.redirectDoneInterval=setInterval(o.bind(function(){var e;if(null==t||t.closed)return this._sendAnalyticsEvent("popup.aborted"),void this._clearPollForRedirectDone();try{if("about:blank"===t.location.href)throw new Error("Not finished loading");e=o.decodeQueryString(t.location.search.replace(/^\?/,"")).code}catch(n){return}this._onOAuthSuccess({code:e}),c.shouldCloseFromParent()&&t.close()},this),100)},i.prototype._openPopup=function(){var t;this._sendAnalyticsEvent("popup.started"),t=a.createPopup(s.compose(this.popupParams)),t.focus(),this._pollForRedirectDone(t),p.trigger(p.events.UI_POPUP_DID_OPEN,{source:l.INTEGRATION_NAME}),p.on(p.events.UI_POPUP_FORCE_CLOSE,function(e){e.target===l.INTEGRATION_NAME&&t.close()})},i.prototype._handleButtonClick=function(t){for(var e=t.target||t.srcElement;;){if(null==e)return;if(e===t.currentTarget)return;if(e.id===this.buttonId)break;e=e.parentNode}t&&t.preventDefault?t.preventDefault():t.returnValue=!1,this._openPopup()},e.exports=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./callbacks":41,"./constants":43,"./detector":44,"./dom/composer":46,"./url-composer":49,"braintree-bus":50,"braintree-utilities":59}],43:[function(t,e){"use strict";e.exports={BASE_URL:"https://coinbase.com",ORIGIN_URL:"https://www.coinbase.com",FRAME_NAME:"braintree-coinbase-frame",POPUP_NAME:"coinbase",BUTTON_ID:"bt-coinbase-button",SCOPES:"send",VERSION:"0.0.7",INTEGRATION_NAME:"Coinbase"}},{}],44:[function(t,e){"use strict";function n(){var t=a.ieVersion();return!t||t>8}function r(){var t=a.androidVersion();return null==t?!1:/^5/.test(t)}function i(){return!(r()||o())}function o(){var t=a.iOSSafariVersion();return null==t?!1:/^8\.0/.test(t)||/^8\.1$/.test(t)}var a=t("./browser");e.exports={isSupportedBrowser:n,shouldCloseFromParent:i,shouldDisplayIOSClose:o,shouldDisplayLollipopClose:r}},{"./browser":40}],45:[function(t,e){"use strict";function n(t){var e=document.createElement("button");return t=t||{},e.id=t.id||"coinbase-button",e.style.backgroundColor=t.backgroundColor||"#EEE",e.style.color=t.color||"#4597C3",e.style.border=t.border||"0",e.style.borderRadius=t.borderRadius||"6px",e.style.padding=t.padding||"12px",e.innerHTML=t.innerHTML||"coinbase",e}e.exports={create:n}},{}],46:[function(t,e){"use strict";var n=t("./popup"),r=t("./button"),i=t("./frame");e.exports={createButton:r.create,createPopup:n.create,createFrame:i.create}},{"./button":45,"./frame":47,"./popup":48}],47:[function(t,e){"use strict";function n(t){var e=document.createElement("iframe");return e.src=t.src,e.id=r.FRAME_NAME,e.name=r.FRAME_NAME,e.allowTransparency=!0,e.height="70px",e.width="100%",e.frameBorder=0,e.style.padding=0,e.style.margin=0,e.style.border=0,e.style.outline="none",e}var r=t("../constants");e.exports={create:n}},{"../constants":43}],48:[function(t,e){(function(n){"use strict";function r(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push([n,t[n]].join("="));return e.join(",")}function i(){var t=850,e=600;return r({width:t,height:e,left:(screen.width-t)/2,top:(screen.height-e)/4})}function o(t){return n.open(t,a.POPUP_NAME,i())}var a=t("../constants");e.exports={create:o}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../constants":43}],49:[function(t,e){"use strict";function n(){return"version="+i.VERSION}function r(t){var e=i.BASE_URL+"/oauth/authorize?response_type=code",r=t.redirectUrl+"?"+n();if(e+="&redirect_uri="+encodeURIComponent(r),e+="&client_id="+t.clientId,t.scopes&&(e+="&scope="+encodeURIComponent(t.scopes)),t.meta)for(var o in t.meta)t.meta.hasOwnProperty(o)&&(e+="&meta["+encodeURIComponent(o)+"]="+encodeURIComponent(t.meta[o]));return e}var i=t("./constants");e.exports={compose:r,getQueryString:n}},{"./constants":43}],50:[function(t,e,n){arguments[4][36][0].apply(n,arguments)},{"./lib/events":51,dup:36,framebus:52}],51:[function(t,e,n){arguments[4][37][0].apply(n,arguments)},{dup:37}],52:[function(t,e,n){arguments[4][38][0].apply(n,arguments)},{dup:38}],53:[function(t,e,n){arguments[4][29][0].apply(n,arguments)},{dup:29}],54:[function(t,e,n){arguments[4][19][0].apply(n,arguments)},{dup:19}],55:[function(t,e,n){arguments[4][20][0].apply(n,arguments)},{dup:20}],56:[function(t,e,n){arguments[4][21][0].apply(n,arguments)},{dup:21}],57:[function(t,e,n){arguments[4][33][0].apply(n,arguments)},{dup:33}],58:[function(t,e,n){arguments[4][34][0].apply(n,arguments)},{"./array":53,dup:34}],59:[function(t,e,n){arguments[4][35][0].apply(n,arguments)},{"./lib/array":53,"./lib/dom":54,"./lib/events":55,"./lib/fn":56,"./lib/string":57,"./lib/url":58,dup:35}],60:[function(t,e,n){arguments[4][4][0].apply(n,arguments)},{"./coinbase-account":61,"./credit-card":62,"./europe-bank-account":63,"./normalize-api-fields":67,"./parse-client-token":68,"./paypal-account":69,"./request-driver":71,"./sepa-mandate":72,"./util":73,"braintree-3ds":82,"braintree-utilities":91,dup:4}],61:[function(t,e,n){arguments[4][5][0].apply(n,arguments)},{dup:5}],62:[function(t,e,n){arguments[4][6][0].apply(n,arguments)},{dup:6}],63:[function(t,e,n){arguments[4][7][0].apply(n,arguments)},{dup:7}],64:[function(t,e,n){arguments[4][8][0].apply(n,arguments)},{"./parse-client-token":68,"./request-driver":71,"./util":73,dup:8}],65:[function(t,e,n){arguments[4][9][0].apply(n,arguments)},{"./jsonp":66,dup:9}],66:[function(t,e,n){arguments[4][10][0].apply(n,arguments)},{"./util":73,dup:10}],67:[function(t,e,n){arguments[4][11][0].apply(n,arguments)},{dup:11}],68:[function(t,e,n){arguments[4][12][0].apply(n,arguments)},{"./polyfill":70,"braintree-utilities":91,dup:12}],69:[function(t,e,n){arguments[4][13][0].apply(n,arguments)},{dup:13}],70:[function(t,e,n){arguments[4][14][0].apply(n,arguments)},{dup:14}],71:[function(t,e,n){arguments[4][15][0].apply(n,arguments)},{"./jsonp-driver":65,dup:15}],72:[function(t,e,n){arguments[4][16][0].apply(n,arguments)},{dup:16}],73:[function(t,e,n){arguments[4][17][0].apply(n,arguments)},{dup:17}],74:[function(t,e,n){arguments[4][18][0].apply(n,arguments)},{"./lib/client":60,"./lib/get-configuration":64,"./lib/jsonp":66,"./lib/jsonp-driver":65,"./lib/parse-client-token":68,"./lib/util":73,dup:18}],75:[function(t,e,n){arguments[4][19][0].apply(n,arguments)},{dup:19}],76:[function(t,e,n){arguments[4][20][0].apply(n,arguments)},{dup:20}],77:[function(t,e,n){arguments[4][21][0].apply(n,arguments)},{dup:21}],78:[function(t,e,n){arguments[4][22][0].apply(n,arguments)},{dup:22}],79:[function(t,e,n){arguments[4][23][0].apply(n,arguments)},{"./lib/dom":75,"./lib/events":76,"./lib/fn":77,"./lib/url":78,dup:23}],80:[function(t,e,n){arguments[4][24][0].apply(n,arguments)},{"../shared/receiver":84,"braintree-utilities":79,dup:24}],81:[function(t,e,n){arguments[4][25][0].apply(n,arguments)},{"./authorization_service":80,"braintree-utilities":79,dup:25}],82:[function(t,e,n){arguments[4][26][0].apply(n,arguments)},{"./client":81,"./vendor/json2":83,dup:26}],83:[function(t,e,n){arguments[4][27][0].apply(n,arguments)},{dup:27}],84:[function(t,e,n){arguments[4][28][0].apply(n,arguments)},{"braintree-utilities":79,dup:28}],85:[function(t,e,n){arguments[4][29][0].apply(n,arguments)},{dup:29}],86:[function(t,e,n){arguments[4][19][0].apply(n,arguments)},{dup:19}],87:[function(t,e,n){arguments[4][20][0].apply(n,arguments)},{dup:20}],88:[function(t,e,n){arguments[4][21][0].apply(n,arguments)},{dup:21}],89:[function(t,e,n){arguments[4][33][0].apply(n,arguments)},{dup:33}],90:[function(t,e,n){arguments[4][34][0].apply(n,arguments)},{"./array":85,dup:34}],91:[function(t,e,n){arguments[4][35][0].apply(n,arguments)},{"./lib/array":85,"./lib/dom":86,"./lib/events":87,"./lib/fn":88,"./lib/string":89,"./lib/url":90,dup:35}],92:[function(t,e){"use strict";function n(t){this.host=t||window,this.handlers=[],r.addEventListener(this.host,"message",r.bind(this.receive,this))}var r=t("braintree-utilities");n.prototype.receive=function(t){var e,r,i,o;try{i=JSON.parse(t.data)}catch(a){return}for(o=i.type,r=new n.Message(this,t.source,i.data),e=0;e<this.handlers.length;e++)this.handlers[e].type===o&&this.handlers[e].handler(r)},n.prototype.send=function(t,e,n){t.postMessage(JSON.stringify({type:e,data:n}),"*")},n.prototype.register=function(t,e){this.handlers.push({type:t,handler:e})},n.prototype.unregister=function(t,e){for(var n=this.handlers.length-1;n>=0;n--)if(this.handlers[n].type===t&&this.handlers[n].handler===e)return this.handlers.splice(n,1)},n.Message=function(t,e,n){this.bus=t,this.source=e,this.content=n},n.Message.prototype.reply=function(t,e){this.bus.send(this.source,t,e)},e.exports=n},{"braintree-utilities":102}],93:[function(t,e){"use strict";function n(t,e){this.bus=t,this.target=e,this.handlers=[],this.bus.register("publish",r.bind(this._handleMessage,this))}var r=t("braintree-utilities");n.prototype._handleMessage=function(t){var e,n=t.content,r=this.handlers[n.channel];if("undefined"!=typeof r)for(e=0;e<r.length;e++)r[e](n.data)},n.prototype.publish=function(t,e){this.bus.send(this.target,"publish",{channel:t,data:e})},n.prototype.subscribe=function(t,e){this.handlers[t]=this.handlers[t]||[],this.handlers[t].push(e)},n.prototype.unsubscribe=function(t,e){var n,r=this.handlers[t];if("undefined"!=typeof r)for(n=0;n<r.length;n++)r[n]===e&&r.splice(n,1)},e.exports=n},{"braintree-utilities":102}],94:[function(t,e){"use strict";function n(t){this.bus=t,this.frames=[],this.handlers=[]}n.prototype.subscribe=function(t,e){this.handlers[t]=this.handlers[t]||[],this.handlers[t].push(e)},n.prototype.registerFrame=function(t){this.frames.push(t)},n.prototype.unregisterFrame=function(t){for(var e=0;e<this.frames.length;e++)this.frames[e]===t&&this.frames.splice(e,1)},n.prototype.publish=function(t,e){var n,r=this.handlers[t];if("undefined"!=typeof r)for(n=0;n<r.length;n++)r[n](e);for(n=0;n<this.frames.length;n++)this.bus.send(this.frames[n],"publish",{channel:t,data:e})},n.prototype.unsubscribe=function(t,e){var n,r=this.handlers[t];if("undefined"!=typeof r)for(n=0;n<r.length;n++)r[n]===e&&r.splice(n,1)},e.exports=n},{}],95:[function(t,e){"use strict";function n(t,e){this.bus=t,this.target=e||window.parent,this.counter=0,this.callbacks={},this.bus.register("rpc_response",r.bind(this._handleResponse,this))}var r=t("braintree-utilities");n.prototype._handleResponse=function(t){var e=t.content,n=this.callbacks[e.id];"function"==typeof n&&(n.apply(null,e.response),delete this.callbacks[e.id])},n.prototype.invoke=function(t,e,n){var r=this.counter++;this.callbacks[r]=n,this.bus.send(this.target,"rpc_request",{id:r,method:t,args:e})},e.exports=n},{"braintree-utilities":102}],96:[function(t,e){"use strict";function n(t){this.bus=t,this.methods={},this.bus.register("rpc_request",r.bind(this._handleRequest,this))}var r=t("braintree-utilities");n.prototype._handleRequest=function(t){var e,n=t.content,r=n.args||[],i=this.methods[n.method];"function"==typeof i&&(e=function(){t.reply("rpc_response",{id:n.id,response:Array.prototype.slice.call(arguments)})},r.push(e),i.apply(null,r))},n.prototype.define=function(t,e){this.methods[t]=e},e.exports=n},{"braintree-utilities":102}],97:[function(t,e){var n=t("./lib/message-bus"),r=t("./lib/pubsub-client"),i=t("./lib/pubsub-server"),o=t("./lib/rpc-client"),a=t("./lib/rpc-server");e.exports={MessageBus:n,PubsubClient:r,PubsubServer:i,RPCClient:o,RPCServer:a}},{"./lib/message-bus":92,"./lib/pubsub-client":93,"./lib/pubsub-server":94,"./lib/rpc-client":95,"./lib/rpc-server":96}],98:[function(t,e){"use strict";function n(t,e){if(e=e||"["+t+"] is not a valid DOM Element",t&&t.nodeType&&1===t.nodeType)return t;if(t&&window.jQuery&&t instanceof jQuery&&0!==t.length)return t[0];if("string"==typeof t&&document.getElementById(t))return document.getElementById(t);throw new Error(e)}e.exports={normalizeElement:n}},{}],99:[function(t,e){"use strict";function n(t,e,n){t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent&&t.attachEvent("on"+e,n)}function r(t,e,n){t.removeEventListener?t.removeEventListener(e,n,!1):t.detachEvent&&t.detachEvent("on"+e,n)}e.exports={removeEventListener:r,addEventListener:n}},{}],100:[function(t,e){"use strict";function n(t){return"[object Function]"===Object.prototype.toString.call(t)}function r(t,e){return function(){t.apply(e,arguments)}}e.exports={bind:r,isFunction:n}},{}],101:[function(t,e,n){arguments[4][22][0].apply(n,arguments)},{dup:22}],102:[function(t,e,n){arguments[4][23][0].apply(n,arguments)},{"./lib/dom":98,"./lib/events":99,"./lib/fn":100,"./lib/url":101,dup:23}],103:[function(t,e,n){arguments[4][29][0].apply(n,arguments)},{dup:29}],104:[function(t,e,n){arguments[4][19][0].apply(n,arguments)},{dup:19}],105:[function(t,e,n){arguments[4][20][0].apply(n,arguments)},{dup:20}],106:[function(t,e,n){arguments[4][21][0].apply(n,arguments)},{dup:21}],107:[function(t,e,n){arguments[4][33][0].apply(n,arguments)},{dup:33}],108:[function(t,e,n){arguments[4][34][0].apply(n,arguments)},{"./array":103,dup:34}],109:[function(t,e,n){arguments[4][35][0].apply(n,arguments)},{"./lib/array":103,"./lib/dom":104,"./lib/events":105,"./lib/fn":106,"./lib/string":107,"./lib/url":108,dup:35}],110:[function(t,e){function n(t){var e=window.getComputedStyle?getComputedStyle(t):t.currentStyle;return{overflow:e.overflow||"",height:t.style.height||""}}function r(){return{html:{node:document.documentElement,styles:n(document.documentElement)},body:{node:document.body,styles:n(document.body)}}}function i(t,e){if(!t)throw new Error('Parameter "clientToken" cannot be null');e=e||{},this._clientToken=o.parseClientToken(t),this._clientOptions=e,this.container=e.container,this.merchantPageDefaultStyles=null,this.paymentMethodNonceInputField=e.paymentMethodNonceInputField,this.frame=null,this.popup=null,this.insertFrameFunction=e.insertFrame,this.onSuccess=e.onSuccess,this.onCancelled=e.onCancelled,this.onUnsupported=e.onUnsupported,this.loggedInView=null,this.loggedOutView=null,this.insertUI=!0}var o=t("braintree-api"),a=t("braintree-rpc"),s=t("braintree-utilities"),u=t("./logged-in-view"),l=t("./logged-out-view"),c=t("./overlay-view"),p=t("../shared/util/browser"),h=t("../shared/util/dom"),d=t("../shared/constants"),f=t("../shared/util/util"),m=t("../shared/get-locale");i.prototype.getViewerUrl=function(){var t=this._clientToken.paypal.assetsUrl;return t+"/pwpp/"+d.VERSION+"/html/braintree-frame.html"},i.prototype.getProxyUrl=function(){var t=this._clientToken.paypal.assetsUrl;return t+"/pwpp/"+d.VERSION+"/html/proxy-frame.html"},i.prototype.initialize=function(){if(!this._clientToken.paypalEnabled)return void("function"==typeof this.onUnsupported&&this.onUnsupported(new Error("PayPal is not enabled")));if(!this._isBrowserSecure())return void("function"==typeof this.onUnsupported&&this.onUnsupported(new Error("unsupported protocol detected")));if(this._isAriesCapable()){if(!this._isAriesSupportedCurrency())return void("function"==typeof this.onUnsupported&&this.onUnsupported(new Error("This PayPal integration does not support this currency")));if(!this._isAriesSupportedCountries())return void("function"==typeof this.onUnsupported&&this.onUnsupported(new Error("This PayPal integration does not support this locale")));if(!this._isValidAmount())return void("function"==typeof this.onUnsupported&&this.onUnsupported(new Error("Amount must be a number")))}return this._isMisconfiguredUnvettedMerchant()?void("function"==typeof this.onUnsupported&&this.onUnsupported(new Error("Unvetted merchant client token does not include a payee email"))):(this._overrideClientTokenProperties(),p.isProxyFrameRequired()&&this._insertProxyFrame(),this._setupDomElements(),this._setupPaymentMethodNonceInputField(),this._setupViews(),void this._createRpcServer())},i.prototype._isSupportedOption=function(t,e){for(var n=e.length,r=!1,i=0;n>i;i++)t.toLowerCase()===e[i].toLowerCase()&&(r=!0);return r},i.prototype._isAriesSupportedCurrency=function(){return this._isSupportedOption(this._clientOptions.currency,d.ARIES_SUPPORTED_CURRENCIES)},i.prototype._isAriesSupportedCountries=function(){return this._isSupportedOption(m(this._clientOptions.locale).split("_")[1],d.ARIES_SUPPORTED_COUNTRIES)},i.prototype._isValidAmount=function(){var t=parseFloat(this._clientOptions.amount);return"number"==typeof t&&!isNaN(t)&&t>=0},i.prototype._isMisconfiguredUnvettedMerchant=function(){return this._clientToken.paypal.unvettedMerchant&&(!this._isAriesCapable()||!this._clientToken.paypal.payeeEmail)},i.prototype._isBrowserSecure=function(){return s.isBrowserHttps()||p.isPopupSupported()||this._clientToken.paypal.allowHttp},i.prototype._overrideClientTokenProperties=function(){this._clientOptions.displayName&&(this._clientToken.paypal.displayName=this._clientOptions.displayName)},i.prototype._setupDomElements=function(){this.insertUI&&(this.container=s.normalizeElement(this.container))},i.prototype._setupPaymentMethodNonceInputField=function(){if(this.insertUI){var t=this.paymentMethodNonceInputField;s.isFunction(t)||(t=void 0!==t?s.normalizeElement(t):this._createPaymentMethodNonceInputField(),this.paymentMethodNonceInputField=t)}},i.prototype._setupViews=function(){var t=this._clientToken.paypal.assetsUrl;this.insertUI&&(this.loggedInView=new u({container:this.container,assetsUrl:t}),this.loggedOutView=new l({assetsUrl:t,container:this.container,isCheckout:this._isAriesCapable(),locale:this._clientOptions.locale,merchantId:"merchantId"}),s.addEventListener(this.loggedOutView.container,"click",s.bind(this._handleContainerClick,this)),s.addEventListener(this.loggedInView.logoutNode,"click",s.bind(this._handleLogout,this)))},i.prototype._createRpcServer=function(){var t=new a.MessageBus(window),e=new a.RPCServer(t,window);e.define("getClientToken",s.bind(this._handleGetClientToken,this)),e.define("getClientOptions",s.bind(this._handleGetClientOptions,this)),e.define("closePayPalModal",s.bind(this._handleCloseMessage,this)),e.define("receivePayPalData",s.bind(this._handleSuccessfulAuthentication,this))},i.prototype._createPaymentMethodNonceInputField=function(){var t=document.createElement("input");return t.name="payment_method_nonce",t.type="hidden",this.container.appendChild(t)},i.prototype._createFrame=function(){var t,e=document.createElement("iframe");return this._isAriesCapable()?(t=d.ARIES_FRAME_NAME,e.style.background="#FFFFFF"):t=d.FRAME_NAME,e.src=this.getViewerUrl(),e.id=t,e.name=t,e.allowTransparency=!0,e.height="100%",e.width="100%",e.frameBorder=0,e.style.position=p.isMobile()?"absolute":"fixed",e.style.top=0,e.style.left=0,e.style.bottom=0,e.style.zIndex=20001,e.style.padding=0,e.style.margin=0,e.style.border=0,e.style.outline="none",e},i.prototype._removeFrame=function(t){t=t||document.body,this.frame&&t.contains(this.frame)&&(t.removeChild(this.frame),this._unlockMerchantWindowSize())},i.prototype._insertFrame=function(){this.insertFrameFunction?this.insertFrameFunction(this.getViewerUrl()):(this.frame=this._createFrame(),document.body.appendChild(this.frame)),this._lockMerchantWindowSize()},i.prototype._handleContainerClick=function(t){function e(t){return t.className.match(/paypal-button(?!-widget)/)||"braintree-paypal-button"===t.id}var n=t.target||t.srcElement;(e(n)||e(n.parentNode))&&(t.preventDefault?t.preventDefault():t.returnValue=!1,this._open())},i.prototype._setMerchantPageDefaultStyles=function(){this.merchantPageDefaultStyles=r()},i.prototype._open=function(){this._isAriesCapable()&&this._addCorrelationIdToClientToken(),p.isPopupSupported()?this._openPopup():this._openModal()},i.prototype._close=function(){p.isPopupSupported()?this._closePopup():this._closeModal()},i.prototype._openModal=function(){this._removeFrame(),this._insertFrame()},i.prototype._isAriesCapable=function(){return!(!this._clientOptions.singleUse||!this._clientOptions.amount||!this._clientOptions.currency||this._clientOptions.demo)},i.prototype._openPopup=function(){var t,e,n,r=[],i=window.outerWidth||document.documentElement.clientWidth,o=window.outerHeight||document.documentElement.clientHeight,a="undefined"==typeof window.screenY?window.screenTop:window.screenY,s="undefined"==typeof window.screenX?window.screenLeft:window.screenX;this._isAriesCapable()?(t=d.ARIES_POPUP_NAME,n=d.ARIES_POPUP_HEIGHT,e=d.ARIES_POPUP_WIDTH):(t=d.POPUP_NAME,n=d.POPUP_HEIGHT,e=d.POPUP_WIDTH);var u=(i-e)/2+s,l=(o-n)/2+a;return r.push("height="+n),r.push("width="+e),r.push("top="+l),r.push("left="+u),r.push(d.POPUP_OPTIONS),this.popup=window.open(this.getViewerUrl(),t,r.join(",")),p.isOverlaySupported()&&(this.overlayView=new c(this.popup,this._clientToken.paypal.assetsUrl),this.overlayView.render()),this.popup.focus(),this.popup},i.prototype._addCorrelationIdToClientToken=function(){this._clientToken.correlationId=f.generateUid()},i.prototype._createProxyFrame=function(){var t=document.createElement("iframe");return t.src=this.getProxyUrl(),t.id=d.BRIDGE_FRAME_NAME,t.name=d.BRIDGE_FRAME_NAME,t.allowTransparency=!0,t.height=0,t.width=0,t.frameBorder=0,t.style.position="static",t.style.padding=0,t.style.margin=0,t.style.border=0,t.style.outline="none",t},i.prototype._insertProxyFrame=function(){this.proxyFrame=this._createProxyFrame(),document.body.appendChild(this.proxyFrame)},i.prototype._closeModal=function(){this._removeFrame()},i.prototype._closePopup=function(){this.popup&&(this.popup.close(),this.popup=null),this.overlayView&&p.isOverlaySupported()&&this.overlayView.remove()},i.prototype._clientTokenData=function(){return{analyticsUrl:this._clientToken.analytics?this._clientToken.analytics.url:void 0,authorizationFingerprint:this._clientToken.authorizationFingerprint,clientApiUrl:this._clientToken.clientApiUrl,displayName:this._clientToken.paypal.displayName,paypalBaseUrl:this._clientToken.paypal.assetsUrl,paypalClientId:this._clientToken.paypal.clientId,paypalPrivacyUrl:this._clientToken.paypal.privacyUrl,paypalUserAgreementUrl:this._clientToken.paypal.userAgreementUrl,unvettedMerchant:this._clientToken.paypal.unvettedMerchant,payeeEmail:this._clientToken.paypal.payeeEmail,correlationId:this._clientToken.correlationId,offline:this._clientOptions.offline||this._clientToken.paypal.environmentNoNetwork,sdkVersion:this._clientToken.sdkVersion,merchantAppId:this._clientToken.merchantAppId}},i.prototype._handleGetClientToken=function(t){t(this._clientTokenData())},i.prototype._clientOptionsData=function(){return{demo:this._clientOptions.demo||!1,locale:this._clientOptions.locale||"en_us",onetime:this._clientOptions.singleUse||!1,integration:this._clientOptions.integration||"paypal",enableShippingAddress:this._clientOptions.enableShippingAddress||!1,enableAries:this._isAriesCapable(),amount:this._clientOptions.amount||null,currency:this._clientOptions.currency||null,shippingAddressOverride:this._clientOptions.shippingAddressOverride||null}},i.prototype._handleGetClientOptions=function(t){t(this._clientOptionsData())},i.prototype._handleSuccessfulAuthentication=function(t){this._close(),t.type=d.NONCE_TYPE,s.isFunction(this.paymentMethodNonceInputField)?this.paymentMethodNonceInputField(t.nonce):(this._showLoggedInContent(t.details.email),this._setNonceInputValue(t.nonce)),s.isFunction(this.onSuccess)&&this.onSuccess(t)},i.prototype._lockMerchantWindowSize=function(){this._setMerchantPageDefaultStyles(),document.documentElement.style.height="100%",document.documentElement.style.overflow="hidden",document.body.style.height="100%",document.body.style.overflow="hidden"},i.prototype._unlockMerchantWindowSize=function(){this.merchantPageDefaultStyles&&(document.documentElement.style.height=this.merchantPageDefaultStyles.html.styles.height,document.documentElement.style.overflow=this.merchantPageDefaultStyles.html.styles.overflow,document.body.style.height=this.merchantPageDefaultStyles.body.styles.height,document.body.style.overflow=this.merchantPageDefaultStyles.body.styles.overflow)},i.prototype._handleCloseMessage=function(){this._removeFrame()},i.prototype._showLoggedInContent=function(t){this.loggedOutView.hide(),h.setTextContent(this.loggedInView.emailNode,t),this.loggedInView.show()},i.prototype._handleLogout=function(t){t.preventDefault?t.preventDefault():t.returnValue=!1,this.loggedInView.hide(),this.loggedOutView.show(),this._setNonceInputValue(""),s.isFunction(this.onCancelled)&&this.onCancelled()},i.prototype._setNonceInputValue=function(t){this.paymentMethodNonceInputField.value=t},e.exports=i},{"../shared/constants":114,"../shared/get-locale":116,"../shared/util/browser":121,"../shared/util/dom":122,"../shared/util/util":123,"./logged-in-view":111,"./logged-out-view":112,"./overlay-view":113,"braintree-api":74,"braintree-rpc":97,"braintree-utilities":109}],111:[function(t,e){function n(t){this.options=t,this.container=this.createViewContainer(),this.createPayPalName(),this.emailNode=this.createEmailNode(),this.logoutNode=this.createLogoutNode()}var r=t("../shared/constants");n.prototype.createViewContainer=function(){var t=document.createElement("div");t.id="braintree-paypal-loggedin";var e=["display: none","max-width: 500px","overflow: hidden","padding: 16px","background-image: url("+this.options.assetsUrl+"/pwpp/"+r.VERSION+"/images/paypal-small.png)","background-image: url("+this.options.assetsUrl+"/pwpp/"+r.VERSION+"/images/paypal-small.svg), none","background-position: 20px 50%","background-repeat: no-repeat","background-size: 13px 15px","border-top: 1px solid #d1d4d6","border-bottom: 1px solid #d1d4d6"].join(";");return t.style.cssText=e,this.options.container.appendChild(t),t},n.prototype.createPayPalName=function(){var t=document.createElement("span");t.id="bt-pp-name",t.innerHTML="PayPal";var e=["color: #283036","font-size: 13px","font-weight: 800",'font-family: "Helvetica Neue", Helvetica, Arial, sans-serif',"margin-left: 36px","-webkit-font-smoothing: antialiased","-moz-font-smoothing: antialiased","-ms-font-smoothing: antialiased","font-smoothing: antialiased"].join(";");return t.style.cssText=e,this.container.appendChild(t)},n.prototype.createEmailNode=function(){var t=document.createElement("span");t.id="bt-pp-email";var e=["color: #6e787f","font-size: 13px",'font-family: "Helvetica Neue", Helvetica, Arial, sans-serif',"margin-left: 5px","-webkit-font-smoothing: antialiased","-moz-font-smoothing: antialiased","-ms-font-smoothing: antialiased","font-smoothing: antialiased"].join(";");return t.style.cssText=e,this.container.appendChild(t)},n.prototype.createLogoutNode=function(){var t=document.createElement("button");t.id="bt-pp-cancel",t.innerHTML="Cancel";var e=["color: #3d95ce","font-size: 11px",'font-family: "Helvetica Neue", Helvetica, Arial, sans-serif',"line-height: 20px","margin: 0 0 0 25px","padding: 0","background-color: transparent","border: 0","cursor: pointer","text-decoration: underline","float: right","-webkit-font-smoothing: antialiased","-moz-font-smoothing: antialiased","-ms-font-smoothing: antialiased","font-smoothing: antialiased"].join(";");return t.style.cssText=e,this.container.appendChild(t)},n.prototype.show=function(){this.container.style.display="block"},n.prototype.hide=function(){this.container.style.display="none"},e.exports=n},{"../shared/constants":114}],112:[function(t,e){function n(t){this.options=t,this.assetsUrl=this.options.assetsUrl,this.container=this.createViewContainer(),this.options.isCheckout?this.createCheckoutWithPayPalButton():this.createPayWithPayPalButton()}var r=(t("braintree-utilities"),t("../shared/constants")),i=t("../shared/get-locale");n.prototype.createViewContainer=function(){var t=document.createElement("div");return t.id="braintree-paypal-loggedout",this.options.container.appendChild(t),t},n.prototype.createPayWithPayPalButton=function(){var t=document.createElement("a");t.id="braintree-paypal-button",t.href="#";var e=["display: block","width: 115px","height: 44px","overflow: hidden"].join(";");t.style.cssText=e;var n=new Image;n.src=this.assetsUrl+"/pwpp/"+r.VERSION+"/images/pay-with-paypal.png",n.setAttribute("alt","Pay with PayPal");var i=["max-width: 100%","display: block","width: 100%","height: 100%","outline: none","border: 0"].join(";");n.style.cssText=i,t.appendChild(n),this.container.appendChild(t)},n.prototype.createCheckoutWithPayPalButton=function(){var t=document.createElement("script");t.src="//www.paypalobjects.com/api/button.js",t.async=!0,t.setAttribute("data-merchant",this.options.merchantId),t.setAttribute("data-button","checkout"),t.setAttribute("data-type","button"),t.setAttribute("data-width","150"),t.setAttribute("data-height","44"),t.setAttribute("data-lc",i(this.options.locale)),this.container.appendChild(t)},n.prototype.show=function(){this.container.style.display="block"},n.prototype.hide=function(){this.container.style.display="none"},e.exports=n},{"../shared/constants":114,"../shared/get-locale":116,"braintree-utilities":109}],113:[function(t,e){function n(t,e){this.popup=t,this.assetsUrl=e,this.spriteSrc=this.assetsUrl+"/pwpp/"+i.VERSION+"/images/pp_overlay_sprite.png",this._create(),this._setupEvents(),this._pollForPopup()
}var r=t("braintree-utilities"),i=t("../shared/constants");n.prototype.render=function(){document.body.contains(this.el)||document.body.appendChild(this.el)},n.prototype.remove=function(){document.body.contains(this.el)&&document.body.removeChild(this.el)},n.prototype._create=function(){this.el=document.createElement("div"),this.el.className="bt-overlay",this._setStyles(this.el,["z-index: 20001","position: fixed","top: 0","left: 0","height: 100%","width: 100%","text-align: center","background: #000","background: rgba(0,0,0,0.7)",'-ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=52)"']),this.el.appendChild(this._createCloseIcon()),this.el.appendChild(this._createMessage())},n.prototype._createCloseIcon=function(){return this.closeIcon=document.createElement("div"),this.closeIcon.className="bt-close-overlay",this._setStyles(this.closeIcon,["position: absolute","top: 10px","right: 10px","cursor: pointer","background: url("+this.spriteSrc+") no-repeat 0 -67px","height: 14px","width: 14px"]),this.closeIcon},n.prototype._createMessage=function(){var t=document.createElement("div");return this._setStyles(t,["position: relative","top: 50%","max-width: 350px",'font-family: "HelveticaNeue", "HelveticaNeue-Light", "Helvetica Neue Light", helvetica, arial, sans-serif',"font-size: 14px","line-height: 20px","margin: -70px auto 0"]),t.appendChild(this._createLogo()),t.appendChild(this._createExplanation()),t.appendChild(this._createFocusLink()),t},n.prototype._createExplanation=function(){var t=document.createElement("div");return this._setStyles(t,["color: #FFF","margin-bottom: 20px"]),t.innerHTML="Don't see the secure PayPal browser? We'll help you re-launch the window to complete your purchase.",t},n.prototype._createLogo=function(){var t=document.createElement("div");return this._setStyles(t,["background: url("+this.spriteSrc+") no-repeat 0 0","width: 94px","height: 25px","margin: 0 auto 26px auto"]),t},n.prototype._createFocusLink=function(){return this.focusLink=document.createElement("a"),this._setStyles(this.focusLink,["color: #009be1","cursor: pointer"]),this.focusLink.innerHTML="Continue",this.focusLink},n.prototype._setStyles=function(t,e){var n=e.join(";");t.style.cssText=n},n.prototype._setupEvents=function(){r.addEventListener(this.closeIcon,"click",r.bind(this._handleClose,this)),r.addEventListener(this.focusLink,"click",r.bind(this._handleFocus,this))},n.prototype._handleClose=function(t){t.preventDefault(),this.remove(),this.popup.close()},n.prototype._handleFocus=function(t){t.preventDefault(),this.popup.focus()},n.prototype._pollForPopup=function(){var t=setInterval(r.bind(function(){this.popup&&this.popup.closed&&(clearInterval(t),this.remove())},this),100)},e.exports=n},{"../shared/constants":114,"braintree-utilities":109}],114:[function(t,e,n){var r="1.3.5";n.VERSION=r,n.POPUP_NAME="braintree_paypal_popup",n.ARIES_POPUP_NAME="PPFrameRedirect",n.FRAME_NAME="braintree-paypal-frame",n.ARIES_FRAME_NAME="PPFrameRedirect",n.POPUP_PATH="/pwpp/"+r+"/html/braintree-frame.html",n.POPUP_OPTIONS="resizable,scrollbars",n.POPUP_HEIGHT=470,n.POPUP_WIDTH=410,n.ARIES_POPUP_HEIGHT=535,n.ARIES_POPUP_WIDTH=450,n.BRIDGE_FRAME_NAME="bt-proxy-frame",n.ARIES_SUPPORTED_CURRENCIES=["USD","GBP","EUR","AUD","CAD"],n.ARIES_SUPPORTED_COUNTRIES=["US","GB","AU","CA","ES","FR","DE","IT"],n.NONCE_TYPE="PayPalAccount",n.ILLEGAL_XHR_ERROR="Illegal XHR request attempted"},{}],115:[function(t,e){"use strict";e.exports={us:"en_us",gb:"en_uk",uk:"en_uk",de:"de_de",fr:"fr_fr",it:"it_it",es:"es_es",ca:"en_ca",au:"en_au",at:"de_de",be:"en_us",ch:"de_de",dk:"da_dk",nl:"nl_nl",no:"no_no",pl:"pl_pl",se:"sv_se",tr:"tr_tr",bg:"en_us",cy:"en_us",hr:"en_us",is:"en_us",kh:"en_us",mt:"en_us",my:"en_us",ru:"ru_ru"}},{}],116:[function(t,e){"use strict";function n(t){return-1!==t.indexOf("_")&&5===t.length}function r(t){var e;for(var n in o)o.hasOwnProperty(n)&&(n===t?e=o[n]:o[n]===t&&(e=o[n]));return e}function i(t){var e;if(t=t?t.toLowerCase():"us",t=t.replace(/-/g,"_"),e=n(t)?t:r(t)){var i=e.split("_");return[i[0],i[1].toUpperCase()].join("_")}return"en_US"}var o=t("../shared/data/country-code-lookup");e.exports=i},{"../shared/data/country-code-lookup":115}],117:[function(t,e){function n(){return l.matchUserAgent("Android")&&!r()}function r(){return l.matchUserAgent("Chrome")||l.matchUserAgent("CriOS")}function i(){return l.matchUserAgent("Firefox")}function o(){return l.matchUserAgent("Trident")||l.matchUserAgent("MSIE")}function a(){return l.matchUserAgent("Opera")||l.matchUserAgent("OPR")}function s(){return a()&&"[object OperaMini]"===c.call(window.operamini)}function u(){return l.matchUserAgent("Safari")&&!r()&&!n()}var l=t("./useragent"),c=Object.prototype.toString;e.exports={isAndroid:n,isChrome:r,isFirefox:i,isIE:o,isOpera:a,isOperaMini:s,isSafari:u}},{"./useragent":120}],118:[function(t,e){function n(){return!r()&&(a.isAndroid()||a.isIpod()||a.isIphone()||o.matchUserAgent("IEMobile"))}function r(){return a.isIpad()||a.isAndroid()&&!o.matchUserAgent("Mobile")}function i(){return!n()&&!r()}var o=t("./useragent"),a=t("./platform");e.exports={isMobile:n,isTablet:r,isDesktop:i}},{"./platform":119,"./useragent":120}],119:[function(t,e){function n(){return s.matchUserAgent("Android")}function r(){return s.matchUserAgent("iPad")}function i(){return s.matchUserAgent("iPod")}function o(){return s.matchUserAgent("iPhone")&&!i()}function a(){return r()||i()||o()}var s=t("./useragent");e.exports={isAndroid:n,isIpad:r,isIpod:i,isIphone:o,isIos:a}},{"./useragent":120}],120:[function(t,e,n){function r(){return o}function i(t){var e=n.getNativeUserAgent(),r=e.match(t);return r?!0:!1}var o=window.navigator.userAgent;n.getNativeUserAgent=r,n.matchUserAgent=i},{}],121:[function(t,e){function n(){return r()&&window.outerWidth<600}function r(){return f.test(d)}function i(){return!!window.postMessage}function o(){if(l.isOperaMini())return!1;if(c.isDesktop())return!0;if(c.isMobile()||c.isTablet()){if(l.isIE())return!1;if(p.isAndroid())return!0;if(p.isIos())return l.isSafari()&&h.matchUserAgent(/OS (?:8_1|8_0|8)(?!_\d)/i)||l.isChrome()?!1:!0}return!1}function a(){if(l.isIE()&&h.matchUserAgent(/MSIE 8\.0/))return!1;try{return window.self===window.top}catch(t){return!1}}function s(){return l.isIE()&&!u()}function u(){var t=null,e="";try{new ActiveXObject("")}catch(n){e=n.name}try{t=!!new ActiveXObject("htmlfile")}catch(n){t=!1}return t="ReferenceError"!==e&&t===!1?!1:!0,!t}var l=t("../useragent/browser"),c=t("../useragent/device"),p=t("../useragent/platform"),h=t("../useragent/useragent"),d=window.navigator.userAgent,f=/[Mm]obi|tablet|iOS|Android|IEMobile|Windows\sPhone/;e.exports={isMobile:n,isMobileDevice:r,detectedPostMessage:i,isPopupSupported:o,isOverlaySupported:a,isProxyFrameRequired:s}},{"../useragent/browser":117,"../useragent/device":118,"../useragent/platform":119,"../useragent/useragent":120}],122:[function(t,e){function n(t,e){var n="innerText";document&&document.body&&"textContent"in document.body&&(n="textContent"),t[n]=e}e.exports={setTextContent:n}},{}],123:[function(t,e){function n(){for(var t="",e=0;32>e;e++){var n=Math.floor(16*Math.random());t+=n.toString(16)}return t}function r(t){return/^(true|1)$/i.test(t)}function i(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&quot;").replace(/\'/g,"&apos;")}function o(t){var e=t.indexOf("?"),n={};if(e>=0&&(t=t.substr(e+1)),0!==t.length){for(var r=t.split("&"),i=0,o=r.length;o>i;i++){var a=r[i],s=a.indexOf("="),u=a.substr(0,s),l=a.substr(s+1),c=decodeURIComponent(l);c=c.replace(/</g,"&lt;").replace(/>/g,"&gt;"),"false"===c&&(c=!1),(void 0===c||"true"===c)&&(c=!0),n[u]=c}return n}}function a(t){return t&&"[object Function]"===Object.prototype.toString.call(t)}var s="function"==typeof String.prototype.trim?function(t){return t.trim()}:function(t){return t.replace(/^\s+|\s+$/,"")},u="function"==typeof window.btoa?function(t){return window.btoa(t)}:function(t){for(var e,n,r,i,o,a,s,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",l="",c=0;c<t.length;)e=t.charCodeAt(c++),n=t.charCodeAt(c++),r=t.charCodeAt(c++),i=e>>2,o=(3&e)<<4|n>>4,a=(15&n)<<2|r>>6,s=63&r,isNaN(n)?a=s=64:isNaN(r)&&(s=64),l=l+u.charAt(i)+u.charAt(o)+u.charAt(a)+u.charAt(s);return l};e.exports={trim:s,btoa:u,generateUid:n,castToBoolean:r,htmlEscape:i,parseUrlParams:o,isFunction:a}},{}],124:[function(t,e,n){arguments[4][92][0].apply(n,arguments)},{"braintree-utilities":134,dup:92}],125:[function(t,e,n){arguments[4][93][0].apply(n,arguments)},{"braintree-utilities":134,dup:93}],126:[function(t,e,n){arguments[4][94][0].apply(n,arguments)},{dup:94}],127:[function(t,e,n){arguments[4][95][0].apply(n,arguments)},{"braintree-utilities":134,dup:95}],128:[function(t,e,n){arguments[4][96][0].apply(n,arguments)},{"braintree-utilities":134,dup:96}],129:[function(t,e,n){arguments[4][97][0].apply(n,arguments)},{"./lib/message-bus":124,"./lib/pubsub-client":125,"./lib/pubsub-server":126,"./lib/rpc-client":127,"./lib/rpc-server":128,dup:97}],130:[function(t,e,n){arguments[4][98][0].apply(n,arguments)},{dup:98}],131:[function(t,e,n){arguments[4][99][0].apply(n,arguments)},{dup:99}],132:[function(t,e,n){arguments[4][100][0].apply(n,arguments)},{dup:100}],133:[function(t,e,n){arguments[4][22][0].apply(n,arguments)},{dup:22}],134:[function(t,e,n){arguments[4][23][0].apply(n,arguments)},{"./lib/dom":130,"./lib/events":131,"./lib/fn":132,"./lib/url":133,dup:23}],135:[function(t,e){function n(){if(!a){a=!0;for(var t,e=o.length;e;){t=o,o=[];for(var n=-1;++n<e;)t[n]();e=o.length}a=!1}}function r(){}var i=e.exports={},o=[],a=!1;i.nextTick=function(t){o.push(t),a||setTimeout(n,0)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=r,i.addListener=r,i.once=r,i.off=r,i.removeListener=r,i.removeAllListeners=r,i.emit=r,i.binding=function(){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],136:[function(){!function(t){"function"==typeof define?define(t):"function"==typeof YUI?YUI.add("es5-sham",t):t()}(function(){function t(t){try{return t.sentinel=0,0===Object.getOwnPropertyDescriptor(t,"sentinel").value}catch(e){}}function e(t){try{return Object.defineProperty(t,"sentinel",{}),"sentinel"in t}catch(e){}}var n,r,i,o,a,s=Function.prototype.call,u=Object.prototype,l=s.bind(u.hasOwnProperty);if((a=l(u,"__defineGetter__"))&&(n=s.bind(u.__defineGetter__),r=s.bind(u.__defineSetter__),i=s.bind(u.__lookupGetter__),o=s.bind(u.__lookupSetter__)),Object.getPrototypeOf||(Object.getPrototypeOf=function(t){return t.__proto__||(t.constructor?t.constructor.prototype:u)}),Object.defineProperty){var c=t({}),p="undefined"==typeof document||t(document.createElement("div"));if(!p||!c)var h=Object.getOwnPropertyDescriptor}if(!Object.getOwnPropertyDescriptor||h){var d="Object.getOwnPropertyDescriptor called on a non-object: ";Object.getOwnPropertyDescriptor=function(t,e){if("object"!=typeof t&&"function"!=typeof t||null===t)throw new TypeError(d+t);if(h)try{return h.call(Object,t,e)}catch(n){}if(l(t,e)){var r={enumerable:!0,configurable:!0};if(a){var s=t.__proto__;t.__proto__=u;var c=i(t,e),p=o(t,e);if(t.__proto__=s,c||p)return c&&(r.get=c),p&&(r.set=p),r}return r.value=t[e],r.writable=!0,r}}}if(Object.getOwnPropertyNames||(Object.getOwnPropertyNames=function(t){return Object.keys(t)}),!Object.create){var f,m=null===Object.prototype.__proto__;f=m||"undefined"==typeof document?function(){return{__proto__:null}}:function(){function t(){}var e=document.createElement("iframe"),n=document.body||document.documentElement;e.style.display="none",n.appendChild(e),e.src="javascript:";var r=e.contentWindow.Object.prototype;return n.removeChild(e),e=null,delete r.constructor,delete r.hasOwnProperty,delete r.propertyIsEnumerable,delete r.isPrototypeOf,delete r.toLocaleString,delete r.toString,delete r.valueOf,r.__proto__=null,t.prototype=r,f=function(){return new t},new t},Object.create=function(t,e){function n(){}var r;if(null===t)r=f();else{if("object"!=typeof t&&"function"!=typeof t)throw new TypeError("Object prototype may only be an Object or null");n.prototype=t,r=new n,r.__proto__=t}return void 0!==e&&Object.defineProperties(r,e),r}}if(Object.defineProperty){var v=e({}),y="undefined"==typeof document||e(document.createElement("div"));if(!v||!y)var g=Object.defineProperty,b=Object.defineProperties}if(!Object.defineProperty||g){var w="Property description must be an object: ",_="Object.defineProperty called on non-object: ",C="getters & setters can not be defined on this javascript engine";Object.defineProperty=function(t,e,s){if("object"!=typeof t&&"function"!=typeof t||null===t)throw new TypeError(_+t);if("object"!=typeof s&&"function"!=typeof s||null===s)throw new TypeError(w+s);if(g)try{return g.call(Object,t,e,s)}catch(c){}if(l(s,"value"))if(a&&(i(t,e)||o(t,e))){var p=t.__proto__;t.__proto__=u,delete t[e],t[e]=s.value,t.__proto__=p}else t[e]=s.value;else{if(!a)throw new TypeError(C);l(s,"get")&&n(t,e,s.get),l(s,"set")&&r(t,e,s.set)}return t}}(!Object.defineProperties||b)&&(Object.defineProperties=function(t,e){if(b)try{return b.call(Object,t,e)}catch(n){}for(var r in e)l(e,r)&&"__proto__"!=r&&Object.defineProperty(t,r,e[r]);return t}),Object.seal||(Object.seal=function(t){return t}),Object.freeze||(Object.freeze=function(t){return t});try{Object.freeze(function(){})}catch(x){Object.freeze=function(t){return function(e){return"function"==typeof e?e:t(e)}}(Object.freeze)}Object.preventExtensions||(Object.preventExtensions=function(t){return t}),Object.isSealed||(Object.isSealed=function(){return!1}),Object.isFrozen||(Object.isFrozen=function(){return!1}),Object.isExtensible||(Object.isExtensible=function(t){if(Object(t)!==t)throw new TypeError;for(var e="";l(t,e);)e+="?";t[e]=!0;var n=l(t,e);return delete t[e],n})})},{}],137:[function(){!function(t){"function"==typeof define?define(t):"function"==typeof YUI?YUI.add("es5",t):t()}(function(){function t(){}function e(t){return t=+t,t!==t?t=0:0!==t&&t!==1/0&&t!==-(1/0)&&(t=(t>0||-1)*Math.floor(Math.abs(t))),t}function n(t){var e=typeof t;return null===t||"undefined"===e||"boolean"===e||"number"===e||"string"===e}function r(t){var e,r,i;if(n(t))return t;if(r=t.valueOf,"function"==typeof r&&(e=r.call(t),n(e)))return e;if(i=t.toString,"function"==typeof i&&(e=i.call(t),n(e)))return e;throw new TypeError}8!==parseInt("08")&&(parseInt=function(t){var e=/^0[xX]/;return function(n,r){return n=String(n).trim(),+r||(r=e.test(n)?16:10),t(n,r)}}(parseInt)),Function.prototype.bind||(Function.prototype.bind=function(e){var n=this;if("function"!=typeof n)throw new TypeError("Function.prototype.bind called on incompatible "+n);for(var r=h.call(arguments,1),i=function(){if(this instanceof u){var t=n.apply(this,r.concat(h.call(arguments)));return Object(t)===t?t:this}return n.apply(e,r.concat(h.call(arguments)))},o=Math.max(0,n.length-r.length),a=[],s=0;o>s;s++)a.push("$"+s);var u=Function("binder","return function("+a.join(",")+"){return binder.apply(this,arguments)}")(i);return n.prototype&&(t.prototype=n.prototype,u.prototype=new t,t.prototype=null),u});var i,o,a,s,u,l=Function.prototype.call,c=Array.prototype,p=Object.prototype,h=c.slice,d=l.bind(p.toString),f=l.bind(p.hasOwnProperty);if((u=f(p,"__defineGetter__"))&&(i=l.bind(p.__defineGetter__),o=l.bind(p.__defineSetter__),a=l.bind(p.__lookupGetter__),s=l.bind(p.__lookupSetter__)),2!=[1,2].splice(0).length){var m=Array.prototype.splice,v=Array.prototype.push,y=Array.prototype.unshift;Array.prototype.splice=function(){function t(t){for(var e=[];t--;)e.unshift(t);return e}var e,n=[];return n.splice.bind(n,0,0).apply(null,t(20)),n.splice.bind(n,0,0).apply(null,t(26)),e=n.length,n.splice(5,0,"XXX"),e+1==n.length?!0:void 0}()?function(t,e){return arguments.length?m.apply(this,[void 0===t?0:t,void 0===e?this.length-t:e].concat(h.call(arguments,2))):[]}:function(t,e){var n,r=h.call(arguments,2),i=r.length;if(!arguments.length)return[];if(void 0===t&&(t=0),void 0===e&&(e=this.length-t),i>0){if(0>=e){if(t==this.length)return v.apply(this,r),[];if(0==t)return y.apply(this,r),[]}return n=h.call(this,t,t+e),r.push.apply(r,h.call(this,t+e,this.length)),r.unshift.apply(r,h.call(this,0,t)),r.unshift(0,this.length),m.apply(this,r),n}return m.call(this,t,e)}}if(1!=[].unshift(0)){var y=Array.prototype.unshift;Array.prototype.unshift=function(){return y.apply(this,arguments),this.length}}Array.isArray||(Array.isArray=function(t){return"[object Array]"==d(t)});var g=Object("a"),b="a"!=g[0]||!(0 in g),w=!0;if(Array.prototype.forEach&&Array.prototype.forEach.call("foo",function(t,e,n){"object"!=typeof n&&(w=!1)}),Array.prototype.forEach&&w||(Array.prototype.forEach=function(t){var e=j(this),n=b&&"[object String]"==d(this)?this.split(""):e,r=arguments[1],i=-1,o=n.length>>>0;if("[object Function]"!=d(t))throw new TypeError;for(;++i<o;)i in n&&t.call(r,n[i],i,e)}),Array.prototype.map||(Array.prototype.map=function(t){var e=j(this),n=b&&"[object String]"==d(this)?this.split(""):e,r=n.length>>>0,i=Array(r),o=arguments[1];if("[object Function]"!=d(t))throw new TypeError(t+" is not a function");for(var a=0;r>a;a++)a in n&&(i[a]=t.call(o,n[a],a,e));return i}),Array.prototype.filter||(Array.prototype.filter=function(t){var e,n=j(this),r=b&&"[object String]"==d(this)?this.split(""):n,i=r.length>>>0,o=[],a=arguments[1];if("[object Function]"!=d(t))throw new TypeError(t+" is not a function");for(var s=0;i>s;s++)s in r&&(e=r[s],t.call(a,e,s,n)&&o.push(e));return o}),Array.prototype.every||(Array.prototype.every=function(t){var e=j(this),n=b&&"[object String]"==d(this)?this.split(""):e,r=n.length>>>0,i=arguments[1];if("[object Function]"!=d(t))throw new TypeError(t+" is not a function");for(var o=0;r>o;o++)if(o in n&&!t.call(i,n[o],o,e))return!1;return!0}),Array.prototype.some||(Array.prototype.some=function(t){var e=j(this),n=b&&"[object String]"==d(this)?this.split(""):e,r=n.length>>>0,i=arguments[1];if("[object Function]"!=d(t))throw new TypeError(t+" is not a function");for(var o=0;r>o;o++)if(o in n&&t.call(i,n[o],o,e))return!0;return!1}),Array.prototype.reduce||(Array.prototype.reduce=function(t){var e=j(this),n=b&&"[object String]"==d(this)?this.split(""):e,r=n.length>>>0;if("[object Function]"!=d(t))throw new TypeError(t+" is not a function");if(!r&&1==arguments.length)throw new TypeError("reduce of empty array with no initial value");var i,o=0;if(arguments.length>=2)i=arguments[1];else for(;;){if(o in n){i=n[o++];break}if(++o>=r)throw new TypeError("reduce of empty array with no initial value")}for(;r>o;o++)o in n&&(i=t.call(void 0,i,n[o],o,e));return i}),Array.prototype.reduceRight||(Array.prototype.reduceRight=function(t){var e=j(this),n=b&&"[object String]"==d(this)?this.split(""):e,r=n.length>>>0;if("[object Function]"!=d(t))throw new TypeError(t+" is not a function");if(!r&&1==arguments.length)throw new TypeError("reduceRight of empty array with no initial value");var i,o=r-1;if(arguments.length>=2)i=arguments[1];else for(;;){if(o in n){i=n[o--];break}if(--o<0)throw new TypeError("reduceRight of empty array with no initial value")}if(0>o)return i;do o in this&&(i=t.call(void 0,i,n[o],o,e));while(o--);return i}),Array.prototype.indexOf&&-1==[0,1].indexOf(1,2)||(Array.prototype.indexOf=function(t){var n=b&&"[object String]"==d(this)?this.split(""):j(this),r=n.length>>>0;if(!r)return-1;var i=0;for(arguments.length>1&&(i=e(arguments[1])),i=i>=0?i:Math.max(0,r+i);r>i;i++)if(i in n&&n[i]===t)return i;return-1}),Array.prototype.lastIndexOf&&-1==[0,1].lastIndexOf(0,-3)||(Array.prototype.lastIndexOf=function(t){var n=b&&"[object String]"==d(this)?this.split(""):j(this),r=n.length>>>0;if(!r)return-1;var i=r-1;for(arguments.length>1&&(i=Math.min(i,e(arguments[1]))),i=i>=0?i:r-Math.abs(i);i>=0;i--)if(i in n&&t===n[i])return i;return-1}),!Object.keys){var _=!0,C=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],x=C.length;for(var E in{toString:null})_=!1;Object.keys=function R(t){if("object"!=typeof t&&"function"!=typeof t||null===t)throw new TypeError("Object.keys called on a non-object");var R=[];for(var e in t)f(t,e)&&R.push(e);if(_)for(var n=0,r=x;r>n;n++){var i=C[n];f(t,i)&&R.push(i)}return R}}var k=-621987552e5,P="-000001";Date.prototype.toISOString&&-1!==new Date(k).toISOString().indexOf(P)||(Date.prototype.toISOString=function(){var t,e,n,r,i;if(!isFinite(this))throw new RangeError("Date.prototype.toISOString called on non-finite value.");for(r=this.getUTCFullYear(),i=this.getUTCMonth(),r+=Math.floor(i/12),i=(i%12+12)%12,t=[i+1,this.getUTCDate(),this.getUTCHours(),this.getUTCMinutes(),this.getUTCSeconds()],r=(0>r?"-":r>9999?"+":"")+("00000"+Math.abs(r)).slice(r>=0&&9999>=r?-4:-6),e=t.length;e--;)n=t[e],10>n&&(t[e]="0"+n);return r+"-"+t.slice(0,2).join("-")+"T"+t.slice(2).join(":")+"."+("000"+this.getUTCMilliseconds()).slice(-3)+"Z"});var S=!1;try{S=Date.prototype.toJSON&&null===new Date(0/0).toJSON()&&-1!==new Date(k).toJSON().indexOf(P)&&Date.prototype.toJSON.call({toISOString:function(){return!0}})}catch(A){}S||(Date.prototype.toJSON=function(){var t,e=Object(this),n=r(e);if("number"==typeof n&&!isFinite(n))return null;if(t=e.toISOString,"function"!=typeof t)throw new TypeError("toISOString property is not callable");return t.call(e)}),Date=function(t){function e(n,r,i,o,a,s,u){var l=arguments.length;if(this instanceof t){var c=1==l&&String(n)===n?new t(e.parse(n)):l>=7?new t(n,r,i,o,a,s,u):l>=6?new t(n,r,i,o,a,s):l>=5?new t(n,r,i,o,a):l>=4?new t(n,r,i,o):l>=3?new t(n,r,i):l>=2?new t(n,r):l>=1?new t(n):new t;return c.constructor=e,c}return t.apply(this,arguments)}function n(t,e){var n=e>1?1:0;return o[e]+Math.floor((t-1969+n)/4)-Math.floor((t-1901+n)/100)+Math.floor((t-1601+n)/400)+365*(t-1970)}function r(e){return Number(new t(1970,0,1,0,0,0,e))}var i=new RegExp("^(\\d{4}|[+-]\\d{6})(?:-(\\d{2})(?:-(\\d{2})(?:T(\\d{2}):(\\d{2})(?::(\\d{2})(?:(\\.\\d{1,}))?)?(Z|(?:([-+])(\\d{2}):(\\d{2})))?)?)?)?$"),o=[0,31,59,90,120,151,181,212,243,273,304,334,365];for(var a in t)e[a]=t[a];return e.now=t.now,e.UTC=t.UTC,e.prototype=t.prototype,e.prototype.constructor=e,e.parse=function(e){var o=i.exec(e);if(o){var a,s=Number(o[1]),u=Number(o[2]||1)-1,l=Number(o[3]||1)-1,c=Number(o[4]||0),p=Number(o[5]||0),h=Number(o[6]||0),d=Math.floor(1e3*Number(o[7]||0)),f=Boolean(o[4]&&!o[8]),m="-"===o[9]?1:-1,v=Number(o[10]||0),y=Number(o[11]||0);return(p>0||h>0||d>0?24:25)>c&&60>p&&60>h&&1e3>d&&u>-1&&12>u&&24>v&&60>y&&l>-1&&l<n(s,u+1)-n(s,u)&&(a=60*(24*(n(s,u)+l)+c+v*m),a=1e3*(60*(a+p+y*m)+h)+d,f&&(a=r(a)),a>=-864e13&&864e13>=a)?a:0/0}return t.parse.apply(this,arguments)},e}(Date),Date.now||(Date.now=function(){return(new Date).getTime()}),Number.prototype.toFixed&&"0.000"===8e-5.toFixed(3)&&"0"!==.9.toFixed(0)&&"1.25"===1.255.toFixed(2)&&"1000000000000000128"===0xde0b6b3a7640080.toFixed(0)||!function(){function t(t,e){for(var n=-1;++n<a;)e+=t*s[n],s[n]=e%o,e=Math.floor(e/o)}function e(t){for(var e=a,n=0;--e>=0;)n+=s[e],s[e]=Math.floor(n/t),n=n%t*o}function n(){for(var t=a,e="";--t>=0;)if(""!==e||0===t||0!==s[t]){var n=String(s[t]);""===e?e=n:e+="0000000".slice(0,7-n.length)+n}return e}function r(t,e,n){return 0===e?n:e%2===1?r(t,e-1,n*t):r(t*t,e/2,n)}function i(t){for(var e=0;t>=4096;)e+=12,t/=4096;for(;t>=2;)e+=1,t/=2;return e}var o,a,s;o=1e7,a=6,s=[0,0,0,0,0,0],Number.prototype.toFixed=function(o){var a,s,u,l,c,p,h,d;if(a=Number(o),a=a!==a?0:Math.floor(a),0>a||a>20)throw new RangeError("Number.toFixed called with invalid number of decimals");if(s=Number(this),s!==s)return"NaN";if(-1e21>=s||s>=1e21)return String(s);if(u="",0>s&&(u="-",s=-s),l="0",s>1e-21)if(c=i(s*r(2,69,1))-69,p=0>c?s*r(2,-c,1):s/r(2,c,1),p*=4503599627370496,c=52-c,c>0){for(t(0,p),h=a;h>=7;)t(1e7,0),h-=7;for(t(r(10,h,1),0),h=c-1;h>=23;)e(1<<23),h-=23;e(1<<h),t(1,1),e(2),l=n()}else t(0,p),t(1<<-c,0),l=n()+"0.00000000000000000000".slice(2,2+a);return a>0?(d=l.length,l=a>=d?u+"0.0000000000000000000".slice(0,a-d+2)+l:u+l.slice(0,d-a)+"."+l.slice(d-a)):l=u+l,l}}();var O=String.prototype.split;if(2!=="ab".split(/(?:ab)*/).length||4!==".".split(/(.?)(.?)/).length||"t"==="tesst".split(/(s)*/)[1]||"".split(/.?/).length||".".split(/()()/).length>1?!function(){var t=void 0===/()??/.exec("")[1];String.prototype.split=function(e,n){var r=this;if(void 0===e&&0===n)return[];if("[object RegExp]"!==Object.prototype.toString.call(e))return O.apply(this,arguments);var i,o,a,s,u=[],l=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.extended?"x":"")+(e.sticky?"y":""),c=0,e=new RegExp(e.source,l+"g");for(r+="",t||(i=new RegExp("^"+e.source+"$(?!\\s)",l)),n=void 0===n?-1>>>0:n>>>0;(o=e.exec(r))&&(a=o.index+o[0].length,!(a>c&&(u.push(r.slice(c,o.index)),!t&&o.length>1&&o[0].replace(i,function(){for(var t=1;t<arguments.length-2;t++)void 0===arguments[t]&&(o[t]=void 0)}),o.length>1&&o.index<r.length&&Array.prototype.push.apply(u,o.slice(1)),s=o[0].length,c=a,u.length>=n)));)e.lastIndex===o.index&&e.lastIndex++;return c===r.length?(s||!e.test(""))&&u.push(""):u.push(r.slice(c)),u.length>n?u.slice(0,n):u}}():"0".split(void 0,0).length&&(String.prototype.split=function(t,e){return void 0===t&&0===e?[]:O.apply(this,arguments)}),"".substr&&"b"!=="0b".substr(-1)){var T=String.prototype.substr;String.prototype.substr=function(t,e){return T.call(this,0>t&&(t=this.length+t)<0?0:t,e)}}var I="	\n\f\r \u2028\u2029";if(!String.prototype.trim||I.trim()){I="["+I+"]";var M=new RegExp("^"+I+I+"*"),N=new RegExp(I+I+"*$");String.prototype.trim=function(){if(void 0===this||null===this)throw new TypeError("can't convert "+this+" to object");return String(this).replace(M,"").replace(N,"")}}var j=function(t){if(null==t)throw new TypeError("can't convert "+t+" to object");return Object(t)}})},{}],138:[function(t,e){!function(){"use strict";function t(e,n){function i(t,e){return function(){return t.apply(e,arguments)}}var o;if(n=n||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=n.touchBoundary||10,this.layer=e,this.tapDelay=n.tapDelay||200,this.tapTimeout=n.tapTimeout||700,!t.notNeeded(e)){for(var a=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],s=this,u=0,l=a.length;l>u;u++)s[a[u]]=i(s[a[u]],s);r&&(e.addEventListener("mouseover",this.onMouse,!0),e.addEventListener("mousedown",this.onMouse,!0),e.addEventListener("mouseup",this.onMouse,!0)),e.addEventListener("click",this.onClick,!0),e.addEventListener("touchstart",this.onTouchStart,!1),e.addEventListener("touchmove",this.onTouchMove,!1),e.addEventListener("touchend",this.onTouchEnd,!1),e.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(e.removeEventListener=function(t,n,r){var i=Node.prototype.removeEventListener;"click"===t?i.call(e,t,n.hijacked||n,r):i.call(e,t,n,r)},e.addEventListener=function(t,n,r){var i=Node.prototype.addEventListener;"click"===t?i.call(e,t,n.hijacked||(n.hijacked=function(t){t.propagationStopped||n(t)}),r):i.call(e,t,n,r)}),"function"==typeof e.onclick&&(o=e.onclick,e.addEventListener("click",function(t){o(t)},!1),e.onclick=null)}}var n=navigator.userAgent.indexOf("Windows Phone")>=0,r=navigator.userAgent.indexOf("Android")>0&&!n,i=/iP(ad|hone|od)/.test(navigator.userAgent)&&!n,o=i&&/OS 4_\d(_\d)?/.test(navigator.userAgent),a=i&&/OS [6-7]_\d/.test(navigator.userAgent),s=navigator.userAgent.indexOf("BB10")>0;t.prototype.needsClick=function(t){switch(t.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(t.disabled)return!0;break;case"input":if(i&&"file"===t.type||t.disabled)return!0;break;case"label":case"iframe":case"video":return!0}return/\bneedsclick\b/.test(t.className)},t.prototype.needsFocus=function(t){switch(t.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!r;case"input":switch(t.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!t.disabled&&!t.readOnly;default:return/\bneedsfocus\b/.test(t.className)}},t.prototype.sendClick=function(t,e){var n,r;document.activeElement&&document.activeElement!==t&&document.activeElement.blur(),r=e.changedTouches[0],n=document.createEvent("MouseEvents"),n.initMouseEvent(this.determineEventType(t),!0,!0,window,1,r.screenX,r.screenY,r.clientX,r.clientY,!1,!1,!1,!1,0,null),n.forwardedTouchEvent=!0,t.dispatchEvent(n)},t.prototype.determineEventType=function(t){return r&&"select"===t.tagName.toLowerCase()?"mousedown":"click"},t.prototype.focus=function(t){var e;i&&t.setSelectionRange&&0!==t.type.indexOf("date")&&"time"!==t.type&&"month"!==t.type?(e=t.value.length,t.setSelectionRange(e,e)):t.focus()},t.prototype.updateScrollParent=function(t){var e,n;if(e=t.fastClickScrollParent,!e||!e.contains(t)){n=t;do{if(n.scrollHeight>n.offsetHeight){e=n,t.fastClickScrollParent=n;break}n=n.parentElement}while(n)}e&&(e.fastClickLastScrollTop=e.scrollTop)},t.prototype.getTargetElementFromEventTarget=function(t){return t.nodeType===Node.TEXT_NODE?t.parentNode:t},t.prototype.onTouchStart=function(t){var e,n,r;if(t.targetTouches.length>1)return!0;if(e=this.getTargetElementFromEventTarget(t.target),n=t.targetTouches[0],i){if(r=window.getSelection(),r.rangeCount&&!r.isCollapsed)return!0;if(!o){if(n.identifier&&n.identifier===this.lastTouchIdentifier)return t.preventDefault(),!1;this.lastTouchIdentifier=n.identifier,this.updateScrollParent(e)}}return this.trackingClick=!0,this.trackingClickStart=t.timeStamp,this.targetElement=e,this.touchStartX=n.pageX,this.touchStartY=n.pageY,t.timeStamp-this.lastClickTime<this.tapDelay&&t.preventDefault(),!0},t.prototype.touchHasMoved=function(t){var e=t.changedTouches[0],n=this.touchBoundary;return Math.abs(e.pageX-this.touchStartX)>n||Math.abs(e.pageY-this.touchStartY)>n?!0:!1},t.prototype.onTouchMove=function(t){return this.trackingClick?((this.targetElement!==this.getTargetElementFromEventTarget(t.target)||this.touchHasMoved(t))&&(this.trackingClick=!1,this.targetElement=null),!0):!0},t.prototype.findControl=function(t){return void 0!==t.control?t.control:t.htmlFor?document.getElementById(t.htmlFor):t.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},t.prototype.onTouchEnd=function(t){var e,n,s,u,l,c=this.targetElement;if(!this.trackingClick)return!0;if(t.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0,!0;if(t.timeStamp-this.trackingClickStart>this.tapTimeout)return!0;if(this.cancelNextClick=!1,this.lastClickTime=t.timeStamp,n=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,a&&(l=t.changedTouches[0],c=document.elementFromPoint(l.pageX-window.pageXOffset,l.pageY-window.pageYOffset)||c,c.fastClickScrollParent=this.targetElement.fastClickScrollParent),s=c.tagName.toLowerCase(),"label"===s){if(e=this.findControl(c)){if(this.focus(c),r)return!1;c=e}}else if(this.needsFocus(c))return t.timeStamp-n>100||i&&window.top!==window&&"input"===s?(this.targetElement=null,!1):(this.focus(c),this.sendClick(c,t),i&&"select"===s||(this.targetElement=null,t.preventDefault()),!1);return i&&!o&&(u=c.fastClickScrollParent,u&&u.fastClickLastScrollTop!==u.scrollTop)?!0:(this.needsClick(c)||(t.preventDefault(),this.sendClick(c,t)),!1)},t.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},t.prototype.onMouse=function(t){return this.targetElement?t.forwardedTouchEvent?!0:t.cancelable&&(!this.needsClick(this.targetElement)||this.cancelNextClick)?(t.stopImmediatePropagation?t.stopImmediatePropagation():t.propagationStopped=!0,t.stopPropagation(),t.preventDefault(),!1):!0:!0},t.prototype.onClick=function(t){var e;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===t.target.type&&0===t.detail?!0:(e=this.onMouse(t),e||(this.targetElement=null),e)},t.prototype.destroy=function(){var t=this.layer;
r&&(t.removeEventListener("mouseover",this.onMouse,!0),t.removeEventListener("mousedown",this.onMouse,!0),t.removeEventListener("mouseup",this.onMouse,!0)),t.removeEventListener("click",this.onClick,!0),t.removeEventListener("touchstart",this.onTouchStart,!1),t.removeEventListener("touchmove",this.onTouchMove,!1),t.removeEventListener("touchend",this.onTouchEnd,!1),t.removeEventListener("touchcancel",this.onTouchCancel,!1)},t.notNeeded=function(t){var e,n,i,o;if("undefined"==typeof window.ontouchstart)return!0;if(n=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!r)return!0;if(e=document.querySelector("meta[name=viewport]")){if(-1!==e.content.indexOf("user-scalable=no"))return!0;if(n>31&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}if(s&&(i=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/),i[1]>=10&&i[2]>=3&&(e=document.querySelector("meta[name=viewport]")))){if(-1!==e.content.indexOf("user-scalable=no"))return!0;if(document.documentElement.scrollWidth<=window.outerWidth)return!0}return"none"===t.style.msTouchAction||"manipulation"===t.style.touchAction?!0:(o=+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1],o>=27&&(e=document.querySelector("meta[name=viewport]"),e&&(-1!==e.content.indexOf("user-scalable=no")||document.documentElement.scrollWidth<=window.outerWidth))?!0:"none"===t.style.touchAction||"manipulation"===t.style.touchAction?!0:!1)},t.attach=function(e,n){return new t(e,n)},"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return t}):"undefined"!=typeof e&&e.exports?(e.exports=t.attach,e.exports.FastClick=t):window.FastClick=t}()},{}],139:[function(t,e,n){!function(t,r){"function"==typeof define&&define.amd?define([],function(){return t.returnExportsGlobal=r()}):"object"==typeof n?e.exports=r():t.Formatter=r()}(this,function(){var t=function(){var t={},e=4,n=new RegExp("{{([^}]+)}}","g"),r=function(t){for(var e,r=[];e=n.exec(t);)r.push(e);return r};return t.parse=function(t){var n={inpts:{},chars:{}},i=r(t),o=t.length,a=0,s=0,u=0,l=function(t){for(var r=t.length,i=0;r>i;i++)n.inpts[s]=t.charAt(i),s++;a++,u+=t.length+e-1};for(u;o>u;u++)a<i.length&&u===i[a].index?l(i[a][1]):n.chars[u-a*e]=t.charAt(u);return n.mLength=u-a*e,n},t}(),e=function(){{var t={};"undefined"!=typeof navigator?navigator.userAgent:null}return t.extend=function(t){for(var e=1;e<arguments.length;e++)for(var n in arguments[e])t[n]=arguments[e][n];return t},t.addChars=function(t,e,n){return t.substr(0,n)+e+t.substr(n,t.length)},t.removeChars=function(t,e,n){return t.substr(0,e)+t.substr(n,t.length)},t.isBetween=function(t,e){return e.sort(function(t,e){return t-e}),t>e[0]&&t<e[1]},t.addListener=function(t,e,n){return"undefined"!=typeof t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent("on"+e,n)},t.preventDefault=function(t){return t.preventDefault?t.preventDefault():t.returnValue=!1},t.getClip=function(t){return t.clipboardData?t.clipboardData.getData("Text"):window.clipboardData?window.clipboardData.getData("Text"):void 0},t.getMatchingKey=function(t,e,n){for(var r in n){var i=n[r];if(t===i.which&&e===i.keyCode)return r}},t.isDelKeyDown=function(e,n){var r={backspace:{which:8,keyCode:8},"delete":{which:46,keyCode:46}};return t.getMatchingKey(e,n,r)},t.isDelKeyPress=function(e,n){var r={backspace:{which:8,keyCode:8,shiftKey:!1},"delete":{which:0,keyCode:46}};return t.getMatchingKey(e,n,r)},t.isSpecialKeyPress=function(e,n){var r={tab:{which:0,keyCode:9},enter:{which:13,keyCode:13},end:{which:0,keyCode:35},home:{which:0,keyCode:36},leftarrow:{which:0,keyCode:37},uparrow:{which:0,keyCode:38},rightarrow:{which:0,keyCode:39},downarrow:{which:0,keyCode:40}};return t.getMatchingKey(e,n,r)},t.isModifier=function(t){return t.ctrlKey||t.altKey||t.metaKey},t.forEach=function(t,e,n){if(t.hasOwnProperty("length"))for(var r=0,i=t.length;i>r&&e.call(n,t[r],r,t)!==!1;r++);else for(var o in t)if(t.hasOwnProperty(o)&&e.call(n,t[o],o,t)===!1)break},t}(),n=function(t,e){function n(n){var i=[],o=[];e.forEach(n,function(n){e.forEach(n,function(e,n){var a=t.parse(e),s=r(n);return i.push(s),o.push(a),!1})});var a=function(t){var n;return e.forEach(i,function(e,r){return e.test(t)?(n=r,!1):void 0}),void 0===n?null:o[n]};return{getPattern:a,patterns:o,matchers:i}}var r=function(t){return"*"===t?/.*/:new RegExp(t)};return n}(t,e),r=function(){var t={};return t.get=function(t){if("number"==typeof t.selectionStart)return{begin:t.selectionStart,end:t.selectionEnd};var e;try{e=document.selection.createRange()}catch(n){}if(e&&e.parentElement()===t){var r=t.createTextRange(),i=t.createTextRange(),o=t.value.length;return r.moveToBookmark(e.getBookmark()),i.collapse(!1),r.compareEndPoints("StartToEnd",i)>-1?{begin:o,end:o}:{begin:-r.moveStart("character",-o),end:-r.moveEnd("character",-o)}}return{begin:0,end:0}},t.set=function(t,e){if("object"!=typeof e&&(e={begin:e,end:e}),t.setSelectionRange)t.focus(),t.setSelectionRange(e.begin,e.end);else if(t.createTextRange){var n=t.createTextRange();n.collapse(!0),n.moveEnd("character",e.end),n.moveStart("character",e.begin),n.select()}},t}(),i=function(t,e,n){function r(){var t=navigator.userAgent;if(t.match(/Android/i)){var e=t.match(/Chrome\/(\d{2})\./i);if(e&&Number(e[e.length-1])<=31)return!0}}function i(e,i){var a=this;if(a.el=e,!a.el)throw new TypeError("Must provide an existing element");if(a.opts=n.extend({},o,i),"undefined"!=typeof a.opts.pattern&&(a.opts.patterns=a._specFromSinglePattern(a.opts.pattern),delete a.opts.pattern),"undefined"==typeof a.opts.patterns)throw new TypeError("Must provide a pattern or array of patterns");a.patternMatcher=t(a.opts.patterns),a._updatePattern(),a.hldrs={},a.focus=0,n.addListener(a.el,"keydown",function(t){a._keyDown(t)}),n.addListener(a.el,"keypress",function(t){a._keyPress(t)}),r()&&n.addListener(a.el,"input",function(t){a._keyPress(t)}),n.addListener(a.el,"paste",function(t){a._paste(t)}),a.opts.persistent&&(a._processKey("",!1),a.el.blur(),n.addListener(a.el,"focus",function(t){a._focus(t)}),n.addListener(a.el,"click",function(t){a._focus(t)}),n.addListener(a.el,"touchstart",function(t){a._focus(t)}))}var o={persistent:!1,repeat:!1,placeholder:" "},a={9:/[0-9]/,a:/[A-Za-z]/,"*":/[A-Za-z0-9]/};return i.addInptType=function(t,e){a[t]=e},i.prototype.resetPattern=function(n){this.opts.patterns=n?this._specFromSinglePattern(n):this.opts.patterns,this.sel=e.get(this.el),this.val=this.el.value,this.delta=0,this._removeChars(),this.patternMatcher=t(this.opts.patterns);var r=this.patternMatcher.getPattern(this.val);this.mLength=r.mLength,this.chars=r.chars,this.inpts=r.inpts,this._processKey("",!1,!0)},i.prototype._updatePattern=function(){var t=this.patternMatcher.getPattern(this.val);t&&(this.mLength=t.mLength,this.chars=t.chars,this.inpts=t.inpts)},i.prototype._keyDown=function(t){var e=t.which||t.keyCode;return e&&n.isDelKeyDown(t.which,t.keyCode)?(this._processKey(null,e),n.preventDefault(t)):void 0},i.prototype._keyPress=function(t){var e,r;return e=t.which||t.keyCode,r=n.isSpecialKeyPress(t.which,t.keyCode),n.isDelKeyPress(t.which,t.keyCode)||r||n.isModifier(t)?void 0:(this._processKey(String.fromCharCode(e),!1),n.preventDefault(t))},i.prototype._paste=function(t){return this._processKey(n.getClip(t),!1),n.preventDefault(t)},i.prototype._focus=function(){var t=this;setTimeout(function(){var n=e.get(t.el),r=n.end>t.focus,i=0===n.end;(r||i)&&e.set(t.el,t.focus)},0)},i.prototype._processKey=function(t,r,i){if(this.sel=e.get(this.el),this.val=this.el.value,this.delta=0,this.sel.begin!==this.sel.end)this.delta=-1*Math.abs(this.sel.begin-this.sel.end),this.val=n.removeChars(this.val,this.sel.begin,this.sel.end);else if(r&&46===r)this._delete();else if(r&&this.sel.begin-1>=0)this.val=n.removeChars(this.val,this.sel.end-1,this.sel.end),this.delta-=1;else if(r)return!0;r||(this.val=n.addChars(this.val,t,this.sel.begin),this.delta+=t.length),this._formatValue(i)},i.prototype._delete=function(){for(;this.chars[this.sel.begin];)this._nextPos();this.sel.begin<this.val.length&&(this._nextPos(),this.val=n.removeChars(this.val,this.sel.end-1,this.sel.end),this.delta=-1)},i.prototype._nextPos=function(){this.sel.end++,this.sel.begin++},i.prototype._formatValue=function(t){this.newPos=this.sel.end+this.delta,this._removeChars(),this._updatePattern(),this._validateInpts(),this._addChars(),this.el.value=this.val.substr(0,this.mLength),("undefined"==typeof t||t===!1)&&e.set(this.el,this.newPos)},i.prototype._removeChars=function(){this.sel.end>this.focus&&(this.delta+=this.sel.end-this.focus);for(var t=0,e=0;e<=this.mLength;e++){var r,i=this.chars[e],o=this.hldrs[e],a=e+t;a=e>=this.sel.begin?a+this.delta:a,r=this.val.charAt(a),(i&&i===r||o&&o===r)&&(this.val=n.removeChars(this.val,a,a+1),t--)}this.hldrs={},this.focus=this.val.length},i.prototype._validateInpts=function(){for(var t=0;t<this.val.length;t++){var e=this.inpts[t],r=!a[e],i=!r&&!a[e].test(this.val.charAt(t)),o=this.inpts[t];(r||i)&&o&&(this.val=n.removeChars(this.val,t,t+1),this.focusStart--,this.newPos--,this.delta--,t--)}},i.prototype._addChars=function(){if(this.opts.persistent){for(var t=0;t<=this.mLength;t++)this.val.charAt(t)||(this.val=n.addChars(this.val,this.opts.placeholder,t),this.hldrs[t]=this.opts.placeholder),this._addChar(t);for(;this.chars[this.focus];)this.focus++}else for(var e=0;e<=this.val.length;e++){if(this.delta<=0&&e===this.focus)return!0;this._addChar(e)}},i.prototype._addChar=function(t){var e=this.chars[t];return e?(n.isBetween(t,[this.sel.begin-1,this.newPos+1])&&(this.newPos++,this.delta++),t<=this.focus&&this.focus++,this.hldrs[t]&&(delete this.hldrs[t],this.hldrs[t+1]=this.opts.placeholder),void(this.val=n.addChars(this.val,e,t))):!0},i.prototype._specFromSinglePattern=function(t){return[{"*":t}]},i}(n,r,e);return i})},{}],140:[function(t,e,n){"use strict";var r=t("./handlebars/base"),i=t("./handlebars/safe-string")["default"],o=t("./handlebars/exception")["default"],a=t("./handlebars/utils"),s=t("./handlebars/runtime"),u=function(){var t=new r.HandlebarsEnvironment;return a.extend(t,r),t.SafeString=i,t.Exception=o,t.Utils=a,t.escapeExpression=a.escapeExpression,t.VM=s,t.template=function(e){return s.template(e,t)},t},l=u();l.create=u,l["default"]=l,n["default"]=l},{"./handlebars/base":141,"./handlebars/exception":142,"./handlebars/runtime":143,"./handlebars/safe-string":144,"./handlebars/utils":145}],141:[function(t,e,n){"use strict";function r(t,e){this.helpers=t||{},this.partials=e||{},i(this)}function i(t){t.registerHelper("helperMissing",function(){if(1===arguments.length)return void 0;throw new a("Missing helper: '"+arguments[arguments.length-1].name+"'")}),t.registerHelper("blockHelperMissing",function(e,n){var r=n.inverse,i=n.fn;if(e===!0)return i(this);if(e===!1||null==e)return r(this);if(c(e))return e.length>0?(n.ids&&(n.ids=[n.name]),t.helpers.each(e,n)):r(this);if(n.data&&n.ids){var a=v(n.data);a.contextPath=o.appendContextPath(n.data.contextPath,n.name),n={data:a}}return i(e,n)}),t.registerHelper("each",function(t,e){if(!e)throw new a("Must pass iterator to #each");var n,r,i=e.fn,s=e.inverse,u=0,l="";if(e.data&&e.ids&&(r=o.appendContextPath(e.data.contextPath,e.ids[0])+"."),p(t)&&(t=t.call(this)),e.data&&(n=v(e.data)),t&&"object"==typeof t)if(c(t))for(var h=t.length;h>u;u++)n&&(n.index=u,n.first=0===u,n.last=u===t.length-1,r&&(n.contextPath=r+u)),l+=i(t[u],{data:n});else for(var d in t)t.hasOwnProperty(d)&&(n&&(n.key=d,n.index=u,n.first=0===u,r&&(n.contextPath=r+d)),l+=i(t[d],{data:n}),u++);return 0===u&&(l=s(this)),l}),t.registerHelper("if",function(t,e){return p(t)&&(t=t.call(this)),!e.hash.includeZero&&!t||o.isEmpty(t)?e.inverse(this):e.fn(this)}),t.registerHelper("unless",function(e,n){return t.helpers["if"].call(this,e,{fn:n.inverse,inverse:n.fn,hash:n.hash})}),t.registerHelper("with",function(t,e){p(t)&&(t=t.call(this));var n=e.fn;if(o.isEmpty(t))return e.inverse(this);if(e.data&&e.ids){var r=v(e.data);r.contextPath=o.appendContextPath(e.data.contextPath,e.ids[0]),e={data:r}}return n(t,e)}),t.registerHelper("log",function(e,n){var r=n.data&&null!=n.data.level?parseInt(n.data.level,10):1;t.log(r,e)}),t.registerHelper("lookup",function(t,e){return t&&t[e]})}var o=t("./utils"),a=t("./exception")["default"],s="2.0.0";n.VERSION=s;var u=6;n.COMPILER_REVISION=u;var l={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1"};n.REVISION_CHANGES=l;var c=o.isArray,p=o.isFunction,h=o.toString,d="[object Object]";n.HandlebarsEnvironment=r,r.prototype={constructor:r,logger:f,log:m,registerHelper:function(t,e){if(h.call(t)===d){if(e)throw new a("Arg not supported with multiple helpers");o.extend(this.helpers,t)}else this.helpers[t]=e},unregisterHelper:function(t){delete this.helpers[t]},registerPartial:function(t,e){h.call(t)===d?o.extend(this.partials,t):this.partials[t]=e},unregisterPartial:function(t){delete this.partials[t]}};var f={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(t,e){if(f.level<=t){var n=f.methodMap[t];"undefined"!=typeof console&&console[n]&&console[n].call(console,e)}}};n.logger=f;var m=f.log;n.log=m;var v=function(t){var e=o.extend({},t);return e._parent=t,e};n.createFrame=v},{"./exception":142,"./utils":145}],142:[function(t,e,n){"use strict";function r(t,e){var n;e&&e.firstLine&&(n=e.firstLine,t+=" - "+n+":"+e.firstColumn);for(var r=Error.prototype.constructor.call(this,t),o=0;o<i.length;o++)this[i[o]]=r[i[o]];n&&(this.lineNumber=n,this.column=e.firstColumn)}var i=["description","fileName","lineNumber","message","name","number","stack"];r.prototype=new Error,n["default"]=r},{}],143:[function(t,e,n){"use strict";function r(t){var e=t&&t[0]||1,n=p;if(e!==n){if(n>e){var r=h[n],i=h[e];throw new c("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+r+") or downgrade your runtime to an older version ("+i+").")}throw new c("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+t[1]+").")}}function i(t,e){if(!e)throw new c("No environment passed to template");if(!t||!t.main)throw new c("Unknown template object: "+typeof t);e.VM.checkRevision(t.compiler);var n=function(n,r,i,o,a,s,u,p,h){a&&(o=l.extend({},o,a));var d=e.VM.invokePartial.call(this,n,i,o,s,u,p,h);if(null==d&&e.compile){var f={helpers:s,partials:u,data:p,depths:h};u[i]=e.compile(n,{data:void 0!==p,compat:t.compat},e),d=u[i](o,f)}if(null!=d){if(r){for(var m=d.split("\n"),v=0,y=m.length;y>v&&(m[v]||v+1!==y);v++)m[v]=r+m[v];d=m.join("\n")}return d}throw new c("The partial "+i+" could not be compiled when running in runtime-only mode")},r={lookup:function(t,e){for(var n=t.length,r=0;n>r;r++)if(t[r]&&null!=t[r][e])return t[r][e]},lambda:function(t,e){return"function"==typeof t?t.call(e):t},escapeExpression:l.escapeExpression,invokePartial:n,fn:function(e){return t[e]},programs:[],program:function(t,e,n){var r=this.programs[t],i=this.fn(t);return e||n?r=o(this,t,i,e,n):r||(r=this.programs[t]=o(this,t,i)),r},data:function(t,e){for(;t&&e--;)t=t._parent;return t},merge:function(t,e){var n=t||e;return t&&e&&t!==e&&(n=l.extend({},e,t)),n},noop:e.VM.noop,compilerInfo:t.compiler},i=function(e,n){n=n||{};var o=n.data;i._setup(n),!n.partial&&t.useData&&(o=u(e,o));var a;return t.useDepths&&(a=n.depths?[e].concat(n.depths):[e]),t.main.call(r,e,r.helpers,r.partials,o,a)};return i.isTop=!0,i._setup=function(n){n.partial?(r.helpers=n.helpers,r.partials=n.partials):(r.helpers=r.merge(n.helpers,e.helpers),t.usePartial&&(r.partials=r.merge(n.partials,e.partials)))},i._child=function(e,n,i){if(t.useDepths&&!i)throw new c("must pass parent depths");return o(r,e,t[e],n,i)},i}function o(t,e,n,r,i){var o=function(e,o){return o=o||{},n.call(t,e,t.helpers,t.partials,o.data||r,i&&[e].concat(i))};return o.program=e,o.depth=i?i.length:0,o}function a(t,e,n,r,i,o,a){var s={partial:!0,helpers:r,partials:i,data:o,depths:a};if(void 0===t)throw new c("The partial "+e+" could not be found");return t instanceof Function?t(n,s):void 0}function s(){return""}function u(t,e){return e&&"root"in e||(e=e?d(e):{},e.root=t),e}var l=t("./utils"),c=t("./exception")["default"],p=t("./base").COMPILER_REVISION,h=t("./base").REVISION_CHANGES,d=t("./base").createFrame;n.checkRevision=r,n.template=i,n.program=o,n.invokePartial=a,n.noop=s},{"./base":141,"./exception":142,"./utils":145}],144:[function(t,e,n){"use strict";function r(t){this.string=t}r.prototype.toString=function(){return""+this.string},n["default"]=r},{}],145:[function(t,e,n){"use strict";function r(t){return l[t]}function i(t){for(var e=1;e<arguments.length;e++)for(var n in arguments[e])Object.prototype.hasOwnProperty.call(arguments[e],n)&&(t[n]=arguments[e][n]);return t}function o(t){return t instanceof u?t.toString():null==t?"":t?(t=""+t,p.test(t)?t.replace(c,r):t):t+""}function a(t){return t||0===t?f(t)&&0===t.length?!0:!1:!0}function s(t,e){return(t?t+".":"")+e}var u=t("./safe-string")["default"],l={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},c=/[&<>"'`]/g,p=/[&<>"'`]/;n.extend=i;var h=Object.prototype.toString;n.toString=h;var d=function(t){return"function"==typeof t};d(/x/)&&(d=function(t){return"function"==typeof t&&"[object Function]"===h.call(t)});var d;n.isFunction=d;var f=Array.isArray||function(t){return t&&"object"==typeof t?"[object Array]"===h.call(t):!1};n.isArray=f,n.escapeExpression=o,n.isEmpty=a,n.appendContextPath=s},{"./safe-string":144}],146:[function(t,e){e.exports=t("./dist/cjs/handlebars.runtime")},{"./dist/cjs/handlebars.runtime":140}],147:[function(t,e){e.exports=t("handlebars/runtime")["default"]},{"handlebars/runtime":146}],148:[function(t,e,n){arguments[4][27][0].apply(n,arguments)},{dup:27}],149:[function(t,e){(function(n){__browserify_shim_require__=t,function(t,e,r,i,o){(function(){function r(t,e,n){for(var r=(n||0)-1,i=t?t.length:0;++r<i;)if(t[r]===e)return r;return-1}function o(t,e){var n=typeof e;if(t=t.cache,"boolean"==n||null==e)return t[e]?0:-1;"number"!=n&&"string"!=n&&(n="object");var i="number"==n?e:x+e;return t=(t=t[n])&&t[i],"object"==n?t&&r(t,e)>-1?0:-1:t?0:-1}function a(t){var e=this.cache,n=typeof t;if("boolean"==n||null==t)e[t]=!0;else{"number"!=n&&"string"!=n&&(n="object");var r="number"==n?t:x+t,i=e[n]||(e[n]={});"object"==n?(i[r]||(i[r]=[])).push(t):i[r]=!0}}function s(t){return t.charCodeAt(0)}function u(t,e){for(var n=t.criteria,r=e.criteria,i=-1,o=n.length;++i<o;){var a=n[i],s=r[i];if(a!==s){if(a>s||"undefined"==typeof a)return 1;if(s>a||"undefined"==typeof s)return-1}}return t.index-e.index}function l(t){var e=-1,n=t.length,r=t[0],i=t[n/2|0],o=t[n-1];if(r&&"object"==typeof r&&i&&"object"==typeof i&&o&&"object"==typeof o)return!1;var s=h();s["false"]=s["null"]=s["true"]=s.undefined=!1;var u=h();for(u.array=t,u.cache=s,u.push=a;++e<n;)u.push(t[e]);return u}function c(t){return"\\"+re[t]}function p(){return b.pop()||[]}function h(){return w.pop()||{array:null,cache:null,criteria:null,"false":!1,index:0,"null":!1,number:null,object:null,push:null,string:null,"true":!1,undefined:!1,value:null}}function d(t){return"function"!=typeof t.toString&&"string"==typeof(t+"")}function f(t){t.length=0,b.length<P&&b.push(t)}function m(t){var e=t.cache;e&&m(e),t.array=t.cache=t.criteria=t.object=t.number=t.string=t.value=null,w.length<P&&w.push(t)}function v(t,e,n){e||(e=0),"undefined"==typeof n&&(n=t?t.length:0);for(var r=-1,i=n-e||0,o=Array(0>i?0:i);++r<i;)o[r]=t[e+r];return o}function y(t){function e(t){return t&&"object"==typeof t&&!pi(t)&&Br.call(t,"__wrapped__")?t:new n(t)}function n(t,e){this.__chain__=!!e,this.__wrapped__=t}function i(t){function e(){if(r){var t=v(r);qr.apply(t,arguments)}if(this instanceof e){var o=b(n.prototype),a=n.apply(o,t||arguments);return Ue(a)?a:o}return n.apply(i,t||arguments)}var n=t[0],r=t[2],i=t[4];return ci(e,t),e}function a(t,e,n,r,i){if(n){var o=n(t);if("undefined"!=typeof o)return o}var s=Ue(t);if(!s)return t;var u=Ur.call(t);if(!X[u]||!ui.nodeClass&&d(t))return t;var l=ai[u];switch(u){case B:case q:return new l(+t);case G:case Q:return new l(t);case J:return o=l(t.source,M.exec(t)),o.lastIndex=t.lastIndex,o}var c=pi(t);if(e){var h=!r;r||(r=p()),i||(i=p());for(var m=r.length;m--;)if(r[m]==t)return i[m];o=c?l(t.length):{}}else o=c?v(t):Ci({},t);return c&&(Br.call(t,"index")&&(o.index=t.index),Br.call(t,"input")&&(o.input=t.input)),e?(r.push(t),i.push(o),(c?_i:ki)(t,function(t,s){o[s]=a(t,e,n,r,i)}),h&&(f(r),f(i)),o):o}function b(t){return Ue(t)?Qr(t):{}}function w(t,e,n){if("function"!=typeof t)return or;if("undefined"==typeof e||!("prototype"in t))return t;var r=t.__bindData__;if("undefined"==typeof r&&(ui.funcNames&&(r=!t.name),r=r||!ui.funcDecomp,!r)){var i=zr.call(t);ui.funcNames||(r=!N.test(i)),r||(r=U.test(i),ci(t,r))}if(r===!1||r!==!0&&1&r[1])return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)};case 4:return function(n,r,i,o){return t.call(e,n,r,i,o)}}return zn(t,e)}function P(t){function e(){var t=u?a:this;if(i){var d=v(i);qr.apply(d,arguments)}if((o||c)&&(d||(d=v(arguments)),o&&qr.apply(d,o),c&&d.length<s))return r|=16,P([n,p?r:-4&r,d,null,a,s]);if(d||(d=arguments),l&&(n=t[h]),this instanceof e){t=b(n.prototype);var f=n.apply(t,d);return Ue(f)?f:t}return n.apply(t,d)}var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=1&r,l=2&r,c=4&r,p=8&r,h=n;return ci(e,t),e}function re(t,e){var n=-1,i=me(),a=t?t.length:0,s=a>=E&&i===r,u=[];if(s){var c=l(e);c?(i=o,e=c):s=!1}for(;++n<a;){var p=t[n];i(e,p)<0&&u.push(p)}return s&&m(e),u}function oe(t,e,n,r){for(var i=(r||0)-1,o=t?t.length:0,a=[];++i<o;){var s=t[i];if(s&&"object"==typeof s&&"number"==typeof s.length&&(pi(s)||be(s))){e||(s=oe(s,e,n));var u=-1,l=s.length,c=a.length;for(a.length+=l;++u<l;)a[c++]=s[u]}else n||a.push(s)}return a}function ae(t,e,n,r,i,o){if(n){var a=n(t,e);if("undefined"!=typeof a)return!!a}if(t===e)return 0!==t||1/t==1/e;var s=typeof t,u=typeof e;if(!(t!==t||t&&ne[s]||e&&ne[u]))return!1;if(null==t||null==e)return t===e;var l=Ur.call(t),c=Ur.call(e);if(l==z&&(l=K),c==z&&(c=K),l!=c)return!1;switch(l){case B:case q:return+t==+e;case G:return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case J:case Q:return t==Tr(e)}var h=l==H;if(!h){var m=Br.call(t,"__wrapped__"),v=Br.call(e,"__wrapped__");if(m||v)return ae(m?t.__wrapped__:t,v?e.__wrapped__:e,n,r,i,o);if(l!=K||!ui.nodeClass&&(d(t)||d(e)))return!1;var y=!ui.argsObject&&be(t)?Ar:t.constructor,g=!ui.argsObject&&be(e)?Ar:e.constructor;if(y!=g&&!(Fe(y)&&y instanceof y&&Fe(g)&&g instanceof g)&&"constructor"in t&&"constructor"in e)return!1}var b=!i;i||(i=p()),o||(o=p());for(var w=i.length;w--;)if(i[w]==t)return o[w]==e;var _=0;if(a=!0,i.push(t),o.push(e),h){if(w=t.length,_=e.length,a=_==w,a||r)for(;_--;){var C=w,x=e[_];if(r)for(;C--&&!(a=ae(t[C],x,n,r,i,o)););else if(!(a=ae(t[_],x,n,r,i,o)))break}}else Ei(e,function(e,s,u){return Br.call(u,s)?(_++,a=Br.call(t,s)&&ae(t[s],e,n,r,i,o)):void 0}),a&&!r&&Ei(t,function(t,e,n){return Br.call(n,e)?a=--_>-1:void 0});return i.pop(),o.pop(),b&&(f(i),f(o)),a}function se(t,e,n,r,i){(pi(e)?rn:ki)(e,function(e,o){var a,s,u=e,l=t[o];if(e&&((s=pi(e))||Pi(e))){for(var c=r.length;c--;)if(a=r[c]==e){l=i[c];break}if(!a){var p;n&&(u=n(l,e),(p="undefined"!=typeof u)&&(l=u)),p||(l=s?pi(l)?l:[]:Pi(l)?l:{}),r.push(e),i.push(l),p||se(l,e,n,r,i)}}else n&&(u=n(l,e),"undefined"==typeof u&&(u=e)),"undefined"!=typeof u&&(l=u);t[o]=l})}function ue(t,e){return t+$r(oi()*(e-t+1))}function ce(t,e,n){var i=-1,a=me(),s=t?t.length:0,u=[],c=!e&&s>=E&&a===r,h=n||c?p():u;if(c){var d=l(h);a=o,h=d}for(;++i<s;){var v=t[i],y=n?n(v,i,t):v;(e?!i||h[h.length-1]!==y:a(h,y)<0)&&((n||c)&&h.push(y),u.push(v))}return c?(f(h.array),m(h)):n&&f(h),u}function pe(t){return function(n,r,i){var o={};if(r=e.createCallback(r,i,3),pi(n))for(var a=-1,s=n.length;++a<s;){var u=n[a];t(o,u,r(u,a,n),n)}else _i(n,function(e,n,i){t(o,e,r(e,n,i),i)});return o}}function he(t,e,n,r,o,a){var s=1&e,u=2&e,l=4&e,c=16&e,p=32&e;if(!u&&!Fe(t))throw new Ir;c&&!n.length&&(e&=-17,c=n=!1),p&&!r.length&&(e&=-33,p=r=!1);var h=t&&t.__bindData__;if(h&&h!==!0)return h=v(h),h[2]&&(h[2]=v(h[2])),h[3]&&(h[3]=v(h[3])),!s||1&h[1]||(h[4]=o),!s&&1&h[1]&&(e|=8),!l||4&h[1]||(h[5]=a),c&&qr.apply(h[2]||(h[2]=[]),n),p&&Kr.apply(h[3]||(h[3]=[]),r),h[1]|=e,he.apply(null,h);var d=1==e||17===e?i:P;return d([t,e,n,r,o,a])}function de(){ee.shadowedProps=V,ee.array=ee.bottom=ee.loop=ee.top="",ee.init="iterable",ee.useHas=!0;for(var t,e=0;t=arguments[e];e++)for(var n in t)ee[n]=t[n];var r=ee.args;ee.firstArg=/^[^,]+/.exec(r)[0];var i=kr("baseCreateCallback, errorClass, errorProto, hasOwnProperty, indicatorObject, isArguments, isArray, isString, keys, objectProto, objectTypes, nonEnumProps, stringClass, stringProto, toString","return function("+r+") {\n"+li(ee)+"\n}");return i(w,W,Nr,Br,C,be,pi,ze,ee.keys,jr,ne,si,Q,Rr,Ur)}function fe(t){return yi[t]}function me(){var t=(t=e.indexOf)===kn?r:t;return t}function ve(t){return"function"==typeof t&&Dr.test(t)}function ye(t){var e,n;return!t||Ur.call(t)!=K||(e=t.constructor,Fe(e)&&!(e instanceof e))||!ui.argsClass&&be(t)||!ui.nodeClass&&d(t)?!1:ui.ownLast?(Ei(t,function(t,e,r){return n=Br.call(r,e),!1}),n!==!1):(Ei(t,function(t,e){n=e}),"undefined"==typeof n||Br.call(t,n))}function ge(t){return gi[t]}function be(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Ur.call(t)==z||!1}function we(t,e,n,r){return"boolean"!=typeof e&&null!=e&&(r=n,n=e,e=!1),a(t,e,"function"==typeof n&&w(n,r,1))}function _e(t,e,n){return a(t,!0,"function"==typeof e&&w(e,n,1))}function Ce(t,e){var n=b(t);return e?Ci(n,e):n}function xe(t,n,r){var i;return n=e.createCallback(n,r,3),ki(t,function(t,e,r){return n(t,e,r)?(i=e,!1):void 0}),i}function Ee(t,n,r){var i;return n=e.createCallback(n,r,3),Pe(t,function(t,e,r){return n(t,e,r)?(i=e,!1):void 0}),i}function ke(t,e,n){var r=[];Ei(t,function(t,e){r.push(e,t)});var i=r.length;for(e=w(e,n,3);i--&&e(r[i--],r[i],t)!==!1;);return t}function Pe(t,e,n){var r=di(t),i=r.length;for(e=w(e,n,3);i--;){var o=r[i];if(e(t[o],o,t)===!1)break}return t}function Se(t){var e=[];return Ei(t,function(t,n){Fe(t)&&e.push(n)}),e.sort()}function Ae(t,e){return t?Br.call(t,e):!1}function Oe(t){for(var e=-1,n=di(t),r=n.length,i={};++e<r;){var o=n[e];i[t[o]]=o}return i}function Te(t){return t===!0||t===!1||t&&"object"==typeof t&&Ur.call(t)==B||!1}function Ie(t){return t&&"object"==typeof t&&Ur.call(t)==q||!1}function Me(t){return t&&1===t.nodeType||!1}function Ne(t){var e=!0;if(!t)return e;var n=Ur.call(t),r=t.length;return n==H||n==Q||(ui.argsClass?n==z:be(t))||n==K&&"number"==typeof r&&Fe(t.splice)?!r:(ki(t,function(){return e=!1}),e)}function je(t,e,n,r){return ae(t,e,"function"==typeof n&&w(n,r,2))}function Re(t){return Zr(t)&&!ti(parseFloat(t))}function Fe(t){return"function"==typeof t}function Ue(t){return!(!t||!ne[typeof t])}function De(t){return Ve(t)&&t!=+t}function Le(t){return null===t}function Ve(t){return"number"==typeof t||t&&"object"==typeof t&&Ur.call(t)==G||!1}function $e(t){return t&&ne[typeof t]&&Ur.call(t)==J||!1}function ze(t){return"string"==typeof t||t&&"object"==typeof t&&Ur.call(t)==Q||!1}function He(t){return"undefined"==typeof t}function Be(t,n,r){var i={};return n=e.createCallback(n,r,3),ki(t,function(t,e,r){i[e]=n(t,e,r)}),i}function qe(t){var e=arguments,n=2;if(!Ue(t))return t;if("number"!=typeof e[2]&&(n=e.length),n>3&&"function"==typeof e[n-2])var r=w(e[--n-1],e[n--],2);else n>2&&"function"==typeof e[n-1]&&(r=e[--n]);for(var i=v(arguments,1,n),o=-1,a=p(),s=p();++o<n;)se(t,i[o],r,a,s);return f(a),f(s),t}function We(t,n,r){var i={};if("function"!=typeof n){var o=[];Ei(t,function(t,e){o.push(e)}),o=re(o,oe(arguments,!0,!1,1));for(var a=-1,s=o.length;++a<s;){var u=o[a];i[u]=t[u]}}else n=e.createCallback(n,r,3),Ei(t,function(t,e,r){n(t,e,r)||(i[e]=t)});return i}function Ye(t){for(var e=-1,n=di(t),r=n.length,i=_r(r);++e<r;){var o=n[e];i[e]=[o,t[o]]}return i}function Ge(t,n,r){var i={};if("function"!=typeof n)for(var o=-1,a=oe(arguments,!0,!1,1),s=Ue(t)?a.length:0;++o<s;){var u=a[o];u in t&&(i[u]=t[u])}else n=e.createCallback(n,r,3),Ei(t,function(t,e,r){n(t,e,r)&&(i[e]=t)});return i}function Ke(t,n,r,i){var o=pi(t);if(null==r)if(o)r=[];else{var a=t&&t.constructor,s=a&&a.prototype;r=b(s)}return n&&(n=e.createCallback(n,i,4),(o?_i:ki)(t,function(t,e,i){return n(r,t,e,i)})),r}function Je(t){for(var e=-1,n=di(t),r=n.length,i=_r(r);++e<r;)i[e]=t[n[e]];return i}function Qe(t){var e=arguments,n=-1,r=oe(e,!0,!1,1),i=e[2]&&e[2][e[1]]===t?1:r.length,o=_r(i);for(ui.unindexedChars&&ze(t)&&(t=t.split(""));++n<i;)o[n]=t[r[n]];return o}function Xe(t,e,n){var r=-1,i=me(),o=t?t.length:0,a=!1;return n=(0>n?ni(0,o+n):n)||0,pi(t)?a=i(t,e,n)>-1:"number"==typeof o?a=(ze(t)?t.indexOf(e,n):i(t,e,n))>-1:_i(t,function(t){return++r>=n?!(a=t===e):void 0}),a}function Ze(t,n,r){var i=!0;if(n=e.createCallback(n,r,3),pi(t))for(var o=-1,a=t.length;++o<a&&(i=!!n(t[o],o,t)););else _i(t,function(t,e,r){return i=!!n(t,e,r)});return i}function tn(t,n,r){var i=[];if(n=e.createCallback(n,r,3),pi(t))for(var o=-1,a=t.length;++o<a;){var s=t[o];n(s,o,t)&&i.push(s)}else _i(t,function(t,e,r){n(t,e,r)&&i.push(t)});return i}function en(t,n,r){if(n=e.createCallback(n,r,3),!pi(t)){var i;return _i(t,function(t,e,r){return n(t,e,r)?(i=t,!1):void 0}),i}for(var o=-1,a=t.length;++o<a;){var s=t[o];if(n(s,o,t))return s}}function nn(t,n,r){var i;return n=e.createCallback(n,r,3),on(t,function(t,e,r){return n(t,e,r)?(i=t,!1):void 0}),i}function rn(t,e,n){if(e&&"undefined"==typeof n&&pi(t))for(var r=-1,i=t.length;++r<i&&e(t[r],r,t)!==!1;);else _i(t,e,n);return t}function on(t,e,n){var r=t,i=t?t.length:0;if(e=e&&"undefined"==typeof n?e:w(e,n,3),pi(t))for(;i--&&e(t[i],i,t)!==!1;);else{if("number"!=typeof i){var o=di(t);i=o.length}else ui.unindexedChars&&ze(t)&&(r=t.split(""));_i(t,function(t,n,a){return n=o?o[--i]:--i,e(r[n],n,a)})}return t}function an(t,e){var n=v(arguments,2),r=-1,i="function"==typeof e,o=t?t.length:0,a=_r("number"==typeof o?o:0);return rn(t,function(t){a[++r]=(i?e:t[e]).apply(t,n)}),a}function sn(t,n,r){var i=-1,o=t?t.length:0,a=_r("number"==typeof o?o:0);if(n=e.createCallback(n,r,3),pi(t))for(;++i<o;)a[i]=n(t[i],i,t);else _i(t,function(t,e,r){a[++i]=n(t,e,r)});return a}function un(t,n,r){var i=-1/0,o=i;if("function"!=typeof n&&r&&r[n]===t&&(n=null),null==n&&pi(t))for(var a=-1,u=t.length;++a<u;){var l=t[a];l>o&&(o=l)}else n=null==n&&ze(t)?s:e.createCallback(n,r,3),_i(t,function(t,e,r){var a=n(t,e,r);a>i&&(i=a,o=t)});return o}function ln(t,n,r){var i=1/0,o=i;if("function"!=typeof n&&r&&r[n]===t&&(n=null),null==n&&pi(t))for(var a=-1,u=t.length;++a<u;){var l=t[a];o>l&&(o=l)}else n=null==n&&ze(t)?s:e.createCallback(n,r,3),_i(t,function(t,e,r){var a=n(t,e,r);i>a&&(i=a,o=t)});return o}function cn(t,n,r,i){var o=arguments.length<3;if(n=e.createCallback(n,i,4),pi(t)){var a=-1,s=t.length;for(o&&(r=t[++a]);++a<s;)r=n(r,t[a],a,t)}else _i(t,function(t,e,i){r=o?(o=!1,t):n(r,t,e,i)});return r}function pn(t,n,r,i){var o=arguments.length<3;return n=e.createCallback(n,i,4),on(t,function(t,e,i){r=o?(o=!1,t):n(r,t,e,i)}),r}function hn(t,n,r){return n=e.createCallback(n,r,3),tn(t,function(t,e,r){return!n(t,e,r)})}function dn(t,e,n){if(t&&"number"!=typeof t.length?t=Je(t):ui.unindexedChars&&ze(t)&&(t=t.split("")),null==e||n)return t?t[ue(0,t.length-1)]:g;var r=fn(t);return r.length=ri(ni(0,e),r.length),r}function fn(t){var e=-1,n=t?t.length:0,r=_r("number"==typeof n?n:0);return rn(t,function(t){var n=ue(0,++e);r[e]=r[n],r[n]=t}),r}function mn(t){var e=t?t.length:0;return"number"==typeof e?e:di(t).length}function vn(t,n,r){var i;if(n=e.createCallback(n,r,3),pi(t))for(var o=-1,a=t.length;++o<a&&!(i=n(t[o],o,t)););else _i(t,function(t,e,r){return!(i=n(t,e,r))});return!!i}function yn(t,n,r){var i=-1,o=pi(n),a=t?t.length:0,s=_r("number"==typeof a?a:0);for(o||(n=e.createCallback(n,r,3)),rn(t,function(t,e,r){var a=s[++i]=h();
o?a.criteria=sn(n,function(e){return t[e]}):(a.criteria=p())[0]=n(t,e,r),a.index=i,a.value=t}),a=s.length,s.sort(u);a--;){var l=s[a];s[a]=l.value,o||f(l.criteria),m(l)}return s}function gn(t){return t&&"number"==typeof t.length?ui.unindexedChars&&ze(t)?t.split(""):v(t):Je(t)}function bn(t){for(var e=-1,n=t?t.length:0,r=[];++e<n;){var i=t[e];i&&r.push(i)}return r}function wn(t){return re(t,oe(arguments,!0,!0,1))}function _n(t,n,r){var i=-1,o=t?t.length:0;for(n=e.createCallback(n,r,3);++i<o;)if(n(t[i],i,t))return i;return-1}function Cn(t,n,r){var i=t?t.length:0;for(n=e.createCallback(n,r,3);i--;)if(n(t[i],i,t))return i;return-1}function xn(t,n,r){var i=0,o=t?t.length:0;if("number"!=typeof n&&null!=n){var a=-1;for(n=e.createCallback(n,r,3);++a<o&&n(t[a],a,t);)i++}else if(i=n,null==i||r)return t?t[0]:g;return v(t,0,ri(ni(0,i),o))}function En(t,e,n,r){return"boolean"!=typeof e&&null!=e&&(r=n,n="function"!=typeof e&&r&&r[e]===t?null:e,e=!1),null!=n&&(t=sn(t,n,r)),oe(t,e)}function kn(t,e,n){if("number"==typeof n){var i=t?t.length:0;n=0>n?ni(0,i+n):n||0}else if(n){var o=jn(t,e);return t[o]===e?o:-1}return r(t,e,n)}function Pn(t,n,r){var i=0,o=t?t.length:0;if("number"!=typeof n&&null!=n){var a=o;for(n=e.createCallback(n,r,3);a--&&n(t[a],a,t);)i++}else i=null==n||r?1:n||i;return v(t,0,ri(ni(0,o-i),o))}function Sn(){for(var t=[],e=-1,n=arguments.length,i=p(),a=me(),s=a===r,u=p();++e<n;){var c=arguments[e];(pi(c)||be(c))&&(t.push(c),i.push(s&&c.length>=E&&l(e?t[e]:u)))}var h=t[0],d=-1,v=h?h.length:0,y=[];t:for(;++d<v;){var g=i[0];if(c=h[d],(g?o(g,c):a(u,c))<0){for(e=n,(g||u).push(c);--e;)if(g=i[e],(g?o(g,c):a(t[e],c))<0)continue t;y.push(c)}}for(;n--;)g=i[n],g&&m(g);return f(i),f(u),y}function An(t,n,r){var i=0,o=t?t.length:0;if("number"!=typeof n&&null!=n){var a=o;for(n=e.createCallback(n,r,3);a--&&n(t[a],a,t);)i++}else if(i=n,null==i||r)return t?t[o-1]:g;return v(t,ni(0,o-i))}function On(t,e,n){var r=t?t.length:0;for("number"==typeof n&&(r=(0>n?ni(0,r+n):ri(n,r-1))+1);r--;)if(t[r]===e)return r;return-1}function Tn(t){for(var e=arguments,n=0,r=e.length,i=t?t.length:0;++n<r;)for(var o=-1,a=e[n];++o<i;)t[o]===a&&(Gr.call(t,o--,1),i--);return t}function In(t,e,n){t=+t||0,n="number"==typeof n?n:+n||1,null==e&&(e=t,t=0);for(var r=-1,i=ni(0,Lr((e-t)/(n||1))),o=_r(i);++r<i;)o[r]=t,t+=n;return o}function Mn(t,n,r){var i=-1,o=t?t.length:0,a=[];for(n=e.createCallback(n,r,3);++i<o;){var s=t[i];n(s,i,t)&&(a.push(s),Gr.call(t,i--,1),o--)}return a}function Nn(t,n,r){if("number"!=typeof n&&null!=n){var i=0,o=-1,a=t?t.length:0;for(n=e.createCallback(n,r,3);++o<a&&n(t[o],o,t);)i++}else i=null==n||r?1:ni(0,n);return v(t,i)}function jn(t,n,r,i){var o=0,a=t?t.length:o;for(r=r?e.createCallback(r,i,1):or,n=r(n);a>o;){var s=o+a>>>1;r(t[s])<n?o=s+1:a=s}return o}function Rn(){return ce(oe(arguments,!0,!0))}function Fn(t,n,r,i){return"boolean"!=typeof n&&null!=n&&(i=r,r="function"!=typeof n&&i&&i[n]===t?null:n,n=!1),null!=r&&(r=e.createCallback(r,i,3)),ce(t,n,r)}function Un(t){return re(t,v(arguments,1))}function Dn(){for(var t=-1,e=arguments.length;++t<e;){var n=arguments[t];if(pi(n)||be(n))var r=r?ce(re(r,n).concat(re(n,r))):n}return r||[]}function Ln(){for(var t=arguments.length>1?arguments:arguments[0],e=-1,n=t?un(Ti(t,"length")):0,r=_r(0>n?0:n);++e<n;)r[e]=Ti(t,e);return r}function Vn(t,e){var n=-1,r=t?t.length:0,i={};for(e||!r||pi(t[0])||(e=[]);++n<r;){var o=t[n];e?i[o]=e[n]:o&&(i[o[0]]=o[1])}return i}function $n(t,e){if(!Fe(e))throw new Ir;return function(){return--t<1?e.apply(this,arguments):void 0}}function zn(t,e){return arguments.length>2?he(t,17,v(arguments,2),null,e):he(t,1,null,null,e)}function Hn(t){for(var e=arguments.length>1?oe(arguments,!0,!1,1):Se(t),n=-1,r=e.length;++n<r;){var i=e[n];t[i]=he(t[i],1,null,null,t)}return t}function Bn(t,e){return arguments.length>2?he(e,19,v(arguments,2),null,t):he(e,3,null,null,t)}function qn(){for(var t=arguments,e=t.length;e--;)if(!Fe(t[e]))throw new Ir;return function(){for(var e=arguments,n=t.length;n--;)e=[t[n].apply(this,e)];return e[0]}}function Wn(t,e){return e="number"==typeof e?e:+e||t.length,he(t,4,null,null,null,e)}function Yn(t,e,n){var r,i,o,a,s,u,l,c=0,p=!1,h=!0;if(!Fe(t))throw new Ir;if(e=ni(0,e)||0,n===!0){var d=!0;h=!1}else Ue(n)&&(d=n.leading,p="maxWait"in n&&(ni(e,n.maxWait)||0),h="trailing"in n?n.trailing:h);var f=function(){var n=e-(Mi()-a);if(0>=n){i&&Vr(i);var p=l;i=u=l=g,p&&(c=Mi(),o=t.apply(s,r),u||i||(r=s=null))}else u=Yr(f,n)},m=function(){u&&Vr(u),i=u=l=g,(h||p!==e)&&(c=Mi(),o=t.apply(s,r),u||i||(r=s=null))};return function(){if(r=arguments,a=Mi(),s=this,l=h&&(u||!d),p===!1)var n=d&&!u;else{i||d||(c=a);var v=p-(a-c),y=0>=v;y?(i&&(i=Vr(i)),c=a,o=t.apply(s,r)):i||(i=Yr(m,v))}return y&&u?u=Vr(u):u||e===p||(u=Yr(f,e)),n&&(y=!0,o=t.apply(s,r)),!y||u||i||(r=s=null),o}}function Gn(t){if(!Fe(t))throw new Ir;var e=v(arguments,1);return Yr(function(){t.apply(g,e)},1)}function Kn(t,e){if(!Fe(t))throw new Ir;var n=v(arguments,2);return Yr(function(){t.apply(g,n)},e)}function Jn(t,e){if(!Fe(t))throw new Ir;var n=function(){var r=n.cache,i=e?e.apply(this,arguments):x+arguments[0];return Br.call(r,i)?r[i]:r[i]=t.apply(this,arguments)};return n.cache={},n}function Qn(t){var e,n;if(!Fe(t))throw new Ir;return function(){return e?n:(e=!0,n=t.apply(this,arguments),t=null,n)}}function Xn(t){return he(t,16,v(arguments,1))}function Zn(t){return he(t,32,null,v(arguments,1))}function tr(t,e,n){var r=!0,i=!0;if(!Fe(t))throw new Ir;return n===!1?r=!1:Ue(n)&&(r="leading"in n?n.leading:r,i="trailing"in n?n.trailing:i),Z.leading=r,Z.maxWait=e,Z.trailing=i,Yn(t,e,Z)}function er(t,e){return he(e,16,[t])}function nr(t){return function(){return t}}function rr(t,e,n){var r=typeof t;if(null==t||"function"==r)return w(t,e,n);if("object"!=r)return lr(t);var i=di(t),o=i[0],a=t[o];return 1!=i.length||a!==a||Ue(a)?function(e){for(var n=i.length,r=!1;n--&&(r=ae(e[i[n]],t[i[n]],null,!0)););return r}:function(t){var e=t[o];return a===e&&(0!==a||1/a==1/e)}}function ir(t){return null==t?"":Tr(t).replace(wi,fe)}function or(t){return t}function ar(t,r,i){var o=!0,a=r&&Se(r);r&&(i||a.length)||(null==i&&(i=r),s=n,r=t,t=e,a=Se(r)),i===!1?o=!1:Ue(i)&&"chain"in i&&(o=i.chain);var s=t,u=Fe(s);rn(a,function(e){var n=t[e]=r[e];u&&(s.prototype[e]=function(){var e=this.__chain__,r=this.__wrapped__,i=[r];qr.apply(i,arguments);var a=n.apply(t,i);if(o||e){if(r===a&&Ue(a))return this;a=new s(a),a.__chain__=e}return a})})}function sr(){return t._=Fr,this}function ur(){}function lr(t){return function(e){return e[t]}}function cr(t,e,n){var r=null==t,i=null==e;if(null==n&&("boolean"==typeof t&&i?(n=t,t=1):i||"boolean"!=typeof e||(n=e,i=!0)),r&&i&&(e=1),t=+t||0,i?(e=t,t=0):e=+e||0,n||t%1||e%1){var o=oi();return ri(t+o*(e-t+parseFloat("1e-"+((o+"").length-1))),e)}return ue(t,e)}function pr(t,e){if(t){var n=t[e];return Fe(n)?t[e]():n}}function hr(t,n,r){var i=e.templateSettings;t=Tr(t||""),r=xi({},r,i);var o,a=xi({},r.imports,i.imports),s=di(a),u=Je(a),l=0,p=r.interpolate||F,h="__p += '",d=Or((r.escape||F).source+"|"+p.source+"|"+(p===j?I:F).source+"|"+(r.evaluate||F).source+"|$","g");t.replace(d,function(e,n,r,i,a,s){return r||(r=i),h+=t.slice(l,s).replace(D,c),n&&(h+="' +\n__e("+n+") +\n'"),a&&(o=!0,h+="';\n"+a+";\n__p += '"),r&&(h+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),l=s+e.length,e}),h+="';\n";var f=r.variable,m=f;m||(f="obj",h="with ("+f+") {\n"+h+"\n}\n"),h=(o?h.replace(A,""):h).replace(O,"$1").replace(T,"$1;"),h="function("+f+") {\n"+(m?"":f+" || ("+f+" = {});\n")+"var __t, __p = '', __e = _.escape"+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var v="\n/*\n//# sourceURL="+(r.sourceURL||"/lodash/template/source["+$++ +"]")+"\n*/";try{var y=kr(s,"return "+h+v).apply(g,u)}catch(b){throw b.source=h,b}return n?y(n):(y.source=h,y)}function dr(t,e,n){t=(t=+t)>-1?t:0;var r=-1,i=_r(t);for(e=w(e,n,1);++r<t;)i[r]=e(r);return i}function fr(t){return null==t?"":Tr(t).replace(bi,ge)}function mr(t){var e=++_;return Tr(null==t?"":t)+e}function vr(t){return t=new n(t),t.__chain__=!0,t}function yr(t,e){return e(t),t}function gr(){return this.__chain__=!0,this}function br(){return Tr(this.__wrapped__)}function wr(){return this.__wrapped__}t=t?le.defaults(ie.Object(),t,le.pick(ie,L)):ie;var _r=t.Array,Cr=t.Boolean,xr=t.Date,Er=t.Error,kr=t.Function,Pr=t.Math,Sr=t.Number,Ar=t.Object,Or=t.RegExp,Tr=t.String,Ir=t.TypeError,Mr=[],Nr=Er.prototype,jr=Ar.prototype,Rr=Tr.prototype,Fr=t._,Ur=jr.toString,Dr=Or("^"+Tr(Ur).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),Lr=Pr.ceil,Vr=t.clearTimeout,$r=Pr.floor,zr=kr.prototype.toString,Hr=ve(Hr=Ar.getPrototypeOf)&&Hr,Br=jr.hasOwnProperty,qr=Mr.push,Wr=jr.propertyIsEnumerable,Yr=t.setTimeout,Gr=Mr.splice,Kr=Mr.unshift,Jr=function(){try{var t={},e=ve(e=Ar.defineProperty)&&e,n=e(t,t,t)&&e}catch(r){}return n}(),Qr=ve(Qr=Ar.create)&&Qr,Xr=ve(Xr=_r.isArray)&&Xr,Zr=t.isFinite,ti=t.isNaN,ei=ve(ei=Ar.keys)&&ei,ni=Pr.max,ri=Pr.min,ii=t.parseInt,oi=Pr.random,ai={};ai[H]=_r,ai[B]=Cr,ai[q]=xr,ai[Y]=kr,ai[K]=Ar,ai[G]=Sr,ai[J]=Or,ai[Q]=Tr;var si={};si[H]=si[q]=si[G]={constructor:!0,toLocaleString:!0,toString:!0,valueOf:!0},si[B]=si[Q]={constructor:!0,toString:!0,valueOf:!0},si[W]=si[Y]=si[J]={constructor:!0,toString:!0},si[K]={constructor:!0},function(){for(var t=V.length;t--;){var e=V[t];for(var n in si)Br.call(si,n)&&!Br.call(si[n],e)&&(si[n][e]=!1)}}(),n.prototype=e.prototype;var ui=e.support={};!function(){var e=function(){this.x=1},n={0:1,length:1},r=[];e.prototype={valueOf:1,y:1};for(var i in new e)r.push(i);for(i in arguments);ui.argsClass=Ur.call(arguments)==z,ui.argsObject=arguments.constructor==Ar&&!(arguments instanceof _r),ui.enumErrorProps=Wr.call(Nr,"message")||Wr.call(Nr,"name"),ui.enumPrototypes=Wr.call(e,"prototype"),ui.funcDecomp=!ve(t.WinRTError)&&U.test(y),ui.funcNames="string"==typeof kr.name,ui.nonEnumArgs=0!=i,ui.nonEnumShadows=!/valueOf/.test(r),ui.ownLast="x"!=r[0],ui.spliceObjects=(Mr.splice.call(n,0,1),!n[0]),ui.unindexedChars="x"[0]+Ar("x")[0]!="xx";try{ui.nodeClass=!(Ur.call(document)==K&&!({toString:0}+""))}catch(o){ui.nodeClass=!0}}(1),e.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:j,variable:"",imports:{_:e}};var li=function(t){var e="var index, iterable = "+t.firstArg+", result = "+t.init+";\nif (!iterable) return result;\n"+t.top+";";t.array?(e+="\nvar length = iterable.length; index = -1;\nif ("+t.array+") {  ",ui.unindexedChars&&(e+="\n  if (isString(iterable)) {\n    iterable = iterable.split('')\n  }  "),e+="\n  while (++index < length) {\n    "+t.loop+";\n  }\n}\nelse {  "):ui.nonEnumArgs&&(e+="\n  var length = iterable.length; index = -1;\n  if (length && isArguments(iterable)) {\n    while (++index < length) {\n      index += '';\n      "+t.loop+";\n    }\n  } else {  "),ui.enumPrototypes&&(e+="\n  var skipProto = typeof iterable == 'function';\n  "),ui.enumErrorProps&&(e+="\n  var skipErrorProps = iterable === errorProto || iterable instanceof Error;\n  ");var n=[];if(ui.enumPrototypes&&n.push('!(skipProto && index == "prototype")'),ui.enumErrorProps&&n.push('!(skipErrorProps && (index == "message" || index == "name"))'),t.useHas&&t.keys)e+="\n  var ownIndex = -1,\n      ownProps = objectTypes[typeof iterable] && keys(iterable),\n      length = ownProps ? ownProps.length : 0;\n\n  while (++ownIndex < length) {\n    index = ownProps[ownIndex];\n",n.length&&(e+="    if ("+n.join(" && ")+") {\n  "),e+=t.loop+";    ",n.length&&(e+="\n    }"),e+="\n  }  ";else if(e+="\n  for (index in iterable) {\n",t.useHas&&n.push("hasOwnProperty.call(iterable, index)"),n.length&&(e+="    if ("+n.join(" && ")+") {\n  "),e+=t.loop+";    ",n.length&&(e+="\n    }"),e+="\n  }    ",ui.nonEnumShadows){for(e+="\n\n  if (iterable !== objectProto) {\n    var ctor = iterable.constructor,\n        isProto = iterable === (ctor && ctor.prototype),\n        className = iterable === stringProto ? stringClass : iterable === errorProto ? errorClass : toString.call(iterable),\n        nonEnum = nonEnumProps[className];\n      ",k=0;k<7;k++)e+="\n    index = '"+t.shadowedProps[k]+"';\n    if ((!(isProto && nonEnum[index]) && hasOwnProperty.call(iterable, index))",t.useHas||(e+=" || (!nonEnum[index] && iterable[index] !== objectProto[index])"),e+=") {\n      "+t.loop+";\n    }      ";e+="\n  }    "}return(t.array||ui.nonEnumArgs)&&(e+="\n}"),e+=t.bottom+";\nreturn result"};Qr||(b=function(){function e(){}return function(n){if(Ue(n)){e.prototype=n;var r=new e;e.prototype=null}return r||t.Object()}}());var ci=Jr?function(t,e){te.value=e,Jr(t,"__bindData__",te)}:ur;ui.argsClass||(be=function(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Br.call(t,"callee")&&!Wr.call(t,"callee")||!1});var pi=Xr||function(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Ur.call(t)==H||!1},hi=de({args:"object",init:"[]",top:"if (!(objectTypes[typeof object])) return result",loop:"result.push(index)"}),di=ei?function(t){return Ue(t)?ui.enumPrototypes&&"function"==typeof t||ui.nonEnumArgs&&t.length&&be(t)?hi(t):ei(t):[]}:hi,fi={args:"collection, callback, thisArg",top:"callback = callback && typeof thisArg == 'undefined' ? callback : baseCreateCallback(callback, thisArg, 3)",array:"typeof length == 'number'",keys:di,loop:"if (callback(iterable[index], index, collection) === false) return result"},mi={args:"object, source, guard",top:"var args = arguments,\n    argsIndex = 0,\n    argsLength = typeof guard == 'number' ? 2 : args.length;\nwhile (++argsIndex < argsLength) {\n  iterable = args[argsIndex];\n  if (iterable && objectTypes[typeof iterable]) {",keys:di,loop:"if (typeof result[index] == 'undefined') result[index] = iterable[index]",bottom:"  }\n}"},vi={top:"if (!objectTypes[typeof iterable]) return result;\n"+fi.top,array:!1},yi={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},gi=Oe(yi),bi=Or("("+di(gi).join("|")+")","g"),wi=Or("["+di(yi).join("")+"]","g"),_i=de(fi),Ci=de(mi,{top:mi.top.replace(";",";\nif (argsLength > 3 && typeof args[argsLength - 2] == 'function') {\n  var callback = baseCreateCallback(args[--argsLength - 1], args[argsLength--], 2);\n} else if (argsLength > 2 && typeof args[argsLength - 1] == 'function') {\n  callback = args[--argsLength];\n}"),loop:"result[index] = callback ? callback(result[index], iterable[index]) : iterable[index]"}),xi=de(mi),Ei=de(fi,vi,{useHas:!1}),ki=de(fi,vi);Fe(/x/)&&(Fe=function(t){return"function"==typeof t&&Ur.call(t)==Y});var Pi=Hr?function(t){if(!t||Ur.call(t)!=K||!ui.argsClass&&be(t))return!1;var e=t.valueOf,n=ve(e)&&(n=Hr(e))&&Hr(n);return n?t==n||Hr(t)==n:ye(t)}:ye,Si=pe(function(t,e,n){Br.call(t,n)?t[n]++:t[n]=1}),Ai=pe(function(t,e,n){(Br.call(t,n)?t[n]:t[n]=[]).push(e)}),Oi=pe(function(t,e,n){t[n]=e}),Ti=sn,Ii=tn,Mi=ve(Mi=xr.now)&&Mi||function(){return(new xr).getTime()},Ni=8==ii(S+"08")?ii:function(t,e){return ii(ze(t)?t.replace(R,""):t,e||0)};return e.after=$n,e.assign=Ci,e.at=Qe,e.bind=zn,e.bindAll=Hn,e.bindKey=Bn,e.chain=vr,e.compact=bn,e.compose=qn,e.constant=nr,e.countBy=Si,e.create=Ce,e.createCallback=rr,e.curry=Wn,e.debounce=Yn,e.defaults=xi,e.defer=Gn,e.delay=Kn,e.difference=wn,e.filter=tn,e.flatten=En,e.forEach=rn,e.forEachRight=on,e.forIn=Ei,e.forInRight=ke,e.forOwn=ki,e.forOwnRight=Pe,e.functions=Se,e.groupBy=Ai,e.indexBy=Oi,e.initial=Pn,e.intersection=Sn,e.invert=Oe,e.invoke=an,e.keys=di,e.map=sn,e.mapValues=Be,e.max=un,e.memoize=Jn,e.merge=qe,e.min=ln,e.omit=We,e.once=Qn,e.pairs=Ye,e.partial=Xn,e.partialRight=Zn,e.pick=Ge,e.pluck=Ti,e.property=lr,e.pull=Tn,e.range=In,e.reject=hn,e.remove=Mn,e.rest=Nn,e.shuffle=fn,e.sortBy=yn,e.tap=yr,e.throttle=tr,e.times=dr,e.toArray=gn,e.transform=Ke,e.union=Rn,e.uniq=Fn,e.values=Je,e.where=Ii,e.without=Un,e.wrap=er,e.xor=Dn,e.zip=Ln,e.zipObject=Vn,e.collect=sn,e.drop=Nn,e.each=rn,e.eachRight=on,e.extend=Ci,e.methods=Se,e.object=Vn,e.select=tn,e.tail=Nn,e.unique=Fn,e.unzip=Ln,ar(e),e.clone=we,e.cloneDeep=_e,e.contains=Xe,e.escape=ir,e.every=Ze,e.find=en,e.findIndex=_n,e.findKey=xe,e.findLast=nn,e.findLastIndex=Cn,e.findLastKey=Ee,e.has=Ae,e.identity=or,e.indexOf=kn,e.isArguments=be,e.isArray=pi,e.isBoolean=Te,e.isDate=Ie,e.isElement=Me,e.isEmpty=Ne,e.isEqual=je,e.isFinite=Re,e.isFunction=Fe,e.isNaN=De,e.isNull=Le,e.isNumber=Ve,e.isObject=Ue,e.isPlainObject=Pi,e.isRegExp=$e,e.isString=ze,e.isUndefined=He,e.lastIndexOf=On,e.mixin=ar,e.noConflict=sr,e.noop=ur,e.now=Mi,e.parseInt=Ni,e.random=cr,e.reduce=cn,e.reduceRight=pn,e.result=pr,e.runInContext=y,e.size=mn,e.some=vn,e.sortedIndex=jn,e.template=hr,e.unescape=fr,e.uniqueId=mr,e.all=Ze,e.any=vn,e.detect=en,e.findWhere=en,e.foldl=cn,e.foldr=pn,e.include=Xe,e.inject=cn,ar(function(){var t={};return ki(e,function(n,r){e.prototype[r]||(t[r]=n)}),t}(),!1),e.first=xn,e.last=An,e.sample=dn,e.take=xn,e.head=xn,ki(e,function(t,r){var i="sample"!==r;e.prototype[r]||(e.prototype[r]=function(e,r){var o=this.__chain__,a=t(this.__wrapped__,e,r);return o||null!=e&&(!r||i&&"function"==typeof e)?new n(a,o):a})}),e.VERSION="2.4.1",e.prototype.chain=gr,e.prototype.toString=br,e.prototype.value=wr,e.prototype.valueOf=wr,_i(["join","pop","shift"],function(t){var r=Mr[t];e.prototype[t]=function(){var t=this.__chain__,e=r.apply(this.__wrapped__,arguments);return t?new n(e,t):e}}),_i(["push","reverse","sort","unshift"],function(t){var n=Mr[t];e.prototype[t]=function(){return n.apply(this.__wrapped__,arguments),this}}),_i(["concat","slice","splice"],function(t){var r=Mr[t];e.prototype[t]=function(){return new n(r.apply(this.__wrapped__,arguments),this.__chain__)}}),ui.spliceObjects||_i(["pop","shift","splice"],function(t){var r=Mr[t],i="splice"==t;e.prototype[t]=function(){var t=this.__chain__,e=this.__wrapped__,o=r.apply(e,arguments);return 0===e.length&&delete e[0],t||i?new n(o,t):o}}),e}var g,b=[],w=[],_=0,C={},x=+new Date+"",E=75,P=40,S=" 	\f\n\r\u2028\u2029",A=/\b__p \+= '';/g,O=/\b(__p \+=) '' \+/g,T=/(__e\(.*?\)|\b__t\)) \+\n'';/g,I=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,M=/\w*$/,N=/^\s*function[ \n\r\t]+\w/,j=/<%=([\s\S]+?)%>/g,R=RegExp("^["+S+"]*0+(?=.$)"),F=/($^)/,U=/\bthis\b/,D=/['\n\r\t\u2028\u2029\\]/g,L=["Array","Boolean","Date","Error","Function","Math","Number","Object","RegExp","String","_","attachEvent","clearTimeout","isFinite","isNaN","parseInt","setTimeout"],V=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],$=0,z="[object Arguments]",H="[object Array]",B="[object Boolean]",q="[object Date]",W="[object Error]",Y="[object Function]",G="[object Number]",K="[object Object]",J="[object RegExp]",Q="[object String]",X={};X[Y]=!1,X[z]=X[H]=X[B]=X[q]=X[G]=X[K]=X[J]=X[Q]=!0;var Z={leading:!1,maxWait:0,trailing:!1},te={configurable:!1,enumerable:!1,value:null,writable:!1},ee={args:"",array:null,bottom:"",firstArg:"",init:"",keys:null,loop:"",shadowedProps:null,support:null,top:"",useHas:!1},ne={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},re={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},ie=ne[typeof window]&&window||this,oe=ne[typeof e]&&e&&!e.nodeType&&e,ae=ne[typeof t]&&t&&!t.nodeType&&t,se=ae&&ae.exports===oe&&oe,ue=ne[typeof n]&&n;!ue||ue.global!==ue&&ue.window!==ue||(ie=ue);var le=y();"function"==typeof i&&"object"==typeof i.amd&&i.amd?(ie._=le,i(function(){return le})):oe&&ae?se?(ae.exports=le)._=le:oe._=le:ie._=le}).call(this),o("undefined"!=typeof _?_:window._)}.call(n,void 0,void 0,void 0,void 0,function(t){e.exports=t})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],150:[function(t,e,n){(function(t){!function(t){if("function"==typeof bootstrap)bootstrap("promise",t);else if("object"==typeof n)e.exports=t();else if("function"==typeof define&&define.amd)define(t);else if("undefined"!=typeof ses){if(!ses.ok())return;ses.makeQ=t}else Q=t()}(function(){"use strict";function e(t){return function(){return G.apply(t,arguments)}}function n(t){return t===Object(t)}function r(t){return"[object StopIteration]"===ne(t)||t instanceof B}function i(t,e){if($&&e.stack&&"object"==typeof t&&null!==t&&t.stack&&-1===t.stack.indexOf(re)){for(var n=[],r=e;r;r=r.source)r.stack&&n.unshift(r.stack);n.unshift(t.stack);var i=n.join("\n"+re+"\n");t.stack=o(i)}}function o(t){for(var e=t.split("\n"),n=[],r=0;r<e.length;++r){var i=e[r];u(i)||a(i)||!i||n.push(i)}return n.join("\n")}function a(t){return-1!==t.indexOf("(module.js:")||-1!==t.indexOf("(node.js:")}function s(t){var e=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(t);if(e)return[e[1],Number(e[2])];var n=/at ([^ ]+):(\d+):(?:\d+)$/.exec(t);if(n)return[n[1],Number(n[2])];var r=/.*@(.+):(\d+)$/.exec(t);return r?[r[1],Number(r[2])]:void 0}function u(t){var e=s(t);if(!e)return!1;var n=e[0],r=e[1];return n===H&&r>=q&&se>=r}function l(){if($)try{throw new Error}catch(t){var e=t.stack.split("\n"),n=e[0].indexOf("@")>0?e[1]:e[2],r=s(n);if(!r)return;return H=r[0],r[1]}}function c(t,e,n){return function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(e+" is deprecated, use "+n+" instead.",new Error("").stack),t.apply(t,arguments)}}function p(t){return g(t)?t:b(t)?A(t):S(t)}function h(){function t(t){e=t,o.source=t,J(n,function(e,n){Y(function(){t.promiseDispatch.apply(t,n)})},void 0),n=void 0,r=void 0}var e,n=[],r=[],i=Z(h.prototype),o=Z(m.prototype);if(o.promiseDispatch=function(t,i,o){var a=K(arguments);n?(n.push(a),"when"===i&&o[1]&&r.push(o[1])):Y(function(){e.promiseDispatch.apply(e,a)})},o.valueOf=function(){if(n)return o;var t=y(e);return g(t)&&(e=t),t},o.inspect=function(){return e?e.inspect():{state:"pending"}},p.longStackSupport&&$)try{throw new Error}catch(a){o.stack=a.stack.substring(a.stack.indexOf("\n")+1)}return i.promise=o,i.resolve=function(n){e||t(p(n))},i.fulfill=function(n){e||t(S(n))},i.reject=function(n){e||t(P(n))},i.notify=function(t){e||J(r,function(e,n){Y(function(){n(t)})},void 0)},i}function d(t){if("function"!=typeof t)throw new TypeError("resolver must be a function.");var e=h();try{t(e.resolve,e.reject,e.notify)}catch(n){e.reject(n)}return e.promise}function f(t){return d(function(e,n){for(var r=0,i=t.length;i>r;r++)p(t[r]).then(e,n)})}function m(t,e,n){void 0===e&&(e=function(t){return P(new Error("Promise does not support operation: "+t))}),void 0===n&&(n=function(){return{state:"unknown"}});var r=Z(m.prototype);if(r.promiseDispatch=function(n,i,o){var a;try{a=t[i]?t[i].apply(r,o):e.call(r,i,o)}catch(s){a=P(s)}n&&n(a)},r.inspect=n,n){var i=n();"rejected"===i.state&&(r.exception=i.reason),r.valueOf=function(){var t=n();return"pending"===t.state||"rejected"===t.state?r:t.value}}return r}function v(t,e,n,r){return p(t).then(e,n,r)}function y(t){if(g(t)){var e=t.inspect();if("fulfilled"===e.state)return e.value}return t}function g(t){return n(t)&&"function"==typeof t.promiseDispatch&&"function"==typeof t.inspect}function b(t){return n(t)&&"function"==typeof t.then}function w(t){return g(t)&&"pending"===t.inspect().state}function _(t){return!g(t)||"fulfilled"===t.inspect().state}function C(t){return g(t)&&"rejected"===t.inspect().state}function x(){ie.length=0,oe.length=0,ae||(ae=!0)}function E(t,e){ae&&(oe.push(t),ie.push(e&&"undefined"!=typeof e.stack?e.stack:"(no stack) "+e))}function k(t){if(ae){var e=Q(oe,t);-1!==e&&(oe.splice(e,1),ie.splice(e,1))}}function P(t){var e=m({when:function(e){return e&&k(this),e?e(t):this}},function(){return this},function(){return{state:"rejected",reason:t}});return E(e,t),e}function S(t){return m({when:function(){return t},get:function(e){return t[e]},set:function(e,n){t[e]=n},"delete":function(e){delete t[e]},post:function(e,n){return null===e||void 0===e?t.apply(void 0,n):t[e].apply(t,n)},apply:function(e,n){return t.apply(e,n)},keys:function(){return ee(t)}},void 0,function(){return{state:"fulfilled",value:t}})}function A(t){var e=h();return Y(function(){try{t.then(e.resolve,e.reject,e.notify)}catch(n){e.reject(n)}}),e.promise}function O(t){return m({isDef:function(){}},function(e,n){return R(t,e,n)},function(){return p(t).inspect()})}function T(t,e,n){return p(t).spread(e,n)}function I(t){return function(){function e(t,e){var a;if("undefined"==typeof StopIteration){try{a=n[t](e)}catch(s){return P(s)}return a.done?a.value:v(a.value,i,o)}try{a=n[t](e)}catch(s){return r(s)?s.value:P(s)}return v(a,i,o)}var n=t.apply(this,arguments),i=e.bind(e,"next"),o=e.bind(e,"throw");return i()}}function M(t){p.done(p.async(t)())}function N(t){throw new B(t)}function j(t){return function(){return T([this,F(arguments)],function(e,n){return t.apply(e,n)})}}function R(t,e,n){return p(t).dispatch(e,n)}function F(t){return v(t,function(t){var e=0,n=h();return J(t,function(r,i,o){var a;g(i)&&"fulfilled"===(a=i.inspect()).state?t[o]=a.value:(++e,v(i,function(r){t[o]=r,0===--e&&n.resolve(t)},n.reject,function(t){n.notify({index:o,value:t})}))},void 0),0===e&&n.resolve(t),n.promise})}function U(t){return v(t,function(t){return t=X(t,p),v(F(X(t,function(t){return v(t,W,W)})),function(){return t})})}function D(t){return p(t).allSettled()}function L(t,e){return p(t).then(void 0,void 0,e)}function V(t,e){return p(t).nodeify(e)}var $=!1;try{throw new Error}catch(z){$=!!z.stack}var H,B,q=l(),W=function(){},Y=function(){function e(){for(;n.next;){n=n.next;var t=n.task;n.task=void 0;var r=n.domain;r&&(n.domain=void 0,r.enter());try{t()}catch(o){if(a)throw r&&r.exit(),setTimeout(e,0),r&&r.enter(),o;setTimeout(function(){throw o},0)}r&&r.exit()}i=!1}var n={task:void 0,next:null},r=n,i=!1,o=void 0,a=!1;if(Y=function(e){r=r.next={task:e,domain:a&&t.domain,next:null},i||(i=!0,o())},"undefined"!=typeof t&&t.nextTick)a=!0,o=function(){t.nextTick(e)};else if("function"==typeof setImmediate)o="undefined"!=typeof window?setImmediate.bind(window,e):function(){setImmediate(e)};else if("undefined"!=typeof MessageChannel){var s=new MessageChannel;s.port1.onmessage=function(){o=u,s.port1.onmessage=e,e()};var u=function(){s.port2.postMessage(0)};o=function(){setTimeout(e,0),u()}}else o=function(){setTimeout(e,0)};return Y}(),G=Function.call,K=e(Array.prototype.slice),J=e(Array.prototype.reduce||function(t,e){var n=0,r=this.length;if(1===arguments.length)for(;;){if(n in this){e=this[n++];break}if(++n>=r)throw new TypeError}for(;r>n;n++)n in this&&(e=t(e,this[n],n));return e}),Q=e(Array.prototype.indexOf||function(t){for(var e=0;e<this.length;e++)if(this[e]===t)return e;return-1}),X=e(Array.prototype.map||function(t,e){var n=this,r=[];return J(n,function(i,o,a){r.push(t.call(e,o,a,n))},void 0),r}),Z=Object.create||function(t){function e(){}return e.prototype=t,new e},te=e(Object.prototype.hasOwnProperty),ee=Object.keys||function(t){var e=[];for(var n in t)te(t,n)&&e.push(n);return e},ne=e(Object.prototype.toString);B="undefined"!=typeof ReturnValue?ReturnValue:function(t){this.value=t};var re="From previous event:";p.resolve=p,p.nextTick=Y,p.longStackSupport=!1,p.defer=h,h.prototype.makeNodeResolver=function(){var t=this;return function(e,n){e?t.reject(e):t.resolve(arguments.length>2?K(arguments,1):n)}},p.Promise=d,p.promise=d,d.race=f,d.all=F,d.reject=P,d.resolve=p,p.passByCopy=function(t){return t},m.prototype.passByCopy=function(){return this},p.join=function(t,e){return p(t).join(e)},m.prototype.join=function(t){return p([this,t]).spread(function(t,e){if(t===e)return t;throw new Error("Can't join: not the same: "+t+" "+e)})},p.race=f,m.prototype.race=function(){return this.then(p.race)},p.makePromise=m,m.prototype.toString=function(){return"[object Promise]"},m.prototype.then=function(t,e,n){function r(e){try{return"function"==typeof t?t(e):e}catch(n){return P(n)}}function o(t){if("function"==typeof e){i(t,s);try{return e(t)}catch(n){return P(n)}}return P(t)}function a(t){return"function"==typeof n?n(t):t}var s=this,u=h(),l=!1;return Y(function(){s.promiseDispatch(function(t){l||(l=!0,u.resolve(r(t)))},"when",[function(t){l||(l=!0,u.resolve(o(t)))}])}),s.promiseDispatch(void 0,"when",[void 0,function(t){var e,n=!1;try{e=a(t)}catch(r){if(n=!0,!p.onerror)throw r;p.onerror(r)}n||u.notify(e)}]),u.promise},p.when=v,m.prototype.thenResolve=function(t){return this.then(function(){return t})},p.thenResolve=function(t,e){return p(t).thenResolve(e)},m.prototype.thenReject=function(t){return this.then(function(){throw t})},p.thenReject=function(t,e){return p(t).thenReject(e)},p.nearer=y,p.isPromise=g,p.isPromiseAlike=b,p.isPending=w,m.prototype.isPending=function(){return"pending"===this.inspect().state},p.isFulfilled=_,m.prototype.isFulfilled=function(){return"fulfilled"===this.inspect().state},p.isRejected=C,m.prototype.isRejected=function(){return"rejected"===this.inspect().state};var ie=[],oe=[],ae=!0;p.resetUnhandledRejections=x,p.getUnhandledReasons=function(){return ie.slice()},p.stopUnhandledRejectionTracking=function(){x(),ae=!1},x(),p.reject=P,p.fulfill=S,p.master=O,p.spread=T,m.prototype.spread=function(t,e){return this.all().then(function(e){return t.apply(void 0,e)},e)},p.async=I,p.spawn=M,p["return"]=N,p.promised=j,p.dispatch=R,m.prototype.dispatch=function(t,e){var n=this,r=h();return Y(function(){n.promiseDispatch(r.resolve,t,e)}),r.promise},p.get=function(t,e){return p(t).dispatch("get",[e])},m.prototype.get=function(t){return this.dispatch("get",[t])},p.set=function(t,e,n){return p(t).dispatch("set",[e,n])},m.prototype.set=function(t,e){return this.dispatch("set",[t,e])},p.del=p["delete"]=function(t,e){return p(t).dispatch("delete",[e])},m.prototype.del=m.prototype["delete"]=function(t){return this.dispatch("delete",[t])},p.mapply=p.post=function(t,e,n){return p(t).dispatch("post",[e,n])},m.prototype.mapply=m.prototype.post=function(t,e){return this.dispatch("post",[t,e])},p.send=p.mcall=p.invoke=function(t,e){return p(t).dispatch("post",[e,K(arguments,2)])},m.prototype.send=m.prototype.mcall=m.prototype.invoke=function(t){return this.dispatch("post",[t,K(arguments,1)])},p.fapply=function(t,e){return p(t).dispatch("apply",[void 0,e])},m.prototype.fapply=function(t){return this.dispatch("apply",[void 0,t])},p["try"]=p.fcall=function(t){return p(t).dispatch("apply",[void 0,K(arguments,1)])},m.prototype.fcall=function(){return this.dispatch("apply",[void 0,K(arguments)])},p.fbind=function(t){var e=p(t),n=K(arguments,1);return function(){return e.dispatch("apply",[this,n.concat(K(arguments))])}},m.prototype.fbind=function(){var t=this,e=K(arguments);return function(){return t.dispatch("apply",[this,e.concat(K(arguments))])}},p.keys=function(t){return p(t).dispatch("keys",[])},m.prototype.keys=function(){return this.dispatch("keys",[])},p.all=F,m.prototype.all=function(){return F(this)},p.allResolved=c(U,"allResolved","allSettled"),m.prototype.allResolved=function(){return U(this)},p.allSettled=D,m.prototype.allSettled=function(){return this.then(function(t){return F(X(t,function(t){function e(){return t.inspect()}return t=p(t),t.then(e,e)}))})},p.fail=p["catch"]=function(t,e){return p(t).then(void 0,e)},m.prototype.fail=m.prototype["catch"]=function(t){return this.then(void 0,t)},p.progress=L,m.prototype.progress=function(t){return this.then(void 0,void 0,t)},p.fin=p["finally"]=function(t,e){return p(t)["finally"](e)},m.prototype.fin=m.prototype["finally"]=function(t){return t=p(t),this.then(function(e){return t.fcall().then(function(){return e})},function(e){return t.fcall().then(function(){throw e})})},p.done=function(t,e,n,r){return p(t).done(e,n,r)},m.prototype.done=function(e,n,r){var o=function(t){Y(function(){if(i(t,a),!p.onerror)throw t;p.onerror(t)})},a=e||n||r?this.then(e,n,r):this;"object"==typeof t&&t&&t.domain&&(o=t.domain.bind(o)),a.then(void 0,o)},p.timeout=function(t,e,n){return p(t).timeout(e,n)},m.prototype.timeout=function(t,e){var n=h(),r=setTimeout(function(){n.reject(new Error(e||"Timed out after "+t+" ms"))},t);return this.then(function(t){clearTimeout(r),n.resolve(t)},function(t){clearTimeout(r),n.reject(t)},n.notify),n.promise},p.delay=function(t,e){return void 0===e&&(e=t,t=void 0),p(t).delay(e)
},m.prototype.delay=function(t){return this.then(function(e){var n=h();return setTimeout(function(){n.resolve(e)},t),n.promise})},p.nfapply=function(t,e){return p(t).nfapply(e)},m.prototype.nfapply=function(t){var e=h(),n=K(t);return n.push(e.makeNodeResolver()),this.fapply(n).fail(e.reject),e.promise},p.nfcall=function(t){var e=K(arguments,1);return p(t).nfapply(e)},m.prototype.nfcall=function(){var t=K(arguments),e=h();return t.push(e.makeNodeResolver()),this.fapply(t).fail(e.reject),e.promise},p.nfbind=p.denodeify=function(t){var e=K(arguments,1);return function(){var n=e.concat(K(arguments)),r=h();return n.push(r.makeNodeResolver()),p(t).fapply(n).fail(r.reject),r.promise}},m.prototype.nfbind=m.prototype.denodeify=function(){var t=K(arguments);return t.unshift(this),p.denodeify.apply(void 0,t)},p.nbind=function(t,e){var n=K(arguments,2);return function(){function r(){return t.apply(e,arguments)}var i=n.concat(K(arguments)),o=h();return i.push(o.makeNodeResolver()),p(r).fapply(i).fail(o.reject),o.promise}},m.prototype.nbind=function(){var t=K(arguments,0);return t.unshift(this),p.nbind.apply(void 0,t)},p.nmapply=p.npost=function(t,e,n){return p(t).npost(e,n)},m.prototype.nmapply=m.prototype.npost=function(t,e){var n=K(e||[]),r=h();return n.push(r.makeNodeResolver()),this.dispatch("post",[t,n]).fail(r.reject),r.promise},p.nsend=p.nmcall=p.ninvoke=function(t,e){var n=K(arguments,2),r=h();return n.push(r.makeNodeResolver()),p(t).dispatch("post",[e,n]).fail(r.reject),r.promise},m.prototype.nsend=m.prototype.nmcall=m.prototype.ninvoke=function(t){var e=K(arguments,1),n=h();return e.push(n.makeNodeResolver()),this.dispatch("post",[t,e]).fail(n.reject),n.promise},p.nodeify=V,m.prototype.nodeify=function(t){return t?void this.then(function(e){Y(function(){t(null,e)})},function(e){Y(function(){t(e)})}):this};var se=l();return p})}).call(this,t("_process"))},{_process:135}],151:[function(t,e){"use strict";function n(t){this.rpcClient=t}var r=["getCreditCards","unlockCreditCard","sendAnalyticsEvents"];r.forEach(function(t){n.prototype[t]=function(){var e=[],n=Array.prototype.slice.call(arguments),r=n.splice(-1)[0];e=[t,n],"function"==typeof r?e.push(r):n.push(r),this.rpcClient.invoke.apply(this.rpcClient,e)}}),e.exports=n},{}],152:[function(t,e){"use strict";function n(){}var r=t("_"),i=t("./credit-card-type");n.ALL_CARD_TYPES=[new i({cardType:"Visa",cssClass:"visa",creditCardNumberRegex:/^4[0-9][\s\d]*$/}),new i({cardType:"MasterCard",cssClass:"master-card",creditCardNumberRegex:/^5[1-5][\s\d]*$/}),new i({cardType:"American Express",cssClass:"american-express",creditCardNumberRegex:/^3[47][\s\d]*$/,isAmex:!0}),new i({cardType:"DinersClub",cssClass:"diners-club",creditCardNumberRegex:/^3(?:0[0-5]|[68][0-9])[\s\d]*$/}),new i({cardType:"Discover",cssClass:"discover",creditCardNumberRegex:/^6(?:011|5[0-9]{2})[\s\d]*$/}),new i({cardType:"JCB",cssClass:"jcb",creditCardNumberRegex:/^(?:2131|1800|35)[\s\d]*$/})],n.UNKNOWN_CARD_TYPE=new i({cssClass:""}),n.identify=function(t){var e;return t?(e=r.find(n.ALL_CARD_TYPES,function(e){return e.testCardNumber(t)}),e||n.UNKNOWN_CARD_TYPE):n.UNKNOWN_CARD_TYPE},n.identifyByCardType=function(t){var e=r.find(n.ALL_CARD_TYPES,function(e){return e.cardType===t});return e||n.UNKNOWN_CARD_TYPE},e.exports=n},{"./credit-card-type":153,_:149}],153:[function(t,e){"use strict";function n(t){var e=t||{};this.cardType=e.cardType||"",this.cssClass=e.cssClass,this.creditCardNumberRegex=e.creditCardNumberRegex,this.isAmex=e.isAmex||!1}var r=t("_");n.prototype.testCardNumber=function(t){return this.creditCardNumberRegex&&r.isRegExp(this.creditCardNumberRegex)&&this.creditCardNumberRegex.test(t)},n.prototype.getCssClass=function(){return this.cssClass},e.exports=n},{_:149}],154:[function(t,e){"use strict";function n(t,e){this.node=t,this.validators=e}var r=t("_");n.prototype.isValid=function(t){var e=this.getValue();return r.chain(this.validators).map(function(n){return n.validate(e,t)}).all().value()},n.prototype.setValue=function(t){this.node.value=t},n.prototype.getValue=function(){return this.node.value},e.exports=n},{_:149}],155:[function(t,e){"use strict";function n(t){var e="20";return t=t.match(e)&&t!==e?t:e+t,parseInt(t,10)}function r(t){this.predicates=i.isArray(t)?t:[t]}var i=t("_"),o=t("../util/date-manager"),a=/^\-?([0-9]+(\.[0-9]+)?)$/,s=(new Date).getFullYear();r.prototype.validate=function(t,e){var n;for(n=0;n<this.predicates.length;n++)if(this.predicates[n](t,e)===!1)return!1;return!0},r.isNumeric=function(t){return i.isNumber(t)?i.isFinite(t):i.isString(t)?a.test(t):!1},r.isLength=function(t){return function(e){return i.isPlainObject(t)?t.hasOwnProperty("min")&&e.length<t.min?!1:t.hasOwnProperty("max")&&e.length>t.max?!1:void 0:t===e.length}},r.isExpirationDate=function(t,e){var r=o.parseDate(t),i=e&&e.partial||!1,a=parseInt(r.month,10),u=a>0&&13>a,l=n(r.year),c=l>=s&&s+10>=l,p=i&&/20[1-3]$|^20$/.test(l.toString()),h=c||p;return u&&h},r.isCreditCardNumber=function(t){var e,n;return t=t.toString(),e=i.chain(t).toArray().reverse().map(function(t){return parseInt(t,10)}).filter(function(t){return i.isNumber(t)&&!i.isNaN(t)}).value(),n=i.reduce(e,function(t,e,n){return n%2!==0?t+(e>=5?2*e-9:2*e):t+e}),n%10===0},e.exports={CreditCardNumberValidator:new r(r.isCreditCardNumber),ExpirationDateValidator:new r(r.isExpirationDate),PostalCodeValidator:new r(r.isLength({max:8,min:4})),CvvValidator:new r([r.isLength({max:4,min:3}),r.isNumeric]),Validator:r}},{"../util/date-manager":174,_:149}],156:[function(t,e){"use strict";function n(t){this.settings=t,this.root=t.root||window,this.target=t.target||window.parent,this.container=t.container,this.bus=new o.MessageBus(this.root),this.rpcClient=new o.RPCClient(this.bus,this.target),this.rpcServer=new o.RPCServer(this.bus),this.apiProxyClient=new s(this.rpcClient),this.sharedCustomerIdentificationService=new u}var r=t("_"),i=t("braintree-api"),o=t("braintree-rpc"),a=t("braintree-coinbase"),s=t("./api-proxy-client"),u=t("./session/shared-customer-identification-service"),l=t("../shared/paypal-service"),c=t("braintree-paypal/src/shared/util/browser");n.prototype.initialize=function(){var t=this.sharedCustomerIdentificationService.getIdentifier();this.bus.send(this.target,"ready"),t&&this.rpcClient.invoke("receiveSharedCustomerIdentifier",[t]),this.rpcClient.invoke("getConfiguration",[],r.bind(this.completeInitialization,this))},n.prototype.completeInitialization=function(t){this.clientToken=i.parseClientToken(t.clientToken),this.apiClient=i.configure({clientToken:this.clientToken,integration:"dropin"}),this.hasPaypalEnabled=!1,this.clientToken&&this.clientToken.paypalEnabled&&(t.merchantHttps||this.clientToken.paypal.allowHttp)&&(this.hasPaypalEnabled=!0,c.isPopupSupported()&&this.rpcClient.invoke("getPayPalOptions",[],r.bind(this.paypalOptionsReceived,this))),this.hasCoinbaseEnabled=this.clientToken.coinbaseEnabled,this.hasCoinbaseEnabled&&(this.coinbaseIntegration=a.create({coinbase:{button:"coinbase-container"},apiClient:this.apiClient,configuration:this.clientToken}),null==this.coinbaseIntegration&&(this.hasCoinbaseEnabled=!1))},n.prototype.paypalOptionsReceived=function(t){var e=this;t=t||{},t.onSuccess=function(t){e.rpcClient.invoke("receivePayPalData",[t])},this.ppClient=new l({clientToken:this.clientToken,paypal:t})},e.exports=n},{"../shared/paypal-service":183,"./api-proxy-client":151,"./session/shared-customer-identification-service":171,_:149,"braintree-api":18,"braintree-coinbase":39,"braintree-paypal/src/shared/util/browser":121,"braintree-rpc":129}],157:[function(t,e){"use strict";var n=t("_"),r=t("../../shared/router"),i=t("./views/add-payment-method-view"),o=t("./views/show-payment-method-view"),a=t("../../shared/views/cancel-popup-view"),s=r.extend({routes:{addPaymentMethod:"addPaymentMethod","showPaymentMethod(/:status)":"showPaymentMethod"},initialize:function(t){return this.root=t.root,this.container=t.container,this.setViews(),this.root.rpcServer.define("requestNonce",n.bind(this.handleNonceRequest,this)),this},setViews:function(){this.views={addPaymentMethod:new i({root:this.root}),showPaymentMethod:new o({root:this.root})},n.each(this.views,function(t){this.container.appendChild(t.el)},this),this.setGlobalViews()},setGlobalViews:function(){return new a},addPaymentMethod:function(){this.setCurrentView("addPaymentMethod")},showPaymentMethod:function(){this.setCurrentView("showPaymentMethod")},handleNonceRequest:function(t){this.views[this.currentView].handleRequestNonce(t)}});e.exports=s},{"../../shared/router":184,"../../shared/views/cancel-popup-view":186,"./views/add-payment-method-view":159,"./views/show-payment-method-view":161,_:149}],158:[function(t,e){"use strict";function n(t){i.call(this,t),this.initializedWithIdentifier=!1,this.paymentMethodsCollection=new o,this.router=new s({root:this,container:this.container}),this.paymentMethodsCollection.on("reset",r.bind(this.onCollectionReset,this))}var r=t("_"),i=t("../frame"),o=t("../../shared/collections/payment-method-collection"),a=t("./views/inline-frame-view"),s=t("./inline-frame-router"),u=t("../../shared/constants");n.prototype=Object.create(i.prototype),n.prototype.constructor=n,n.prototype.initialize=function(){i.prototype.initialize.call(this),this.rpcServer.define("receiveNewPaymentMethod",r.bind(this.receiveNewPaymentMethod,this)),this.rpcServer.define("selectPaymentMethod",r.bind(this.receiveSelectedPaymentMethod,this)),this.inlineFrameView=new a({rpcClient:this.rpcClient,rpcServer:this.rpcServer,container:this.container})},n.prototype.completeInitialization=function(t){i.prototype.completeInitialization.call(this,t),this.apiClient.getCreditCards(r.bind(this.receivePaymentMethods,this))},n.prototype.onCollectionReset=function(){var t=this.paymentMethodsCollection.getActiveModel();t.get("isLocked")||this.rpcClient.invoke("sendUnlockedNonce",[t.toJSON()])},n.prototype.receivePaymentMethods=function(t,e){var n=new RegExp(u.PAYMENT_METHOD_TYPES.join("|")),i=r.filter(e,function(t){return n.test(t.type)});i&&i.length?(this.paymentMethodsCollection.reset(i),this.router.navigate("showPaymentMethod")):this.router.navigate("addPaymentMethod"),this.inlineFrameView.render()},n.prototype.receiveNewPaymentMethod=function(t){var e,n="showPaymentMethod",r=this.router.currentView===n;this.paymentMethodsCollection.add(t),this.router.navigate(n,{silent:r}),e=this.paymentMethodsCollection.getActiveModelAttr("type"),"CreditCard"===e||r||requestAnimationFrame(function(){this.inlineFrameView.updateHeight()},this)},n.prototype.receiveSelectedPaymentMethod=function(t){this.paymentMethodsCollection.setActiveModel(t)},e.exports={Manager:n}},{"../../shared/collections/payment-method-collection":178,"../../shared/constants":179,"../frame":156,"./inline-frame-router":157,"./views/inline-frame-view":160,_:149}],159:[function(t,e){"use strict";var n=t("backbone"),r=t("../../../shared/views/payment-method-form-view"),i=t("../../../templates/inline/add-payment-method.hbs"),o=t("../../../shared/paypal-integration-manager"),a="hidden",s=n.View.extend({template:i,className:"add-payment-method-view "+a,events:{"click button.paypal":"handlePayPalClick"},initialize:function(t){this.root=t.root,this.paypalIntegration=new o(this.root)},render:function(){this.$el.html(this.template({paypalEnabled:this.root.hasPaypalEnabled,coinbaseEnabled:this.root.hasCoinbaseEnabled})),this.$formContainer=this.$el.find(".form-container"),this.formView=new r({root:this.root}),this.$formContainer.html(this.formView.render().el),this.show()},handlePayPalClick:function(){this.paypalIntegration.run()},handleRequestNonce:function(t){this.formView.successCallback=t,this.formView.submit()},hide:function(){this.$el.addClass(a)},show:function(){this.$el.removeClass(a)},destroy:function(){this.$el.empty()}});e.exports=s},{"../../../shared/paypal-integration-manager":182,"../../../shared/views/payment-method-form-view":190,"../../../templates/inline/add-payment-method.hbs":193,backbone:2}],160:[function(t,e){"use strict";function n(t){this.rpcClient=t.rpcClient,this.rpcServer=t.rpcServer,this.container=t.container,this.initialize()}var r=t("_"),i=window,o=$(i),a=$("body"),s="is-loading initial-inline-frame-loading";n.prototype.initialize=function(){this.setEvents()},n.prototype.setEvents=function(){o.on("resize",r.bind(this.handleViewportUpdate,this)),this.rpcServer.define("clearLoadingState",r.bind(this.removeLoadingState,this))},n.prototype.updateHeight=function(){var t=this.container.offsetHeight+2;this.rpcClient.invoke("setInlineFrameHeight",[t])},n.prototype.handleViewportUpdate=r.debounce(function(){this.updateHeight()},160),n.prototype.removeLoadingState=function(){a.removeClass(s)},n.prototype.render=function(){r.delay(r.bind(function(){this.removeLoadingState(),requestAnimationFrame(function(){this.updateHeight()},this)},this),16)},e.exports=n},{_:149}],161:[function(t,e){"use strict";var n=t("_"),r=t("backbone"),i=t("../../util/dropin-util"),o=t("../../../shared/models/form-card-model"),a=t("../../../shared/views/cvv-input-view"),s=t("../../../shared/views/postal-code-input-view"),u=t("../../../templates/inline/show-payment-method.hbs"),l="hidden",c=r.View.extend({template:u,className:"show-payment-method-view "+l,events:{"click #choose-payment-method":"handleChoosePaymentClick"},fields:{cvv:{challenge:"cvv",container:".cvv-label",constructor:a},postalCode:{challenge:"postal_code",container:".postal-code-label",constructor:s}},initialize:function(t){this.root=t.root,this.collection=t.root.paymentMethodsCollection,this.fieldViews=[]},setEvents:function(){this.isBoundToCollection||(this.isBoundToCollection=!0,this.listenTo(this.collection,"change:activeModel",this.render))},getViewModel:function(){var t=this.model.toJSON(),e=t.details&&t.details.email;return e&&(t.details.truncatedEmail=i.truncateEmail(e,i.getMaxCharLength())),t},render:function(){var t;this.model=this.collection.getActiveModel(),t=this.template({paymentMethod:this.getViewModel()}),this.$el.html(t),this.model.get("isLocked")&&this.setValidations(),this.show(),this.setEvents()},setValidations:function(){this.formCardModel=new o,this.challenges=this.model.get("securityQuestions"),this.fieldViews.length&&this.destroyFieldViews(),n.each(this.fields,function(t){var e;n.contains(this.challenges,t.challenge)&&(e=new t.constructor({el:this.$el.find(t.container),model:this.formCardModel}),this.fieldViews.push(e))},this)},handleChoosePaymentClick:function(t){t.preventDefault(),this.root.rpcClient.invoke("selectPaymentMethod",[this.root.paymentMethodsCollection])},isValid:function(){return n.chain(this.fieldViews).filter(function(t){return!t.isValid()}).value().length<1},handleRequestNonce:function(t){var e;this.isValid()&&(e={cvv:this.formCardModel.get("cvv")},n.contains(this.challenges,"postal_code")&&(e.postal_code=this.formCardModel.get("postalCode")),this.root.apiProxyClient.unlockCreditCard(this.model,e,function(e,n){t(n.nonce)}))},hide:function(){this.$el.addClass(l)},show:function(){this.$el.removeClass(l)},destroyFieldViews:function(){n.each(this.fieldViews,function(t){t.destroy()}),this.fieldViews=[]},destroy:function(){this.destroyFieldViews(),this.$el.empty()}});e.exports=c},{"../../../shared/models/form-card-model":180,"../../../shared/views/cvv-input-view":188,"../../../shared/views/postal-code-input-view":191,"../../../templates/inline/show-payment-method.hbs":194,"../../util/dropin-util":176,_:149,backbone:2}],162:[function(t,e){"use strict";var n=t("q"),r=t("_"),i=t("../../shared/router"),o=t("../../shared/views/cancel-popup-view"),a=t("./views/modal-view"),s=t("./views/list-payment-methods-view"),u=t("./views/add-payment-method-view"),l=i.extend({routes:{listPaymentMethods:"listPaymentMethods",addPaymentMethod:"addPaymentMethod"},initialize:function(t){var e=t.root;return this.viewContainer=new a({root:e}),this.views={listPaymentMethods:new s({root:e}),addPaymentMethod:new u({root:e})},r.each(this.views,function(t){this.viewContainer.$modalBody.append(t.el)},this),this.setGlobalViews(),this},setGlobalViews:function(){return new o},transitionViews:function(t){var e=this.views[this.currentView],i=n.defer();return e&&r.isFunction(e.renderOut)?e.renderOut().then(function(){i.resolve(t)}):i.resolve(t),i.promise},listPaymentMethods:function(){this.transitionViews("listPaymentMethods").then(r.bind(this.setCurrentView,this))},addPaymentMethod:function(){this.transitionViews("addPaymentMethod").then(r.bind(this.setCurrentView,this))},reset:function(){r.each(this.views,function(t){t.reset()}),this.currentView=null}});e.exports=l},{"../../shared/router":184,"../../shared/views/cancel-popup-view":186,"./views/add-payment-method-view":164,"./views/list-payment-methods-view":166,"./views/modal-view":167,_:149,q:150}],163:[function(t,e){"use strict";function n(t){a.call(this,t),this.paymentMethods=new s,this.router=new u({root:this}),d.on("keyup",i.bind(this.handleKeyup,this)),this.$container=d.find("#container"),this.rpcServer.define("open",i.bind(this.open,this))}var r=t("q"),i=t("_"),o=t("../util/dropin-util"),a=t("../frame"),s=t("../../shared/collections/payment-method-collection"),u=t("./modal-frame-router"),l="open",c="out",p="out-success",h=o.getPrefixedTransitionEnd(),d=$("body");n.prototype=Object.create(a.prototype),n.prototype.constructor=n,n.prototype.initialize=function(){a.prototype.initialize.call(this),this.isOpen=!1,this.rpcServer.define("selectPaymentMethod",i.bind(this.setSelectPaymentMethodView,this)),this.rpcServer.define("modalViewClose",i.bind(this.close,this))},n.prototype.completeInitialization=function(t){a.prototype.completeInitialization.call(this,t)},n.prototype.handleKeyup=function(t){27===t.which&&this.close({isCancel:!0})},n.prototype.setSelectPaymentMethodView=function(t){this.paymentMethods.reset(t)},n.prototype.open=function(t){this.isOpen=!0,requestAnimationFrame(function(){d.addClass(l),t(),i.defer(this.router.navigate,"listPaymentMethods")},this)},n.prototype.afterClose=function(t){d.removeClass(t),this.router.reset(),this.isOpen=!1,this.rpcClient.invoke("closeDropInModal")},n.prototype.renderOutInnerContent=function(t){var e=r.defer();return d.addClass(t.className),i.delay(e.resolve,t.delay,t),e.promise},n.prototype.renderOutModal=function(t){var e=i.bind(function(){this.afterClose(t.className)},this);Modernizr.csstransitions?this.$container.one(h,e):this.afterClose(t.className),d.removeClass(l)},n.prototype.close=function(t){var e,n,r;this.isOpen&&(e=t&&t.isCancel,n=Modernizr.csstransitions?600:16,r={className:e?c:p,delay:e?n:220},this.renderOutInnerContent(r).then(i.bind(this.renderOutModal,this)))},e.exports=n},{"../../shared/collections/payment-method-collection":178,"../frame":156,"../util/dropin-util":176,"./modal-frame-router":162,_:149,q:150}],164:[function(t,e){"use strict";var n=t("_"),r=t("./base-modal-view"),i=t("../../../shared/models/form-card-model"),o=t("../../../shared/views/payment-method-form-view"),a=t("../../../templates/modal/add-payment-method.hbs"),s=t("../../../shared/paypal-integration-manager"),u="is-active",l=".payment-method-add",c="button.paypal, button#coinbase-container",p=r.extend({template:a,className:"add-payment-method-view modal-frame-view ",events:function(){var t={"keyup input":"handleInputChange","click button.paypal":"handlePayPalClick"};return t["click "+l]="triggerFormSubmit",t["click .use-saved-payment-method-link"]="navigateToListView",t},initialize:function(t){this.root=t.root,this.paypalIntegration=new s(this.root),this.postInitialize()},render:function(){this.$el.html(this.template({paypalEnabled:this.root.hasPaypalEnabled,coinbaseEnabled:this.root.hasCoinbaseEnabled})),this.$formContainer=this.$el.find(".form-container"),this.createFormView(),this.$formContainer.html(this.formView.render().el),this.setElements(),this.show()},createFormView:function(){this.formModel=new i,this.formView=new o({root:this.root,isModal:!0,model:this.formModel,setSubmitButtonState:n.bind(this.setSubmitButtonState,this)})},setElements:function(){this.$submitButton=this.$el.find(l),this.$altpayButtons=this.$el.find(c)},triggerFormSubmit:function(){this.formView.submit()},setSubmitButtonState:function(t){n.each(t,function(t,e){this.$submitButton.prop(e,t)},this)},handleInputChange:function(){var t=this.formModel.isEmpty();this.$submitButton.prop("disabled",t),this.$altpayButtons.toggleClass(u,t)},handlePayPalClick:function(){this.paypalIntegration.run()},navigateToListView:function(){this.root.router.navigate("listPaymentMethods")},show:function(){r.prototype.show.apply(this,arguments),n.delay(n.bind(function(){this.formView.setFocusOnFirstInput()},this),240)}});e.exports=p},{"../../../shared/models/form-card-model":180,"../../../shared/paypal-integration-manager":182,"../../../shared/views/payment-method-form-view":190,"../../../templates/modal/add-payment-method.hbs":195,"./base-modal-view":165,_:149}],165:[function(t,e){"use strict";var n=t("_"),r=t("q"),i=t("../../util/dropin-util"),o=t("backbone"),a="render-in-assemble",s="render-out",u="has-rendered",l=Modernizr.csstransitions,c=i.getPrefixedAnimationEnd(),p=o.View.extend({constructor:function(){o.View.apply(this,arguments)},postInitialize:function(){l||this.$el.fadeOut(0)},show:function(){var t=n.bind(function(){this.$el.addClass(a)},this);l?n.delay(t,240):this.$el.delay(200).fadeIn(200)},hide:function(){l?this.renderOutModalView().then(n.bind(function(){this.$el.removeClass(s).addClass(u),this.promise.resolve()},this)):this.promise&&this.$el.fadeOut(200,n.bind(function(){this.promise.resolve()},this))},getAnimationBatchSize:function(){var t=this.$el.children();return n.filter(t,function(t){return"none"!==getComputedStyle(t).display}).length||t.length},renderOutModalView:function(){function t(){return i++,i===o?(e.off(c,t),void n.resolve()):void 0}var e=this.$el,n=r.defer(),i=0,o=this.getAnimationBatchSize();return e.on(c,t).addClass(s),n.promise},renderOut:function(){return this.promise=r.defer(),this.hide(),this.promise.promise},destroy:function(){this.$el.empty()},reset:function(){this.destroy(),this.$el.removeClass(function(){return[a,s,u].join(" ")})}});e.exports=p},{"../../util/dropin-util":176,_:149,backbone:2,q:150}],166:[function(t,e){"use strict";var n=t("_"),r=t("./base-modal-view"),i=t("./payment-method-item-view"),o=t("../../../templates/modal/list-payment-methods.hbs"),a=r.extend({template:o,className:"list-payment-methods-view modal-frame-view",events:{"click .add-payment-method-link":"handleAddPaymentMethod"},initialize:function(t){this.root=t.root,this.collection=t.root.paymentMethods,this.postInitialize()},render:function(){this.$el.html(this.template),this.renderItems(this.collection.models,this.$el.find(".payment-methods-list")),this.show()},renderItems:function(t,e){var r=n.map(t,function(t){return new i({root:this.root,model:t}).render().el},this);e.append(r)},handleAddPaymentMethod:function(t){t.preventDefault(),this.root.router.navigate("addPaymentMethod")}});e.exports=a},{"../../../templates/modal/list-payment-methods.hbs":196,"./base-modal-view":165,"./payment-method-item-view":168,_:149}],167:[function(t,e){"use strict";var n=t("backbone"),r=t("../../../templates/modal/modal.hbs"),i=n.View.extend({template:r,className:"modal",events:{"click .cancel-button":"handleCancelClick"},initialize:function(t){this.root=t.root,this.render()},render:function(){this.$el.html(this.template()),$(".modal-wrap").append(this.el),this.$modalBody=this.$el.find(".modal-container")},handleCancelClick:function(t){t.preventDefault(),this.root.close({isCancel:!0})}});e.exports=i},{"../../../templates/modal/modal.hbs":197,backbone:2}],168:[function(t,e){"use strict";var n=t("backbone"),r=t("../../util/dropin-util"),i=t("../../../templates/modal/payment-method-item.hbs"),o=n.View.extend({template:i,events:{click:"selectPaymentMethod"},initialize:function(t){this.root=t.root,this.rpcClient=t.root.rpcClient,this.render()},getViewModel:function(){var t=this.model.toJSON(),e=t.details&&t.details.email;return e&&(t.details.truncatedEmail=r.truncateEmail(e,r.getMaxCharLength(180))),t},render:function(){return this.$el.html(this.template(this.getViewModel())),this},selectPaymentMethod:function(){var t=this.model.toJSON();this.model.get("isLocked")?this.rpcClient.invoke("clearNonce"):this.rpcClient.invoke("sendUnlockedNonce",[t]),this.rpcClient.invoke("sendUsedPaymentMethod",[t]),this.root.close()}});e.exports=o},{"../../../templates/modal/payment-method-item.hbs":198,"../../util/dropin-util":176,backbone:2}],169:[function(t,e){"use strict";function n(){}n.prototype.set=function(t,e){document.cookie=t+"="+e+"; path=/; expires=Fri, 31 Dec 9999 23:59:59 GMT;"},n.prototype.get=function(t){return decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(t).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null},e.exports=n},{}],170:[function(t,e){(function(t){"use strict";function n(){i&&t.localStorage.removeItem(r)}var r="__hls__",i=function(){try{return t.localStorage.setItem(r,!0),!0}catch(e){return!1}}();n.prototype.set=function(e,n){i&&t.localStorage.setItem(e,n)},n.prototype.get=function(e){return i?t.localStorage.getItem(e):null},e.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],171:[function(t,e){"use strict";function n(){var t;this.sharedCustomerIdentificationStore=new r,this._sharedCustomerIdentifier=null,t=this.sharedCustomerIdentificationStore.get(),t&&this._handleIdentifier(t)}var r=t("./shared-customer-identification-store");n.prototype._handleIdentifier=function(t){this.sharedCustomerIdentificationStore.set(t),this._sharedCustomerIdentifier=t},n.prototype.getIdentifier=function(){return this._sharedCustomerIdentifier},n.prototype.hasIdentifier=function(){return!!this.getIdentifier()},n.prototype.fetchIdentifier=function(t){var e,n=this;this.hasIdentifier()&&t(this._sharedCustomerIdentifier),e=this.sharedCustomerIdentificationStore.get(),e?(this._handleIdentifier(e),t(this._sharedCustomerIdentifier)):this.triggerPopup(function(){e=n.sharedCustomerIdentificationStore.get(),n._handleIdentifier(e),t(n._sharedCustomerIdentifier)})},n.prototype.triggerPopup=function(t){var e,n=this;window.open("/web/popup","braintree.dropinPopup"),e=setInterval(function(){var r=n.sharedCustomerIdentificationStore.get();r&&(n._handleIdentifier(r),t(),clearInterval(e))},100)},e.exports=n},{"./shared-customer-identification-store":172}],172:[function(t,e){"use strict";function n(){this.COOKIE_NAME="venmotouch",this.cookie=new r,this.localStorage=new i}var r=t("./cookie"),i=t("./local-storage");n.prototype.set=function(t){this.cookie.set(this.COOKIE_NAME,t),this.localStorage.set(this.COOKIE_NAME,t)},n.prototype.get=function(){return this.localStorage.get(this.COOKIE_NAME)||this.cookie.get(this.COOKIE_NAME)||null},e.exports=n},{"./cookie":169,"./local-storage":170}],173:[function(t,e){"use strict";var n=t("_"),r=t("hbsfy/runtime"),i=t("../templates/partials/coinbase-button.hbs"),o={ifEqual:function(t,e,n){return t===e?n.fn(this):n.inverse(this)},ifOr:function(t,e,n){return t||e?n.fn(this):void 0},ifContains:function(t,e,r){return n.contains(t,e)?r.fn(this):""}};n.each(o,function(t,e){r.registerHelper(e,t)}),r.registerPartial("coinbaseButton",i),e.exports=o},{"../templates/partials/coinbase-button.hbs":199,_:149,"hbsfy/runtime":147}],174:[function(t,e){"use strict";function n(t){var e,n;return t=t.replace(/\s+/g,""),t.match("/")?(t=t.split("/"),{month:t[0],year:t[1].substr(0,4)}):(n="0"===t[0]||t.length>5||4===t.length?2:1,e=t.substr(0,n),{month:e,year:t.substr(e.length,4)})}e.exports={parseDate:n}},{}],175:[function(t,e){(function(t){"use strict";function n(){return Modernizr.touch&&a.match(/Android/i)}function r(){var t=a.match(/Android\s([0-9\.]*)/i);return t&&t[1]?t[1]:void 0}function i(){return a.match("Firefox")}var o,a=t.navigator.userAgent,s="4.4";o={isTouch:Modernizr.touch,shouldAutoTab:function(){return n()&&!i()},shouldFormat:function(){return n()&&(i()||r()<s)?!1:!0}},e.exports=o}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],176:[function(t,e){"use strict";function n(t){var e,n=[{min:0,max:180,chars:7},{min:181,max:620,chars:14},{min:621,max:960,chars:22}];return t=t||$(window).width(),a.each(n,function(n){t>=n.min&&t<=n.max&&(e=n.chars)}),e||60}function r(t,e){var n,r;return-1===t.indexOf("@")?t:(t=t.split("@"),n=t[0],r=t[1],n.length>e&&(n=n.slice(0,e)+"..."),r.length>e&&(r="..."+r.slice(-e)),n+"@"+r)}function i(){var t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",transition:"transitionend"};return t[Modernizr.prefixed("transition")]}function o(){var t={WebkitAnimation:"webkitAnimationEnd",MozAnimation:"animationend",animation:"animationend"};return t[Modernizr.prefixed("animation")]}var a=t("_");!function(){var t,e,n,r=0,i=["ms","moz","webkit","o"];for(n=0;n<i.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[i[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[i[n]+"CancelAnimationFrame"]||window[i[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t){var e=(new Date).getTime(),n=Math.max(0,16-(e-r)),i=window.setTimeout(function(){t(e+n)},n);return r=e+n,i}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)}),t=window.requestAnimationFrame,e=window.cancelAnimationFrame,window.requestAnimationFrame=function(e,n){return t(function(){e.call(n,null)})},window.cancelAnimationFrame=function(t,n){return e(function(){t.call(n,null)})}}(),e.exports={getMaxCharLength:n,getPrefixedAnimationEnd:o,getPrefixedTransitionEnd:i,truncateEmail:r}},{_:149}],177:[function(t,e){"use strict";function n(){this.resetPattern=function(){}}var r=t("formatter.js/dist/formatter.js"),i=t("./device");e.exports=i.shouldFormat()?r:n},{"./device":175,"formatter.js/dist/formatter.js":139}],178:[function(t,e){"use strict";var n=t("backbone"),r=t("../models/payment-method-model"),i=n.Collection.extend({model:r,initialize:function(){this.on("add",function(t){this.setActiveModel(t.toJSON())},this),this.once("reset",this.bootstrap)},bootstrap:function(){var t=this.findWhere({lastUsedByCurrentMerchant:!0})||this.at(0);this.setActiveModel(t.toJSON())},setActiveModel:function(t){var e=t?t.nonce:this.at(0).get("nonce");this.each(function(t){t.set("isActive",t.get("nonce")===e)}),this.trigger("change:activeModel",this.findWhere({isActive:!0}))},getActiveModel:function(){return this.findWhere({isActive:!0})||this.at(0)},getActiveModelAttr:function(t){return this.getActiveModel().get(t)}});e.exports=i},{"../models/payment-method-model":181,backbone:2}],179:[function(t,e){"use strict";e.exports={PAYPAL_INTEGRATION_NAME:"PayPal",INLINE_FRAME_NAME:"braintree-dropin-frame",MODAL_FRAME_NAME:"braintree-dropin-modal-frame",PAYMENT_METHOD_TYPES:["CoinbaseAccount","PayPalAccount","CreditCard"]}},{}],180:[function(t,e){"use strict";var n=t("_"),r=t("backbone"),i=t("../../internal/util/date-manager"),o=t("../../internal/util/device").shouldFormat(),a={pattern:"{{9999}} {{999999}} {{99999}}",maxLength:17},s={pattern:"{{9999}} {{9999}} {{9999}} {{9999}}",maxLength:19},u=r.Model.extend({defaults:{cardType:"",cardClass:"",cardNumber:"",cardNumberMaxLength:19,cardPattern:s.pattern,challenges:["cvv"],cvv:"",cvvAndZip:!1,cvvOnly:!1,cvvPatterns:{nonAmex:{attrs:{maxlength:"3",placeholder:"CVV"},pattern:"{{999}}",id:"cvv-icon",labelText:"CVV (3 digits)"},amex:{attrs:{maxlength:"4",placeholder:"CID"},pattern:"{{9999}}",id:"cid-icon",labelText:"CID (4 digits)"}},expirationDate:"",expirationDateMaxLengths:o?[7,8,9]:[4,5,6],expirationPatterns:[{"^[2-9]/?":"0{{9}} / {{9999}}"},{"*":"{{99}} / {{9999}}"}],postalCode:"",postalCodeMaxLength:8,postalCodePattern:{pattern:"{{********}}"},share:!1,crossMerchantSharing:!1,zipOnly:!1},initialize:function(){this.on("change:cardType",this.setFormatForCardType)
},setFormatForCardType:function(){var t=this.get("cardType").isAmex?a:s;this.set({cardPattern:t.pattern,cardNumberMaxLength:t.maxLength})},splitExpirationDate:function(){var t=this.get("expirationDate").replace(/\s+|\//g,""),e=i.parseDate(t);this.set({expirationMonth:e.month,expirationYear:e.year})},getCardParams:function(){var t;return this.splitExpirationDate(),t={number:this.get("cardNumber"),expirationMonth:this.get("expirationMonth"),expirationYear:this.get("expirationYear"),cvv:this.get("cvv"),share:this.get("share")},n.contains(this.get("challenges"),"postal_code")&&(t.billingAddress={postalCode:this.get("postalCode")}),t},isEmpty:function(t){return t=t||["cardNumber","expirationDate","cvv","postalCode"],n.map(t,function(t){return this.get(t)},this).reduce(function(t,e){return t+e}).length<1}});e.exports=u},{"../../internal/util/date-manager":174,"../../internal/util/device":175,_:149,backbone:2}],181:[function(t,e){"use strict";var n=t("backbone"),r=t("../../internal/form/credit-card-type-identification-service"),i=n.Model.extend({initialize:function(){this.setClass()},setClass:function(){var t,e;"CreditCard"===this.get("type")?(t=this.get("details").cardType,e=r.identifyByCardType(t),this.set("cardTypeClass",e.getCssClass())):"CoinbaseAccount"===this.get("type")?(this.set("cardTypeClass","coinbase"),this.set("label","Coinbase")):(this.set("cardTypeClass","paypal"),this.set("label","PayPal"),this.normalizePayPalModel())},normalizePayPalModel:function(){this.set("type","PayPalAccount"),this.get("details")||(this.set("details",{email:this.get("email")}),this.unset("email"))}});e.exports=i},{"../../internal/form/credit-card-type-identification-service":152,backbone:2}],182:[function(t,e){"use strict";function n(t){this.root=t,this.usePopup=o.isPopupSupported(),this.initialize()}var r=t("_"),i=t("braintree-bus"),o=t("braintree-paypal/src/shared/util/browser"),a=t("./constants");n.prototype.initialize=function(){this.attachEvents()},n.prototype.attachEvents=function(){i.on(i.events.UI_POPUP_FORCE_CLOSE,r.bind(this.handlePopupForceClose,this))},n.prototype.run=function(){this.usePopup?(this.root.ppClient.popup=this.root.ppClient._openPopup(),i.emit(i.events.UI_POPUP_DID_OPEN,{source:a.PAYPAL_INTEGRATION_NAME}),this.pollForPopup(this.root.ppClient.popup)):this.root.rpcClient.invoke("openPayPalModal")},n.prototype.pollForPopup=function(t){var e=setInterval(function(){t&&t.closed&&(clearInterval(e),i.emit(i.events.UI_POPUP_DID_CLOSE,{source:a.PAYPAL_INTEGRATION_NAME}))},100)},n.prototype.handlePopupForceClose=function(t){t.target===a.PAYPAL_INTEGRATION_NAME&&this.root.ppClient.popup&&this.root.ppClient.popup.close()},e.exports=n},{"./constants":179,_:149,"braintree-bus":36,"braintree-paypal/src/shared/util/browser":121}],183:[function(t,e){"use strict";function n(t){var e=t.clientToken,n=t.paypal||{},i=new r(e,{container:document.createElement("div"),displayName:n.displayName,locale:n.locale,singleUse:n.singleUse,amount:n.amount,currency:n.currency,onSuccess:n.onSuccess,enableShippingAddress:n.enableShippingAddress,shippingAddressOverride:n.shippingAddressOverride});return i.initialize(),i}var r=t("braintree-paypal/src/external/client");e.exports=n},{"braintree-paypal/src/external/client":110}],184:[function(t,e){"use strict";var n=t("backbone"),r=n.Router.extend({views:{},navigate:function(t,e){e&&e.silent?this.currentView=t:n.history.loadUrl(t)},setCurrentView:function(t,e){this.currentView&&this.views[this.currentView].destroy(),this.currentView=t,this.views[this.currentView].render(e)}});n.$=window.$,e.exports=r},{backbone:2}],185:[function(t,e){"use strict";function n(t){return o.debounce(function(){t.HAS_TRANSITIONS?t.$el.addClass(u):t.$el.find(c).animate({top:14,opacity:1},140)},p,!0)}function r(t){return o.debounce(function(e){t.HAS_TRANSITIONS?t.$el.removeClass(u):t.$el.find(c).animate({top:20,opacity:0},e||0)},p,!0)}var i=t("backbone"),o=t("_"),a=t("../../internal/util/device"),s="active",u="show-label",l="invalid",c=".field-name",p=200,h=i.View.extend({isActive:!1,constructor:function(){this.showLabelSpan=n(this),this.hideLabelSpan=r(this),i.View.apply(this,arguments)},events:{"focus input":"handleFocus","blur input":"handleBlur"},postInitialize:function(t){this.$input=this.$input||$(this.input),this.HAS_TRANSITIONS=Modernizr.csstransitions,this.HAS_PLACEHOLDERS=this.$input.length&&Modernizr.placeholder,this.HAS_PLACEHOLDERS||this.$input.val(this.$input.attr("placeholder")),this.HAS_TRANSITIONS||this.hideLabelSpan(),this.fieldIndex=o.isObject(t)&&o.has(t,"fieldIndex")?t.fieldIndex:999},toggleActive:function(){this.isActive=!this.isActive,this.$el.toggleClass(s,this.isActive)},handleFocus:function(){this.HAS_PLACEHOLDERS||this.$input.val()===this.$input.attr("placeholder")&&(this.$input.val(""),this.showLabelSpan()),this.$el.addClass(s)},autoFocus:function(t){var e=t&&t.force?t.force:!a.isTouch;e&&this.$input.focus()},handleBlur:function(){this.$input.val().length||(this.hideLabelSpan(),this.HAS_PLACEHOLDERS||this.$input.val(this.$input.attr("placeholder"))),this.$el.removeClass(s)},toggleLabelSpan:function(t){t.length||!this.HAS_PLACEHOLDERS?this.showLabelSpan():this.hideLabelSpan()},isValid:function(t){var e=this.validator?this.validator.isValid(t):!0;return e||this.renderInvalidState(),e},renderInvalidState:function(){this.$el.addClass(l)},renderValidState:function(){this.$el.removeClass(l)},autoAdvanceTab:function(){a.shouldAutoTab()&&i.trigger("ui:autoTab",{fieldIndex:this.fieldIndex})},inputIsComplete:function(t){return function(e){return e=t||e,parseInt(e,10)===this.$input.val().length}},destroy:function(){this.remove()}});e.exports=h},{"../../internal/util/device":175,_:149,backbone:2}],186:[function(t,e){"use strict";var n=t("_"),r=t("backbone"),i=t("braintree-bus"),o="ui-disabled",a=$("body"),s=r.View.extend({el:".cancel-popup",events:{"click .cancel-popup-button":"destroyPopup"},initialize:function(){this.currentPopupSource=null,this.setElements(),this.setEvents()},setElements:function(){this.el&&(this.button=this.el.querySelector("button"))},setEvents:function(){i.on(i.events.UI_POPUP_DID_OPEN,n.bind(this.handleOpenPopup,this)),i.on(i.events.UI_POPUP_DID_CLOSE,n.bind(this.handleClosePopup,this))},handleOpenPopup:function(t){var e=t.source;this.currentPopupSource=/Coinbase|PayPal/.test(e)?e:null,this.renderAndDisable()},handleClosePopup:function(){this.enableUI(),this.currentPopupSource=null},renderAndDisable:function(){this.button.innerHTML="Cancel "+(this.currentPopupSource||"")+" Login",this.disableUI()},enableUI:function(){a.removeClass(o)},disableUI:function(){a.addClass(o)},handleCancelClick:function(){this.destroyPopup()},destroyPopup:function(){this.currentPopupSource&&i.emit(i.events.UI_POPUP_FORCE_CLOSE,{target:this.currentPopupSource})}});e.exports=s},{_:149,backbone:2,"braintree-bus":36}],187:[function(t,e){"use strict";var n=t("_"),r=t("../../internal/util/formatter-factory"),i=t("./base-input-view"),o=t("../../internal/form/validator").CreditCardNumberValidator,a=t("../../internal/form/input"),s=t("../../internal/form/credit-card-type-identification-service"),u=i.extend({config:{errorMessage:"Invalid Credit Card Number!",validatorRules:[o]},events:function(){return n.chain(i.prototype.events).clone().extend({"blur input":"handleBlur","keyup input":"formatInput","keydown input":"handleKeydown","keypress input":"noop","paste input":"formatInput"}).value()},initialize:function(t){this.setElements(),this.setEvents(),this.isComplete=i.prototype.inputIsComplete.call(this),this.postInitialize(t)},setElements:function(){this.input=this.$el.find("input").get(0),this.$cardHint=this.$el.find(".payment-method-icon"),this.validator=new a(this.input,this.config.validatorRules),this.inputFormatter=new r(this.input,{pattern:this.model.get("cardPattern")})},setEvents:function(){this.listenTo(this.model,"change:cardType",this.updateCreditCardType),this.listenTo(this.model,"change:cardPattern",this.setCreditCardNumberFormatterPattern)},formatInput:function(t){var e=t.target.value;this.toggleLabelSpan(e),this.model.set({cardType:s.identify(e),cardNumber:e}),this.isComplete(this.model.get("cardNumberMaxLength"))&&this.isValid()&&this.autoAdvanceTab()},handleBlur:function(t){this.formatInput(t),this.setCreditCardNumberFormatterPattern(),i.prototype.handleBlur.apply(this,arguments)},handleKeydown:function(){this.isComplete(this.model.get("cardNumberMaxLength"))||this.renderValidState()},updateCreditCardType:function(){var t=this.model.get("cardType").getCssClass(),e=this.model.get("cardClass");this.model.set("cardClass",t),this.$cardHint.removeClass(e).addClass(t)},setCreditCardNumberFormatterPattern:function(){var t=this.model.get("cardPattern");this.inputFormatter.resetPattern(t)}});e.exports=u},{"../../internal/form/credit-card-type-identification-service":152,"../../internal/form/input":154,"../../internal/form/validator":155,"../../internal/util/formatter-factory":177,"./base-input-view":185,_:149}],188:[function(t,e){"use strict";var n=t("_"),r=t("../../internal/util/formatter-factory"),i=t("./base-input-view"),o=t("../../internal/form/validator").CvvValidator,a=t("../../internal/form/input"),s=i.extend({config:{errorMessage:"Invalid CVV!",validatorRules:[o]},events:function(){return n.chain(i.prototype.events).clone().extend({"keyup input":"formatInput","keydown input":"handleKeydown","focus input":"handleInstanceFocus","blur input":"handleInstanceBlur","paste input":"formatInput"}).value()},initialize:function(t){this.setElements(),this.setEvents(),this.updateCvvForCardType(),this.isComplete=i.prototype.inputIsComplete.call(this),this.postInitialize(t)},setElements:function(){this.$input=this.$el.find("input"),this.input=this.$input.get(0),this.label=this.$el.find(".field-name").get(0),this.cardHint=this.$el.find(".payment-method-icon").get(0),this.validator=new a(this.input,this.config.validatorRules),this.inputFormatter=new r(this.input,this.model.get("cvvPatterns").nonAmex)},setEvents:function(){this.listenTo(this.model,"change:cardType",this.updateCvvForCardType)},updateCvvForCardType:function(){var t=this.model.get("cvvPatterns");this.formatData=this.model.get("cardType").isAmex?t.amex:t.nonAmex,this.inputFormatter.resetPattern(this.formatData.pattern),this.updateCardHint(),this.label.innerHTML=this.formatData.labelText,this.$input.attr(this.formatData.attrs),this.$input.length&&!Modernizr.placeholder&&(this.$input.val().length||this.$input.val(this.$input.attr("placeholder")))},formatInput:function(t){var e=t.target.value;this.toggleLabelSpan(e),this.model.set("cvv",e),this.isComplete(this.formatData.attrs.maxlength)&&this.isValid()&&this.autoAdvanceTab()},handleKeydown:function(){this.renderValidState()},updateCardHint:function(t){this.cardHint.id=t},handleInstanceFocus:function(){this.updateCardHint(this.formatData.id),i.prototype.handleFocus.apply(this,arguments)},handleInstanceBlur:function(){this.updateCardHint(),i.prototype.handleBlur.apply(this,arguments)}});e.exports=s},{"../../internal/form/input":154,"../../internal/form/validator":155,"../../internal/util/formatter-factory":177,"./base-input-view":185,_:149}],189:[function(t,e){"use strict";var n=t("_"),r=t("../../internal/util/formatter-factory"),i=t("./base-input-view"),o=t("../../internal/form/validator").ExpirationDateValidator,a=t("../../internal/form/input"),s=i.extend({isActive:!1,config:{errorMessage:"Invalid expiration date!",validatorRules:[o]},events:function(){return n.chain(i.prototype.events).clone().extend({"keyup input":"formatInput","keydown input":"handleKeydown","paste input":"formatInput"}).value()},initialize:function(t){this.setElements(),this.postInitialize(t)},setElements:function(){this.input=this.$el.find("input").get(0),this.validator=new a(this.input,this.config.validatorRules),this.inputFormatter=new r(this.input,{patterns:this.model.get("expirationPatterns")})},formatInput:function(t){var e=t.target.value,n=this.isComplete(e);this.toggleLabelSpan(e),this.model.set("expirationDate",e),n.shouldValidate&&this.isValid({partial:!0})&&(this.renderValidState(),n.shouldAdvance&&this.autoAdvanceTab())},handleKeydown:function(t){this.isComplete(t.target.value)||this.renderValidState()},isComplete:function(t){var e=this.model.get("expirationDateMaxLengths"),r=t.length;return{shouldValidate:r>=e[0],shouldAdvance:!/20/.test(t)||r===n.last(e)}}});e.exports=s},{"../../internal/form/input":154,"../../internal/form/validator":155,"../../internal/util/formatter-factory":177,"./base-input-view":185,_:149}],190:[function(t,e){"use strict";var n=t("_"),r=t("backbone"),i=t("./credit-card-input-view"),o=t("./expiration-input-view"),a=t("./cvv-input-view"),s=t("./postal-code-input-view"),u=t("./save-checkbox-view"),l=t("../models/form-card-model"),c=t("../../internal/util/device"),p=t("../../templates/shared/add-payment-method-form.hbs"),h="hidden",d="is-loading",f="show-server-error",m=$("body"),v=r.View.extend({className:"add-payment-method-form-view",template:p,fields:{creditCard:{container:".credit-card-number-label",constructor:i},expiration:{container:".expiration-label",constructor:o},cvv:{challenge:"cvv",container:".cvv-label",constructor:a},postalCode:{challenge:"postal_code",container:".postal-code-label",constructor:s},saveCheckbox:{container:".checkbox-label",constructor:u}},events:{submit:"submit","click .error-retry":"handleRetry"},initialize:function(t){this.root=t.root,this.model=t.model||new l,this.setSubmitButtonState=t.setSubmitButtonState||null,this.isModal=t.isModal||!1,c.isTouch&&this.listenTo(r,"ui:autoTab",this.handleAutoTab)},render:function(){var t,e={isModal:this.isModal};return this.root.clientToken&&this.root.clientToken.challenges&&this.model.set("challenges",this.root.clientToken.challenges),this.root.clientToken&&this.root.clientToken.crossMerchantSharing&&this.model.set("crossMerchantSharing",this.root.clientToken.crossMerchantSharing),t=this.model.get("challenges"),this.model.set("cvvOnly",n.contains(t,"cvv")&&1===t.length),this.model.set("zipOnly",n.contains(t,"postal_code")&&1===t.length),this.model.set("cvvAndZip",n.contains(t,"postal_code")&&n.contains(t,"cvv")),this.$el.html(this.template(n.extend(e,this.model.toJSON()))),this.setupFields(),this},setupFields:function(){var t=this.model.get("challenges"),e=0;this.fieldViews=[],n.each(this.fields,function(r,i){var o;(!r.challenge||n.contains(t,r.challenge))&&("saveCheckbox"!==i||this.model.get("crossMerchantSharing"))&&(o=new r.constructor({el:this.$el.find(r.container),model:this.model,fieldIndex:e}),this.fieldViews.push(o),e++)},this)},submit:function(){var t=n.chain(this.fieldViews).filter(function(t){return!t.isValid()}).value();return t.length>0?n.first(t).autoFocus():this.savePaymentMethod(),!1},savePaymentMethod:function(){var t=this.model.getCardParams();m.addClass(d),requestAnimationFrame(function(){this.root.apiProxyClient.sendAnalyticsEvents(this.isModal?"dropin.web.modal.add-card.start":"dropin.web.inline.add-card.start"),this.root.apiClient.addCreditCard(t,n.bind(this.handlePaymentMethodAdd,this))},this)},handlePaymentMethodAdd:function(t,e){var r=this;t?this.isModal?(this.root.apiProxyClient.sendAnalyticsEvents("dropin.web.modal.add-card.fail"),this.renderErrorStateFromServer()):(this.root.apiProxyClient.sendAnalyticsEvents("dropin.web.inline.add-card.fail"),this.renderErrorStateFromServer()):this.isModal?setTimeout(n.bind(function(){m.removeClass(d),requestAnimationFrame(function(){this.root.apiProxyClient.sendAnalyticsEvents("dropin.web.modal.add-card.success",function(){r.root.rpcClient.invoke("sendAddedPaymentMethod",[e]),r.root.close()})},this)},this),300):this.root.apiProxyClient.sendAnalyticsEvents("dropin.web.inline.add-card.success",function(){r.successCallback(e)})},renderErrorStateFromServer:function(){this.$el.blur(),m.removeClass(d),requestAnimationFrame(function(){this.setSubmitButtonState&&this.setSubmitButtonState({disabled:!0}),m.addClass(f)},this)},handleRetry:function(t){t.preventDefault(),m.removeClass(f),this.setSubmitButtonState&&this.setSubmitButtonState({disabled:!1})},setFocusOnFirstInput:function(){this.fieldViews[0].autoFocus()},handleAutoTab:function(t){var e=t.fieldIndex,n=e>this.fieldViews.length-2;n||this.fieldViews[t.fieldIndex+1].autoFocus({force:!0})},hide:function(){this.$el.addClass(h)},show:function(){this.$el.removeClass(h)},destroy:function(){this.$el.empty()}});e.exports=v},{"../../internal/util/device":175,"../../templates/shared/add-payment-method-form.hbs":200,"../models/form-card-model":180,"./credit-card-input-view":187,"./cvv-input-view":188,"./expiration-input-view":189,"./postal-code-input-view":191,"./save-checkbox-view":192,_:149,backbone:2}],191:[function(t,e){"use strict";var n=t("_"),r=t("../../internal/util/formatter-factory"),i=t("./base-input-view"),o=t("../../internal/form/validator").PostalCodeValidator,a=t("../../internal/form/input"),s=i.extend({config:{errorMessage:"Invalid Postal Code",validatorRules:[o]},events:function(){return n.chain(i.prototype.events).clone().extend({"keyup input":"formatInput","keydown input":"handleKeydown","paste input":"formatInput"}).value()},initialize:function(t){this.setElements(),this.setEvents(),this.isComplete=i.prototype.inputIsComplete.call(this,this.model.get("postalCodeMaxLength")),this.postInitialize(t)},setElements:function(){this.input=this.$el.find("input").get(0),this.validator=new a(this.input,this.config.validatorRules),this.inputFormatter=new r(this.input,this.model.get("postalCodePattern"))},setEvents:function(){this.listenTo(this.model,"change:cardType",this.updatePostalCodeForCardType)},formatInput:function(t){var e=t.target.value;this.toggleLabelSpan(e),this.model.set("postalCode",e),this.isComplete()&&this.autoAdvanceTab()},handleKeydown:function(){this.renderValidState()}});e.exports=s},{"../../internal/form/input":154,"../../internal/form/validator":155,"../../internal/util/formatter-factory":177,"./base-input-view":185,_:149}],192:[function(t,e){"use strict";var n=t("./base-input-view"),r=n.extend({events:{'change [name="save"]':"setSave"},initialize:function(){this.setElements(),this.isValid=!0,this.setSave()},setElements:function(){this.$checkbox=this.$el.find('[name="save"]')},setSave:function(){this.model.set("share",this.$checkbox.prop("checked"))}});e.exports=r},{"./base-input-view":185}],193:[function(t,e){var n=t("hbsfy/runtime");e.exports=n.template({1:function(){return'    <button class="paypal is-active" title="Pay with PayPal"><span class="paypal-button-logo"></span></button>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,r){var i,o='<div class="payment-container">\n  <div class="payment-method-options">\n';return i=e["if"].call(t,null!=t?t.paypalEnabled:t,{name:"if",hash:{},fn:this.program(1,r),inverse:this.noop,data:r}),null!=i&&(o+=i),i=this.invokePartial(n.coinbaseButton,"  ","coinbaseButton",t,void 0,e,n,r),null!=i&&(o+=i),o+'  </div>\n  <div class="form-container"></div>\n\n</div>\n'},usePartial:!0,useData:!0})},{"hbsfy/runtime":147}],194:[function(t,e){var n=t("hbsfy/runtime");e.exports=n.template({1:function(t){var e,n=this.lambda,r=this.escapeExpression;return'  <span class="payment-method-type">'+r(n(null!=(e=null!=(e=null!=t?t.paymentMethod:t)?e.details:e)?e.cardType:e,t))+'</span>\n  <span class="payment-method-description">ending in '+r(n(null!=(e=null!=(e=null!=t?t.paymentMethod:t)?e.details:e)?e.lastTwo:e,t))+"</span>\n"},3:function(t){var e,n=this.lambda,r=this.escapeExpression;return'  <span class="payment-method-type">'+r(n(null!=(e=null!=t?t.paymentMethod:t)?e.label:e,t))+'</span>\n  <span class="payment-method-description">'+r(n(null!=(e=null!=(e=null!=t?t.paymentMethod:t)?e.details:e)?e.truncatedEmail:e,t))+"</span>\n"},5:function(t,e,n,r){var i,o=e.helperMissing,a='<div>\n  <form>\n    <div class="grid">\n      <div class="row">\n        <div class="column ';return i=(e.ifContains||t&&t.ifContains||o).call(t,null!=(i=null!=t?t.paymentMethod:t)?i.securityQuestions:i,"postal_code",{name:"ifContains",hash:{},fn:this.program(6,r),inverse:this.noop,data:r}),null!=i&&(a+=i),a+='">\n          <label class="card-label cvv-label" for="cvv">\n            <span class="field-name">CVV</span>\n            <input id="cvv" name="cvv" class="cvv card-field" maxlength="3" type="tel" inputmode="numeric" placeholder="CVV" autocomplete="off">\n            <span class="payment-method-icon"></span>\n          </label>\n        </div>\n\n',i=(e.ifContains||t&&t.ifContains||o).call(t,null!=(i=null!=t?t.paymentMethod:t)?i.securityQuestions:i,"postal_code",{name:"ifContains",hash:{},fn:this.program(8,r),inverse:this.noop,data:r}),null!=i&&(a+=i),a+"      </div>\n    </div>\n  </form>\n</div>\n"},6:function(){return"half"},8:function(){return'        <div class="column half">\n          <label class="card-label postal-code-label" for="postal-code">\n            <span class="field-name">Postal Code</span>\n            <input id="postal-code" name="postal-code" class="postal-code card-field" autocomplete="off" maxlength="8" placeholder="Postal Code" autofill="off" autocomplete="off">\n          </label>\n        </div>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,r){var i,o=this.lambda,a=this.escapeExpression,s=e.helperMissing,u='<div class="payment-method-item card-label">\n  <span class="payment-method-icon stick-left '+a(o(null!=(i=null!=t?t.paymentMethod:t)?i.cardTypeClass:i,t))+'"></span>\n';return i=(e.ifEqual||t&&t.ifEqual||s).call(t,null!=(i=null!=t?t.paymentMethod:t)?i.type:i,"CreditCard",{name:"ifEqual",hash:{},fn:this.program(1,r),inverse:this.program(3,r),data:r}),null!=i&&(u+=i),u+='</div>\n<div class="payment-method-action">\n  <button class="link link-small" id="choose-payment-method">Change payment method</button>\n</div>\n\n',i=e["if"].call(t,null!=(i=null!=t?t.paymentMethod:t)?i.isLocked:i,{name:"if",hash:{},fn:this.program(5,r),inverse:this.noop,data:r}),null!=i&&(u+=i),u},useData:!0})},{"hbsfy/runtime":147}],195:[function(t,e){var n=t("hbsfy/runtime");e.exports=n.template({1:function(){return'    <button class="paypal is-active" title="Pay with PayPal"><span class="paypal-button-logo"></span></button>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,r){var i,o,a,s="function",u=e.helperMissing,l=e.blockHelperMissing,c='<div class="modal-header">\n  <h3>Add new payment method</h3>\n</div>\n<div class="modal-body-content">\n  <div class="payment-method-options">\n';return o=null!=(o=e.paypalEnabled||(null!=t?t.paypalEnabled:t))?o:u,a={name:"paypalEnabled",hash:{},fn:this.program(1,r),inverse:this.noop,data:r},i=typeof o===s?o.call(t,a):o,e.paypalEnabled||(i=l.call(t,i,a)),null!=i&&(c+=i),i=this.invokePartial(n.coinbaseButton,"  ","coinbaseButton",t,void 0,e,n,r),null!=i&&(c+=i),c+'  </div>\n  <div class="form-container"></div>\n</div>\n<div class="modal-footer">\n  <button class="payment-method-add" disabled>Add new payment method</button>\n  <div class="use-saved-payment-method">\n    <button class="link use-saved-payment-method-link">Use saved payment method</button>\n  </div>\n  <div class="cancel">\n    <a href="#" class="cancel-button">Cancel</a>\n  </div>\n</div>\n'},usePartial:!0,useData:!0})},{"hbsfy/runtime":147}],196:[function(t,e){var n=t("hbsfy/runtime");e.exports=n.template({compiler:[6,">= 2.0.0-beta.1"],main:function(){return'<div class="modal-header">\n  <h3>Select payment method</h3>\n</div>\n<div class="modal-body-content">\n  <div class="payment-methods-list"></div>\n  <div class="add-payment-method-item">\n    <span class="add-payment-method-link">Add Payment Method</span>\n  </div>\n</div>\n<div class="modal-footer">\n  <div class="cancel">\n    <a href="#" class="cancel-button">Cancel</a>\n  </div>\n</div>\n'},useData:!0})},{"hbsfy/runtime":147}],197:[function(t,e){var n=t("hbsfy/runtime");e.exports=n.template({compiler:[6,">= 2.0.0-beta.1"],main:function(){return'<div class="modal-body">\n\n  <div class="modal-container"></div>\n\n  <div class="loader">\n    <div class="loader-background"></div>\n    <div class="indicator">\n      <svg id="loader-svg-icon" width="14px" height="16px" viewBox="0 0 28 32" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n        <g id="New-Customer" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n          <g id="Loading" sketch:type="MSArtboardGroup" transform="translate(-526.000000, -915.000000)" fill="#FFFFFF">\n            <g id="Loading-Indicator" sketch:type="MSLayerGroup" transform="translate(468.000000, 862.000000)">\n              <g id="Secure" transform="translate(58.000000, 53.000000)" sketch:type="MSShapeGroup">\n                <path d="M6,10 L6,7.9998866 C6,3.57774184 9.581722,0 14,0 C18.4092877,0 22,3.58167123 22,7.9998866 L22,10 L18,10 L18,7.9947834 C18,5.78852545 16.2046438,4 14,4 C11.790861,4 10,5.79171562 10,7.9947834 L10,10 L6,10 Z M0.996534824,14 C0.446163838,14 0,14.4449463 0,14.9933977 L0,31.0066023 C0,31.5552407 0.439813137,32 0.996534824,32 L27.0034652,32 C27.5538362,32 28,31.5550537 28,31.0066023 L28,14.9933977 C28,14.4447593 27.5601869,14 27.0034652,14 L0.996534824,14 Z" id="Rectangle-520"></path>\n              </g>\n            </g>\n          </g>\n        </g>\n      </svg>\n    </div>\n    <div class="loader-message">Authenticating...</div>\n  </div>\n\n  <div class="cancel-popup">\n    <button class="cancel-popup-button"></button>\n  </div>\n</div>\n'},useData:!0})},{"hbsfy/runtime":147}],198:[function(t,e){var n=t("hbsfy/runtime");e.exports=n.template({1:function(t){var e,n=this.lambda,r=this.escapeExpression;return'  <span class="payment-method-type">'+r(n(null!=(e=null!=t?t.details:t)?e.cardType:e,t))+'</span>\n  <span class="payment-method-description">ending in '+r(n(null!=(e=null!=t?t.details:t)?e.lastTwo:e,t))+"</span>\n"},3:function(t,e,n,r){var i,o,a="function",s=e.helperMissing,u=this.escapeExpression,l=this.lambda;return'  <span class="payment-method-type">'+u((o=null!=(o=e.label||(null!=t?t.label:t))?o:s,typeof o===a?o.call(t,{name:"label",hash:{},data:r}):o))+'</span>\n  <span class="payment-method-description">'+u(l(null!=(i=null!=t?t.details:t)?i.truncatedEmail:i,t))+"</span>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,r){var i,o,a="function",s=e.helperMissing,u=this.escapeExpression,l='<div class="payment-method-item card-label">\n  <span class="payment-method-icon stick-left '+u((o=null!=(o=e.cardTypeClass||(null!=t?t.cardTypeClass:t))?o:s,typeof o===a?o.call(t,{name:"cardTypeClass",hash:{},data:r}):o))+'"></span>\n';return i=(e.ifEqual||t&&t.ifEqual||s).call(t,null!=t?t.type:t,"CreditCard",{name:"ifEqual",hash:{},fn:this.program(1,r),inverse:this.program(3,r),data:r}),null!=i&&(l+=i),l+"</div>\n"},useData:!0})},{"hbsfy/runtime":147}],199:[function(t,e){var n=t("hbsfy/runtime");e.exports=n.template({1:function(){return'  <button id="coinbase-container" class="is-active">\n    <span class="coinbase-button-logo">Coinbase</span>\n  </button>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,r){var i,o="";return i=e["if"].call(t,null!=t?t.coinbaseEnabled:t,{name:"if",hash:{},fn:this.program(1,r),inverse:this.noop,data:r}),null!=i&&(o+=i),o},useData:!0})},{"hbsfy/runtime":147}],200:[function(t,e){var n=t("hbsfy/runtime");e.exports=n.template({1:function(){return"half"},3:function(){return"right-border"},5:function(){return'    <div class="column half">\n      <label class="card-label cvv-label" for="cvv">\n        <span class="field-name">CVV</span>\n        <input id="cvv" name="cvv" class="cvv card-field" maxlength="3" type="tel" inputmode="numeric" placeholder="CVV" autocomplete="off" autocapitalize="off">\n        <span class="payment-method-icon"></span>\n        <div class="invalid-bottom-bar"></div>\n      </label>\n    </div>\n'},7:function(){return'    <div class="column half">\n      <label class="card-label postal-code-label" for="postal-code">\n        <span class="field-name">Postal Code</span>\n        <input id="postal-code" name="postal-code" class="postal-code card-field" autocomplete="off" maxlength="8" placeholder="Postal Code" autofill="off" autocapitalize="off">\n        <div class="invalid-bottom-bar"></div>\n      </label>\n    </div>\n'},9:function(){return'  <div class="row">\n    <div class="column">\n      <label class="card-label postal-code-label" for="postal-code">\n        <span class="field-name">Postal Code</span>\n        <input id="postal-code" name="postal-code" class="postal-code card-field" autocomplete="off" maxlength="8" placeholder="Postal Code" autofill="off" autocapitalize="off">\n        <div class="invalid-bottom-bar"></div>\n      </label>\n    </div>\n  </div>\n'},11:function(){return'  <label class="checkbox-label">\n    <input name="save" type="checkbox" class="checkbox-save" value="save" checked="checked" />\n    <div class="checkbox-text">\n      Save with Paypal for use on other sites\n    </div>\n    <p class="terms">By saving information you agree to the <a href="#">Paypal Touch</a> <a href="#">Terms of Service</a></p>\n  </label>\n'},13:function(){return'  <input type="submit" value="">\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,r){var i,o,a,s=e.helperMissing,u="function",l=e.blockHelperMissing,c='<form action="#" method="post" class="grid card-form">\n  <label class="card-label credit-card-number-label" for="credit-card-number">\n    <span class="field-name">Card Number</span>\n    <input id="credit-card-number" name="credit-card-number" class="card-field" type="tel" inputmode="numeric" placeholder="Card Number" autocomplete="off">\n    <span class="payment-method-icon"></span>\n    <div class="invalid-bottom-bar"></div>\n  </label>\n\n  <div class="row">\n    <div class="column ';return i=e["if"].call(t,null!=t?t.challenges:t,{name:"if",hash:{},fn:this.program(1,r),inverse:this.noop,data:r}),null!=i&&(c+=i),c+='">\n      <label class="card-label expiration-label ',i=e["if"].call(t,null!=t?t.challenges:t,{name:"if",hash:{},fn:this.program(3,r),inverse:this.noop,data:r}),null!=i&&(c+=i),c+='" for="expiration">\n        <span class="field-name">MM / YY</span>\n        <input id="expiration" name="expiration" class="expiration card-field" type="tel" inputmode="numeric" placeholder="Expiration Date" autocomplete="off">\n        <div class="invalid-bottom-bar"></div>\n      </label>\n    </div>\n',i=(e.ifOr||t&&t.ifOr||s).call(t,null!=t?t.cvvOnly:t,null!=t?t.cvvAndZip:t,{name:"ifOr",hash:{},fn:this.program(5,r),inverse:this.noop,data:r}),null!=i&&(c+=i),i=e["if"].call(t,null!=t?t.zipOnly:t,{name:"if",hash:{},fn:this.program(7,r),inverse:this.noop,data:r}),null!=i&&(c+=i),c+="  </div>\n\n",o=null!=(o=e.cvvAndZip||(null!=t?t.cvvAndZip:t))?o:s,a={name:"cvvAndZip",hash:{},fn:this.program(9,r),inverse:this.noop,data:r},i=typeof o===u?o.call(t,a):o,e.cvvAndZip||(i=l.call(t,i,a)),null!=i&&(c+=i),c+="\n",o=null!=(o=e.crossMerchantSharing||(null!=t?t.crossMerchantSharing:t))?o:s,a={name:"crossMerchantSharing",hash:{},fn:this.program(11,r),inverse:this.noop,data:r},i=typeof o===u?o.call(t,a):o,e.crossMerchantSharing||(i=l.call(t,i,a)),null!=i&&(c+=i),c+="\n",o=null!=(o=e.isModal||(null!=t?t.isModal:t))?o:s,a={name:"isModal",hash:{},fn:this.program(13,r),inverse:this.noop,data:r},i=typeof o===u?o.call(t,a):o,e.isModal||(i=l.call(t,i,a)),null!=i&&(c+=i),c+'</form>\n\n<div class="server-error">\n  <div class="server-error-message-container">\n    <div class="server-error-message">\n      <span class="error-icon"></span>There was an error processing your request. <a href="#" class="error-retry">Try again</a>\n    </div>\n  </div>\n</div>\n'},useData:!0})},{"hbsfy/runtime":147}]},{},[1])(1)});